!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).AsgardeoAuth={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})})),t}var l=function(e){return e&&e.Math==Math&&e},o=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof t&&t)||function(){return this}()||Function("return this")(),c=o,a=function(e){try{return!!e()}catch(e){return!0}},r=!a((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),d=r,s=Function.prototype,u=s.bind,Z=s.call,h=d&&u.bind(Z,Z),b=d?function(e){return e&&h(e)}:function(e){return e&&function(){return Z.apply(e,arguments)}},m=TypeError,p=function(e){if(null==e)throw m("Can't call method on "+e);return e},I=p,g=Object,G=function(e){return g(I(e))},y=G,X=b({}.hasOwnProperty),V=Object.hasOwn||function(e,t){return X(y(e),t)},W={},C={exports:{}},R=o,S=Object.defineProperty,v=function(e,t){try{S(R,e,{value:t,configurable:!0,writable:!0})}catch(i){R[e]=t}return t},f=v,Y="__core-js_shared__",K=o[Y]||f(Y,{}),N=K;(C.exports=function(e,t){return N[e]||(N[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.0",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.0/LICENSE",source:"https://github.com/zloirock/core-js"});var J,L,k=b,U=0,H=Math.random(),A=k(1..toString),T=function(e){return"Symbol("+(void 0===e?"":e)+")_"+A(++U+H,36)},B=function(e){return"function"==typeof e},F=o,w=B,x=function(e){return w(e)?e:void 0},z=function(e,t){return arguments.length<2?x(F[e]):F[e]&&F[e][t]},P=z("navigator","userAgent")||"",Q=o,j=P,M=Q.process,E=Q.Deno,D=M&&M.versions||E&&E.version,O=D&&D.v8;O&&(L=(J=O.split("."))[0]>0&&J[0]<4?1:+(J[0]+J[1])),!L&&j&&(!(J=j.match(/Edge\/(\d+)/))||J[1]>=74)&&(J=j.match(/Chrome\/(\d+)/))&&(L=+J[1]);var _=L,q=_,$=a,ee=!!Object.getOwnPropertySymbols&&!$((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&q&&q<41})),te=ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ie=o,ne=C.exports,le=V,oe=T,ce=ee,ae=te,re=ne("wks"),de=ie.Symbol,se=de&&de.for,ue=ae?de:de&&de.withoutSetter||oe,Ze=function(e){if(!le(re,e)||!ce&&"string"!=typeof re[e]){var t="Symbol."+e;ce&&le(de,e)?re[e]=de[e]:re[e]=ae&&se?se(t):ue(t)}return re[e]},he=Ze;W.f=he;var be={},me=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pe=B,Ie=function(e){return"object"==typeof e?null!==e:pe(e)},ge=Ie,Ge=o.document,ye=ge(Ge)&&ge(Ge.createElement),Xe=function(e){return ye?Ge.createElement(e):{}},Ve=Xe,We=!me&&!a((function(){return 7!=Object.defineProperty(Ve("div"),"a",{get:function(){return 7}}).a})),Ce=me&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Re=Ie,Se=String,ve=TypeError,fe=function(e){if(Re(e))return e;throw ve(Se(e)+" is not an object")},Ye=r,Ke=Function.prototype.call,Ne=Ye?Ke.bind(Ke):function(){return Ke.apply(Ke,arguments)},Je=b({}.isPrototypeOf),Le=z,ke=B,Ue=Je,He=Object,Ae=te?function(e){return"symbol"==typeof e}:function(e){var t=Le("Symbol");return ke(t)&&Ue(t.prototype,He(e))},Te=String,Be=function(e){try{return Te(e)}catch(e){return"Object"}},Fe=B,we=Be,xe=TypeError,ze=function(e){if(Fe(e))return e;throw xe(we(e)+" is not a function")},Pe=ze,Qe=function(e,t){var i=e[t];return null==i?void 0:Pe(i)},je=Ne,Me=B,Ee=Ie,De=TypeError,Oe=Ne,_e=Ie,qe=Ae,$e=Qe,et=function(e,t){var i,n;if("string"===t&&Me(i=e.toString)&&!Ee(n=je(i,e)))return n;if(Me(i=e.valueOf)&&!Ee(n=je(i,e)))return n;if("string"!==t&&Me(i=e.toString)&&!Ee(n=je(i,e)))return n;throw De("Can't convert object to primitive value")},tt=TypeError,it=Ze("toPrimitive"),nt=function(e,t){if(!_e(e)||qe(e))return e;var i,n=$e(e,it);if(n){if(void 0===t&&(t="default"),i=Oe(n,e,t),!_e(i)||qe(i))return i;throw tt("Can't convert object to primitive value")}return void 0===t&&(t="number"),et(e,t)},lt=nt,ot=Ae,ct=function(e){var t=lt(e,"string");return ot(t)?t:t+""},at=me,rt=We,dt=Ce,st=fe,ut=ct,Zt=TypeError,ht=Object.defineProperty,bt=Object.getOwnPropertyDescriptor,mt="enumerable",pt="configurable",It="writable";be.f=at?dt?function(e,t,i){if(st(e),t=ut(t),st(i),"function"==typeof e&&"prototype"===t&&"value"in i&&It in i&&!i.writable){var n=bt(e,t);n&&n.writable&&(e[t]=i.value,i={configurable:pt in i?i.configurable:n.configurable,enumerable:mt in i?i.enumerable:n.enumerable,writable:!1})}return ht(e,t,i)}:ht:function(e,t,i){if(st(e),t=ut(t),st(i),rt)try{return ht(e,t,i)}catch(e){}if("get"in i||"set"in i)throw Zt("Accessors not supported");return"value"in i&&(e[t]=i.value),e};var gt=c,Gt=V,yt=W,Xt=be.f,Vt=function(e){var t=gt.Symbol||(gt.Symbol={});Gt(t,e)||Xt(t,e,{value:yt.f(e)})};Vt("matchAll");var Wt={},Ct={},Rt={}.propertyIsEnumerable,St=Object.getOwnPropertyDescriptor,vt=St&&!Rt.call({1:2},1);Ct.f=vt?function(e){var t=St(this,e);return!!t&&t.enumerable}:Rt;var ft=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Yt=b,Kt=Yt({}.toString),Nt=Yt("".slice),Jt=function(e){return Nt(Kt(e),8,-1)},Lt=a,kt=Jt,Ut=Object,Ht=b("".split),At=Lt((function(){return!Ut("z").propertyIsEnumerable(0)}))?function(e){return"String"==kt(e)?Ht(e,""):Ut(e)}:Ut,Tt=At,Bt=p,Ft=function(e){return Tt(Bt(e))},wt=me,xt=Ne,zt=Ct,Pt=ft,Qt=Ft,jt=ct,Mt=V,Et=We,Dt=Object.getOwnPropertyDescriptor;Wt.f=wt?Dt:function(e,t){if(e=Qt(e),t=jt(t),Et)try{return Dt(e,t)}catch(e){}if(Mt(e,t))return Pt(!xt(zt.f,e,t),e[t])};var Ot=be,_t=ft,qt=me?function(e,t,i){return Ot.f(e,t,_t(1,i))}:function(e,t,i){return e[t]=i,e},$t={exports:{}},ei=me,ti=V,ii=Function.prototype,ni=ei&&Object.getOwnPropertyDescriptor,li=ti(ii,"name"),oi={EXISTS:li,PROPER:li&&"something"===function(){}.name,CONFIGURABLE:li&&(!ei||ei&&ni(ii,"name").configurable)},ci=B,ai=K,ri=b(Function.toString);ci(ai.inspectSource)||(ai.inspectSource=function(e){return ri(e)});var di,si,ui,Zi=ai.inspectSource,hi=B,bi=Zi,mi=o.WeakMap,pi=hi(mi)&&/native code/.test(bi(mi)),Ii=C.exports,gi=T,Gi=Ii("keys"),yi=function(e){return Gi[e]||(Gi[e]=gi(e))},Xi={},Vi=pi,Wi=o,Ci=b,Ri=Ie,Si=qt,vi=V,fi=K,Yi=yi,Ki=Xi,Ni="Object already initialized",Ji=Wi.TypeError,Li=Wi.WeakMap;if(Vi||fi.state){var ki=fi.state||(fi.state=new Li),Ui=Ci(ki.get),Hi=Ci(ki.has),Ai=Ci(ki.set);di=function(e,t){if(Hi(ki,e))throw new Ji(Ni);return t.facade=e,Ai(ki,e,t),t},si=function(e){return Ui(ki,e)||{}},ui=function(e){return Hi(ki,e)}}else{var Ti=Yi("state");Ki[Ti]=!0,di=function(e,t){if(vi(e,Ti))throw new Ji(Ni);return t.facade=e,Si(e,Ti,t),t},si=function(e){return vi(e,Ti)?e[Ti]:{}},ui=function(e){return vi(e,Ti)}}var Bi={set:di,get:si,has:ui,enforce:function(e){return ui(e)?si(e):di(e,{})},getterFor:function(e){return function(t){var i;if(!Ri(t)||(i=si(t)).type!==e)throw Ji("Incompatible receiver, "+e+" required");return i}}},Fi=a,wi=B,xi=V,zi=me,Pi=oi.CONFIGURABLE,Qi=Zi,ji=Bi.enforce,Mi=Bi.get,Ei=Object.defineProperty,Di=zi&&!Fi((function(){return 8!==Ei((function(){}),"length",{value:8}).length})),Oi=String(String).split("String"),_i=$t.exports=function(e,t,i){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!xi(e,"name")||Pi&&e.name!==t)&&(zi?Ei(e,"name",{value:t,configurable:!0}):e.name=t),Di&&i&&xi(i,"arity")&&e.length!==i.arity&&Ei(e,"length",{value:i.arity});try{i&&xi(i,"constructor")&&i.constructor?zi&&Ei(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=ji(e);return xi(n,"source")||(n.source=Oi.join("string"==typeof t?t:"")),e};Function.prototype.toString=_i((function(){return wi(this)&&Mi(this).source||Qi(this)}),"toString");var qi=B,$i=be,en=$t.exports,tn=v,nn=function(e,t,i,n){n||(n={});var l=n.enumerable,o=void 0!==n.name?n.name:t;if(qi(i)&&en(i,o,n),n.global)l?e[t]=i:tn(t,i);else{try{n.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=i:$i.f(e,t,{value:i,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},ln={},on=Math.ceil,cn=Math.floor,an=Math.trunc||function(e){var t=+e;return(t>0?cn:on)(t)},rn=an,dn=function(e){var t=+e;return t!=t||0===t?0:rn(t)},sn=dn,un=Math.max,Zn=Math.min,hn=function(e,t){var i=sn(e);return i<0?un(i+t,0):Zn(i,t)},bn=dn,mn=Math.min,pn=function(e){return e>0?mn(bn(e),9007199254740991):0},In=pn,gn=function(e){return In(e.length)},Gn=Ft,yn=hn,Xn=gn,Vn=function(e){return function(t,i,n){var l,o=Gn(t),c=Xn(o),a=yn(n,c);if(e&&i!=i){for(;c>a;)if((l=o[a++])!=l)return!0}else for(;c>a;a++)if((e||a in o)&&o[a]===i)return e||a||0;return!e&&-1}},Wn={includes:Vn(!0),indexOf:Vn(!1)},Cn=V,Rn=Ft,Sn=Wn.indexOf,vn=Xi,fn=b([].push),Yn=function(e,t){var i,n=Rn(e),l=0,o=[];for(i in n)!Cn(vn,i)&&Cn(n,i)&&fn(o,i);for(;t.length>l;)Cn(n,i=t[l++])&&(~Sn(o,i)||fn(o,i));return o},Kn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Nn=Yn,Jn=Kn.concat("length","prototype");ln.f=Object.getOwnPropertyNames||function(e){return Nn(e,Jn)};var Ln={};Ln.f=Object.getOwnPropertySymbols;var kn=z,Un=ln,Hn=Ln,An=fe,Tn=b([].concat),Bn=kn("Reflect","ownKeys")||function(e){var t=Un.f(An(e)),i=Hn.f;return i?Tn(t,i(e)):t},Fn=V,wn=Bn,xn=Wt,zn=be,Pn=a,Qn=B,jn=/#|\.prototype\./,Mn=function(e,t){var i=Dn[En(e)];return i==_n||i!=On&&(Qn(t)?Pn(t):!!t)},En=Mn.normalize=function(e){return String(e).replace(jn,".").toLowerCase()},Dn=Mn.data={},On=Mn.NATIVE="N",_n=Mn.POLYFILL="P",qn=Mn,$n=o,el=Wt.f,tl=qt,il=nn,nl=v,ll=function(e,t,i){for(var n=wn(t),l=zn.f,o=xn.f,c=0;c<n.length;c++){var a=n[c];Fn(e,a)||i&&Fn(i,a)||l(e,a,o(t,a))}},ol=qn,cl=function(e,t){var i,n,l,o,c,a=e.target,r=e.global,d=e.stat;if(i=r?$n:d?$n[a]||nl(a,{}):($n[a]||{}).prototype)for(n in t){if(o=t[n],l=e.dontCallGetSet?(c=el(i,n))&&c.value:i[n],!ol(r?n:a+(d?".":"#")+n,e.forced)&&void 0!==l){if(typeof o==typeof l)continue;ll(o,l)}(e.sham||l&&l.sham)&&tl(o,"sham",!0),il(i,n,o,e)}},al={},rl=Yn,dl=Kn,sl=Object.keys||function(e){return rl(e,dl)},ul=me,Zl=Ce,hl=be,bl=fe,ml=Ft,pl=sl;al.f=ul&&!Zl?Object.defineProperties:function(e,t){bl(e);for(var i,n=ml(t),l=pl(t),o=l.length,c=0;o>c;)hl.f(e,i=l[c++],n[i]);return e};var Il,gl=z("document","documentElement"),Gl=fe,yl=al,Xl=Kn,Vl=Xi,Wl=gl,Cl=Xe,Rl=yi("IE_PROTO"),Sl=function(){},vl=function(e){return"<script>"+e+"</"+"script>"},fl=function(e){e.write(vl("")),e.close();var t=e.parentWindow.Object;return e=null,t},Yl=function(){try{Il=new ActiveXObject("htmlfile")}catch(e){}var e,t;Yl="undefined"!=typeof document?document.domain&&Il?fl(Il):((t=Cl("iframe")).style.display="none",Wl.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(vl("document.F=Object")),e.close(),e.F):fl(Il);for(var i=Xl.length;i--;)delete Yl.prototype[Xl[i]];return Yl()};Vl[Rl]=!0;var Kl=Object.create||function(e,t){var i;return null!==e?(Sl.prototype=Gl(e),i=new Sl,Sl.prototype=null,i[Rl]=e):i=Yl(),void 0===t?i:yl.f(i,t)},Nl=Ze,Jl=Kl,Ll=be.f,kl=Nl("unscopables"),Ul=Array.prototype;null==Ul[kl]&&Ll(Ul,kl,{configurable:!0,value:Jl(null)});var Hl=function(e){Ul[kl][e]=!0},Al=Wn.includes,Tl=Hl;cl({target:"Array",proto:!0,forced:a((function(){return!Array(1).includes()}))},{includes:function(e){return Al(this,e,arguments.length>1?arguments[1]:void 0)}}),Tl("includes"),Hl("flat"),Hl("flatMap");var Bl={},Fl=ze,wl=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=Fl(t),this.reject=Fl(i)};Bl.f=function(e){return new wl(e)};var xl=ze,zl=r,Pl=b(b.bind),Ql=function(e,t){return xl(e),void 0===t?e:zl?Pl(e,t):function(){return e.apply(t,arguments)}},jl={},Ml=jl,El=Ze("iterator"),Dl=Array.prototype,Ol=function(e){return void 0!==e&&(Ml.Array===e||Dl[El]===e)},_l={};_l[Ze("toStringTag")]="z";var ql="[object z]"===String(_l),$l=B,eo=Jt,to=Ze("toStringTag"),io=Object,no="Arguments"==eo(function(){return arguments}()),lo=ql?eo:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=io(e),to))?i:no?eo(t):"Object"==(n=eo(t))&&$l(t.callee)?"Arguments":n},oo=lo,co=Qe,ao=jl,ro=Ze("iterator"),so=function(e){if(null!=e)return co(e,ro)||co(e,"@@iterator")||ao[oo(e)]},uo=Ne,Zo=ze,ho=fe,bo=Be,mo=so,po=TypeError,Io=function(e,t){var i=arguments.length<2?mo(e):t;if(Zo(i))return ho(uo(i,e));throw po(bo(e)+" is not iterable")},go=Ne,Go=fe,yo=Qe,Xo=function(e,t,i){var n,l;Go(e);try{if(!(n=yo(e,"return"))){if("throw"===t)throw i;return i}n=go(n,e)}catch(e){l=!0,n=e}if("throw"===t)throw i;if(l)throw n;return Go(n),i},Vo=Ql,Wo=Ne,Co=fe,Ro=Be,So=Ol,vo=gn,fo=Je,Yo=Io,Ko=so,No=Xo,Jo=TypeError,Lo=function(e,t){this.stopped=e,this.result=t},ko=Lo.prototype,Uo=Ne,Ho=ze,Ao=Bl,To=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Bo=function(e,t,i){var n,l,o,c,a,r,d,s=i&&i.that,u=!(!i||!i.AS_ENTRIES),Z=!(!i||!i.IS_RECORD),h=!(!i||!i.IS_ITERATOR),b=!(!i||!i.INTERRUPTED),m=Vo(t,s),p=function(e){return n&&No(n,"normal",e),new Lo(!0,e)},I=function(e){return u?(Co(e),b?m(e[0],e[1],p):m(e[0],e[1])):b?m(e,p):m(e)};if(Z)n=e.iterator;else if(h)n=e;else{if(!(l=Ko(e)))throw Jo(Ro(e)+" is not iterable");if(So(l)){for(o=0,c=vo(e);c>o;o++)if((a=I(e[o]))&&fo(ko,a))return a;return new Lo(!1)}n=Yo(e,l)}for(r=Z?e.next:n.next;!(d=Wo(r,n)).done;){try{a=I(d.value)}catch(e){No(n,"throw",e)}if("object"==typeof a&&a&&fo(ko,a))return a}return new Lo(!1)};cl({target:"Promise",stat:!0},{allSettled:function(e){var t=this,i=Ao.f(t),n=i.resolve,l=i.reject,o=To((function(){var i=Ho(t.resolve),l=[],o=0,c=1;Bo(e,(function(e){var a=o++,r=!1;c++,Uo(i,t,e).then((function(e){r||(r=!0,l[a]={status:"fulfilled",value:e},--c||n(l))}),(function(e){r||(r=!0,l[a]={status:"rejected",reason:e},--c||n(l))}))})),--c||n(l)}));return o.error&&l(o.value),i.promise}});var Fo=o.Promise,wo=b,xo=a,zo=B,Po=lo,Qo=Zi,jo=function(){},Mo=[],Eo=z("Reflect","construct"),Do=/^\s*(?:class|function)\b/,Oo=wo(Do.exec),_o=!Do.exec(jo),qo=function(e){if(!zo(e))return!1;try{return Eo(jo,Mo,e),!0}catch(e){return!1}},$o=function(e){if(!zo(e))return!1;switch(Po(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _o||!!Oo(Do,Qo(e))}catch(e){return!0}};$o.sham=!0;var ec=!Eo||xo((function(){var e;return qo(qo.call)||!qo(Object)||!qo((function(){e=!0}))||e}))?$o:qo,tc=ec,ic=Be,nc=TypeError,lc=function(e){if(tc(e))return e;throw nc(ic(e)+" is not a constructor")},oc=fe,cc=lc,ac=Ze("species"),rc=function(e,t){var i,n=oc(e).constructor;return void 0===n||null==(i=oc(n)[ac])?t:cc(i)},dc=fe,sc=Ie,uc=Bl,Zc=cl,hc=Fo,bc=a,mc=z,pc=B,Ic=rc,gc=function(e,t){if(dc(e),sc(t)&&t.constructor===e)return t;var i=uc.f(e);return(0,i.resolve)(t),i.promise},Gc=nn,yc=hc&&hc.prototype;if(Zc({target:"Promise",proto:!0,real:!0,forced:!!hc&&bc((function(){yc.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Ic(this,mc("Promise")),i=pc(e);return this.then(i?function(i){return gc(t,e()).then((function(){return i}))}:e,i?function(i){return gc(t,e()).then((function(){throw i}))}:e)}}),pc(hc)){var Xc=mc("Promise").prototype.finally;yc.finally!==Xc&&Gc(yc,"finally",Xc,{unsafe:!0})}var Vc=$t.exports,Wc=be,Cc=function(e,t,i){return i.get&&Vc(i.get,t,{getter:!0}),i.set&&Vc(i.set,t,{setter:!0}),Wc.f(e,t,i)},Rc=fe,Sc=function(){var e=Rc(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},vc=me,fc=Cc,Yc=Sc,Kc=a,Nc=o.RegExp,Jc=Nc.prototype,Lc=vc&&Kc((function(){var e=!0;try{Nc(".","d")}catch(t){e=!1}var t={},i="",n=e?"dgimsy":"gimsy",l=function(e,n){Object.defineProperty(t,e,{get:function(){return i+=n,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var c in e&&(o.hasIndices="d"),o)l(c,o[c]);return Object.getOwnPropertyDescriptor(Jc,"flags").get.call(t)!==n||i!==n}));Lc&&fc(Jc,"flags",{configurable:!0,get:Yc});var kc,Uc,Hc,Ac=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Tc=V,Bc=B,Fc=G,wc=Ac,xc=yi("IE_PROTO"),zc=Object,Pc=zc.prototype,Qc=wc?zc.getPrototypeOf:function(e){var t=Fc(e);if(Tc(t,xc))return t[xc];var i=t.constructor;return Bc(i)&&t instanceof i?i.prototype:t instanceof zc?Pc:null},jc=a,Mc=B,Ec=Qc,Dc=nn,Oc=Ze("iterator"),_c=!1;[].keys&&("next"in(Hc=[].keys())?(Uc=Ec(Ec(Hc)))!==Object.prototype&&(kc=Uc):_c=!0);var qc=null==kc||jc((function(){var e={};return kc[Oc].call(e)!==e}));qc&&(kc={}),Mc(kc[Oc])||Dc(kc,Oc,(function(){return this}));var $c,ea,ta={IteratorPrototype:kc,BUGGY_SAFARI_ITERATORS:_c},ia=be.f,na=V,la=Ze("toStringTag"),oa=function(e,t,i){e&&!i&&(e=e.prototype),e&&!na(e,la)&&ia(e,la,{configurable:!0,value:t})},ca=ta.IteratorPrototype,aa=Kl,ra=ft,da=oa,sa=jl,ua=function(){return this},Za=function(e,t,i,n){var l=t+" Iterator";return e.prototype=aa(ca,{next:ra(+!n,i)}),da(e,l,!1),sa[l]=ua,e},ha=lo,ba=String,ma=function(e){if("Symbol"===ha(e))throw TypeError("Cannot convert a Symbol value to a string");return ba(e)},pa=Ie,Ia=Jt,ga=Ze("match"),Ga=Ne,ya=V,Xa=Je,Va=Sc,Wa=RegExp.prototype,Ca=b,Ra=dn,Sa=ma,va=p,fa=Ca("".charAt),Ya=Ca("".charCodeAt),Ka=Ca("".slice),Na=function(e){return function(t,i){var n,l,o=Sa(va(t)),c=Ra(i),a=o.length;return c<0||c>=a?e?"":void 0:(n=Ya(o,c))<55296||n>56319||c+1===a||(l=Ya(o,c+1))<56320||l>57343?e?fa(o,c):n:e?Ka(o,c,c+2):l-56320+(n-55296<<10)+65536}},Ja={codeAt:Na(!1),charAt:Na(!0)},La=Ja.charAt,ka=function(e,t,i){return t+(i?La(e,t).length:1)},Ua=a,Ha=o.RegExp,Aa=Ua((function(){var e=Ha("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Ta=Aa||Ua((function(){return!Ha("a","y").sticky})),Ba={BROKEN_CARET:Aa||Ua((function(){var e=Ha("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:Ta,UNSUPPORTED_Y:Aa},Fa=a,wa=o.RegExp,xa=Fa((function(){var e=wa(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),za=a,Pa=o.RegExp,Qa=za((function(){var e=Pa("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),ja=Ne,Ma=b,Ea=ma,Da=Sc,Oa=Ba,_a=C.exports,qa=Kl,$a=Bi.get,er=xa,tr=Qa,ir=_a("native-string-replace",String.prototype.replace),nr=RegExp.prototype.exec,lr=nr,or=Ma("".charAt),cr=Ma("".indexOf),ar=Ma("".replace),rr=Ma("".slice),dr=(ea=/b*/g,ja(nr,$c=/a/,"a"),ja(nr,ea,"a"),0!==$c.lastIndex||0!==ea.lastIndex),sr=Oa.BROKEN_CARET,ur=void 0!==/()??/.exec("")[1];(dr||ur||sr||er||tr)&&(lr=function(e){var t,i,n,l,o,c,a,r=this,d=$a(r),s=Ea(e),u=d.raw;if(u)return u.lastIndex=r.lastIndex,t=ja(lr,u,s),r.lastIndex=u.lastIndex,t;var Z=d.groups,h=sr&&r.sticky,b=ja(Da,r),m=r.source,p=0,I=s;if(h&&(b=ar(b,"y",""),-1===cr(b,"g")&&(b+="g"),I=rr(s,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&"\n"!==or(s,r.lastIndex-1))&&(m="(?: "+m+")",I=" "+I,p++),i=new RegExp("^(?:"+m+")",b)),ur&&(i=new RegExp("^"+m+"$(?!\\s)",b)),dr&&(n=r.lastIndex),l=ja(nr,h?i:r,I),h?l?(l.input=rr(l.input,p),l[0]=rr(l[0],p),l.index=r.lastIndex,r.lastIndex+=l[0].length):r.lastIndex=0:dr&&l&&(r.lastIndex=r.global?l.index+l[0].length:n),ur&&l&&l.length>1&&ja(ir,l[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(l[o]=void 0)})),l&&Z)for(l.groups=c=qa(null),o=0;o<Z.length;o++)c[(a=Z[o])[0]]=l[a[1]];return l});var Zr=lr,hr=Ne,br=fe,mr=B,pr=Jt,Ir=Zr,gr=TypeError,Gr=function(e,t){var i=e.exec;if(mr(i)){var n=hr(i,e,t);return null!==n&&br(n),n}if("RegExp"===pr(e))return hr(Ir,e,t);throw gr("RegExp#exec called on incompatible receiver")},yr=cl,Xr=Ne,Vr=b,Wr=Za,Cr=p,Rr=pn,Sr=ma,vr=fe,fr=function(e){var t;return pa(e)&&(void 0!==(t=e[ga])?!!t:"RegExp"==Ia(e))},Yr=function(e){var t=e.flags;return void 0!==t||"flags"in Wa||ya(e,"flags")||!Xa(Wa,e)?t:Ga(Va,e)},Kr=Qe,Nr=nn,Jr=a,Lr=rc,kr=ka,Ur=Gr,Hr=Bi,Ar=Ze("matchAll"),Tr="RegExp String",Br="RegExp String Iterator",Fr=Hr.set,wr=Hr.getterFor(Br),xr=RegExp.prototype,zr=TypeError,Pr=Vr("".indexOf),Qr=Vr("".matchAll),jr=!!Qr&&!Jr((function(){Qr("a",/./)})),Mr=Wr((function(e,t,i,n){Fr(this,{type:Br,regexp:e,string:t,global:i,unicode:n,done:!1})}),Tr,(function(){var e=wr(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,i=e.string,n=Ur(t,i);return null===n?{value:void 0,done:e.done=!0}:e.global?(""===Sr(n[0])&&(t.lastIndex=kr(i,Rr(t.lastIndex),e.unicode)),{value:n,done:!1}):(e.done=!0,{value:n,done:!1})})),Er=function(e){var t,i,n,l=vr(this),o=Sr(e),c=Lr(l,RegExp),a=Sr(Yr(l));return t=new c(c===RegExp?l.source:l,a),i=!!~Pr(a,"g"),n=!!~Pr(a,"u"),t.lastIndex=Rr(l.lastIndex),new Mr(t,o,i,n)};yr({target:"String",proto:!0,forced:jr},{matchAll:function(e){var t,i,n,l=Cr(this);if(null!=e){if(fr(e)&&(t=Sr(Cr(Yr(e))),!~Pr(t,"g")))throw zr("`.matchAll` does not allow non-global regexes");if(jr)return Qr(l,e);if(n=Kr(e,Ar))return Xr(n,e,l)}else if(jr)return Qr(l,e);return i=Sr(l),new RegExp(e,"g")[Ar](i)}}),Ar in xr||Nr(xr,Ar,Er);var Dr=r,Or=Function.prototype,_r=Or.apply,qr=Or.call,$r="object"==typeof Reflect&&Reflect.apply||(Dr?qr.bind(_r):function(){return qr.apply(_r,arguments)});cl({target:"RegExp",proto:!0,forced:/./.exec!==Zr},{exec:Zr});var ed=b,td=nn,id=Zr,nd=a,ld=Ze,od=qt,cd=ld("species"),ad=RegExp.prototype,rd=b,dd=G,sd=Math.floor,ud=rd("".charAt),Zd=rd("".replace),hd=rd("".slice),bd=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,md=/\$([$&'`]|\d{1,2})/g,pd=$r,Id=Ne,gd=b,Gd=function(e,t,i,n){var l=ld(e),o=!nd((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})),c=o&&!nd((function(){var t=!1,i=/a/;return"split"===e&&((i={}).constructor={},i.constructor[cd]=function(){return i},i.flags="",i[l]=/./[l]),i.exec=function(){return t=!0,null},i[l](""),!t}));if(!o||!c||i){var a=ed(/./[l]),r=t(l,""[e],(function(e,t,i,n,l){var c=ed(e),r=t.exec;return r===id||r===ad.exec?o&&!l?{done:!0,value:a(t,i,n)}:{done:!0,value:c(i,t,n)}:{done:!1}}));td(String.prototype,e,r[0]),td(ad,l,r[1])}n&&od(ad[l],"sham",!0)},yd=a,Xd=fe,Vd=B,Wd=dn,Cd=pn,Rd=ma,Sd=p,vd=ka,fd=Qe,Yd=function(e,t,i,n,l,o){var c=i+e.length,a=n.length,r=md;return void 0!==l&&(l=dd(l),r=bd),Zd(o,r,(function(o,r){var d;switch(ud(r,0)){case"$":return"$";case"&":return e;case"`":return hd(t,0,i);case"'":return hd(t,c);case"<":d=l[hd(r,1,-1)];break;default:var s=+r;if(0===s)return o;if(s>a){var u=sd(s/10);return 0===u?o:u<=a?void 0===n[u-1]?ud(r,1):n[u-1]+ud(r,1):o}d=n[s-1]}return void 0===d?"":d}))},Kd=Gr,Nd=Ze("replace"),Jd=Math.max,Ld=Math.min,kd=gd([].concat),Ud=gd([].push),Hd=gd("".indexOf),Ad=gd("".slice),Td="$0"==="a".replace(/./,"$0"),Bd=!!/./[Nd]&&""===/./[Nd]("a","$0");Gd("replace",(function(e,t,i){var n=Bd?"$":"$0";return[function(e,i){var n=Sd(this),l=null==e?void 0:fd(e,Nd);return l?Id(l,e,n,i):Id(t,Rd(n),e,i)},function(e,l){var o=Xd(this),c=Rd(e);if("string"==typeof l&&-1===Hd(l,n)&&-1===Hd(l,"$<")){var a=i(t,o,c,l);if(a.done)return a.value}var r=Vd(l);r||(l=Rd(l));var d=o.global;if(d){var s=o.unicode;o.lastIndex=0}for(var u=[];;){var Z=Kd(o,c);if(null===Z)break;if(Ud(u,Z),!d)break;""===Rd(Z[0])&&(o.lastIndex=vd(c,Cd(o.lastIndex),s))}for(var h,b="",m=0,p=0;p<u.length;p++){for(var I=Rd((Z=u[p])[0]),g=Jd(Ld(Wd(Z.index),c.length),0),G=[],y=1;y<Z.length;y++)Ud(G,void 0===(h=Z[y])?h:String(h));var X=Z.groups;if(r){var V=kd([I],G,g,c);void 0!==X&&Ud(V,X);var W=Rd(pd(l,void 0,V))}else W=Yd(I,c,g,G,X,l);g>=m&&(b+=Ad(c,m,g)+W,m=g+I.length)}return b+Ad(c,m)}]}),!!yd((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!Td||Bd);var Fd={exports:{}},wd=Ze("iterator"),xd=!1;try{var zd=0,Pd={next:function(){return{done:!!zd++}},return:function(){xd=!0}};Pd[wd]=function(){return this},Array.from(Pd,(function(){throw 2}))}catch(e){}var Qd,jd,Md,Ed="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Dd=B,Od=String,_d=TypeError,qd=b,$d=fe,es=function(e){if("object"==typeof e||Dd(e))return e;throw _d("Can't set "+Od(e)+" as a prototype")},ts=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=qd(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return $d(i),es(n),t?e(i,n):i.__proto__=n,i}}():void 0),is=Ed,ns=me,ls=o,os=B,cs=Ie,as=V,rs=lo,ds=Be,ss=qt,us=nn,Zs=be.f,hs=Je,bs=Qc,ms=ts,ps=Ze,Is=T,gs=Bi.enforce,Gs=Bi.get,ys=ls.Int8Array,Xs=ys&&ys.prototype,Vs=ls.Uint8ClampedArray,Ws=Vs&&Vs.prototype,Cs=ys&&bs(ys),Rs=Xs&&bs(Xs),Ss=Object.prototype,vs=ls.TypeError,fs=ps("toStringTag"),Ys=Is("TYPED_ARRAY_TAG"),Ks="TypedArrayConstructor",Ns=is&&!!ms&&"Opera"!==rs(ls.opera),Js=!1,Ls={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ks={BigInt64Array:8,BigUint64Array:8},Us=function(e){var t=bs(e);if(cs(t)){var i=Gs(t);return i&&as(i,Ks)?i.TypedArrayConstructor:Us(t)}},Hs=function(e){if(!cs(e))return!1;var t=rs(e);return as(Ls,t)||as(ks,t)};for(Qd in Ls)(Md=(jd=ls[Qd])&&jd.prototype)?gs(Md).TypedArrayConstructor=jd:Ns=!1;for(Qd in ks)(Md=(jd=ls[Qd])&&jd.prototype)&&(gs(Md).TypedArrayConstructor=jd);if((!Ns||!os(Cs)||Cs===Function.prototype)&&(Cs=function(){throw vs("Incorrect invocation")},Ns))for(Qd in Ls)ls[Qd]&&ms(ls[Qd],Cs);if((!Ns||!Rs||Rs===Ss)&&(Rs=Cs.prototype,Ns))for(Qd in Ls)ls[Qd]&&ms(ls[Qd].prototype,Rs);if(Ns&&bs(Ws)!==Rs&&ms(Ws,Rs),ns&&!as(Rs,fs))for(Qd in Js=!0,Zs(Rs,fs,{get:function(){return cs(this)?this[Ys]:void 0}}),Ls)ls[Qd]&&ss(ls[Qd],Ys,Qd);var As={NATIVE_ARRAY_BUFFER_VIEWS:Ns,TYPED_ARRAY_TAG:Js&&Ys,aTypedArray:function(e){if(Hs(e))return e;throw vs("Target is not a typed array")},aTypedArrayConstructor:function(e){if(os(e)&&(!ms||hs(Cs,e)))return e;throw vs(ds(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i,n){if(ns){if(i)for(var l in Ls){var o=ls[l];if(o&&as(o.prototype,e))try{delete o.prototype[e]}catch(i){try{o.prototype[e]=t}catch(e){}}}Rs[e]&&!i||us(Rs,e,i?t:Ns&&Xs[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,i){var n,l;if(ns){if(ms){if(i)for(n in Ls)if((l=ls[n])&&as(l,e))try{delete l[e]}catch(e){}if(Cs[e]&&!i)return;try{return us(Cs,e,i?t:Ns&&Cs[e]||t)}catch(e){}}for(n in Ls)!(l=ls[n])||l[e]&&!i||us(l,e,t)}},getTypedArrayConstructor:Us,isView:function(e){if(!cs(e))return!1;var t=rs(e);return"DataView"===t||as(Ls,t)||as(ks,t)},isTypedArray:Hs,TypedArray:Cs,TypedArrayPrototype:Rs},Ts=o,Bs=a,Fs=function(e,t){if(!t&&!xd)return!1;var i=!1;try{var n={};n[wd]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(e){}return i},ws=As.NATIVE_ARRAY_BUFFER_VIEWS,xs=Ts.ArrayBuffer,zs=Ts.Int8Array,Ps=!ws||!Bs((function(){zs(1)}))||!Bs((function(){new zs(-1)}))||!Fs((function(e){new zs,new zs(null),new zs(1.5),new zs(e)}),!0)||Bs((function(){return 1!==new zs(new xs(2),1,void 0).length})),Qs=nn,js=function(e,t,i){for(var n in t)Qs(e,n,t[n],i);return e},Ms=Je,Es=TypeError,Ds=function(e,t){if(Ms(t,e))return e;throw Es("Incorrect invocation")},Os=dn,_s=pn,qs=RangeError,$s=function(e){if(void 0===e)return 0;var t=Os(e),i=_s(t);if(t!==i)throw qs("Wrong length or index");return i},eu=Array,tu=Math.abs,iu=Math.pow,nu=Math.floor,lu=Math.log,ou=Math.LN2,cu={pack:function(e,t,i){var n,l,o,c=eu(i),a=8*i-t-1,r=(1<<a)-1,d=r>>1,s=23===t?iu(2,-24)-iu(2,-77):0,u=e<0||0===e&&1/e<0?1:0,Z=0;for((e=tu(e))!=e||e===1/0?(l=e!=e?1:0,n=r):(n=nu(lu(e)/ou),e*(o=iu(2,-n))<1&&(n--,o*=2),(e+=n+d>=1?s/o:s*iu(2,1-d))*o>=2&&(n++,o/=2),n+d>=r?(l=0,n=r):n+d>=1?(l=(e*o-1)*iu(2,t),n+=d):(l=e*iu(2,d-1)*iu(2,t),n=0));t>=8;)c[Z++]=255&l,l/=256,t-=8;for(n=n<<t|l,a+=t;a>0;)c[Z++]=255&n,n/=256,a-=8;return c[--Z]|=128*u,c},unpack:function(e,t){var i,n=e.length,l=8*n-t-1,o=(1<<l)-1,c=o>>1,a=l-7,r=n-1,d=e[r--],s=127&d;for(d>>=7;a>0;)s=256*s+e[r--],a-=8;for(i=s&(1<<-a)-1,s>>=-a,a+=t;a>0;)i=256*i+e[r--],a-=8;if(0===s)s=1-c;else{if(s===o)return i?NaN:d?-1/0:1/0;i+=iu(2,t),s-=c}return(d?-1:1)*i*iu(2,s-t)}},au=G,ru=hn,du=gn,su=function(e){for(var t=au(this),i=du(t),n=arguments.length,l=ru(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,c=void 0===o?i:ru(o,i);c>l;)t[l++]=e;return t},uu=ct,Zu=be,hu=ft,bu=function(e,t,i){var n=uu(t);n in e?Zu.f(e,n,hu(0,i)):e[n]=i},mu=hn,pu=gn,Iu=bu,gu=Array,Gu=Math.max,yu=function(e,t,i){for(var n=pu(e),l=mu(t,n),o=mu(void 0===i?n:i,n),c=gu(Gu(o-l,0)),a=0;l<o;l++,a++)Iu(c,a,e[l]);return c.length=a,c},Xu=o,Vu=b,Wu=me,Cu=Ed,Ru=oi,Su=qt,vu=js,fu=a,Yu=Ds,Ku=dn,Nu=pn,Ju=$s,Lu=cu,ku=Qc,Uu=ts,Hu=ln.f,Au=be.f,Tu=su,Bu=yu,Fu=oa,wu=Ru.PROPER,xu=Ru.CONFIGURABLE,zu=Bi.get,Pu=Bi.set,Qu="ArrayBuffer",ju="DataView",Mu="Wrong index",Eu=Xu.ArrayBuffer,Du=Eu,Ou=Du&&Du.prototype,_u=Xu.DataView,qu=_u&&_u.prototype,$u=Object.prototype,eZ=Xu.Array,tZ=Xu.RangeError,iZ=Vu(Tu),nZ=Vu([].reverse),lZ=Lu.pack,oZ=Lu.unpack,cZ=function(e){return[255&e]},aZ=function(e){return[255&e,e>>8&255]},rZ=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},dZ=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},sZ=function(e){return lZ(e,23,4)},uZ=function(e){return lZ(e,52,8)},ZZ=function(e,t){Au(e.prototype,t,{get:function(){return zu(this)[t]}})},hZ=function(e,t,i,n){var l=Ju(i),o=zu(e);if(l+t>o.byteLength)throw tZ(Mu);var c=zu(o.buffer).bytes,a=l+o.byteOffset,r=Bu(c,a,a+t);return n?r:nZ(r)},bZ=function(e,t,i,n,l,o){var c=Ju(i),a=zu(e);if(c+t>a.byteLength)throw tZ(Mu);for(var r=zu(a.buffer).bytes,d=c+a.byteOffset,s=n(+l),u=0;u<t;u++)r[d+u]=s[o?u:t-u-1]};if(Cu){var mZ=wu&&Eu.name!==Qu;if(fu((function(){Eu(1)}))&&fu((function(){new Eu(-1)}))&&!fu((function(){return new Eu,new Eu(1.5),new Eu(NaN),mZ&&!xu})))mZ&&xu&&Su(Eu,"name",Qu);else{(Du=function(e){return Yu(this,Ou),new Eu(Ju(e))}).prototype=Ou;for(var pZ,IZ=Hu(Eu),gZ=0;IZ.length>gZ;)(pZ=IZ[gZ++])in Du||Su(Du,pZ,Eu[pZ]);Ou.constructor=Du}Uu&&ku(qu)!==$u&&Uu(qu,$u);var GZ=new _u(new Du(2)),yZ=Vu(qu.setInt8);GZ.setInt8(0,2147483648),GZ.setInt8(1,2147483649),!GZ.getInt8(0)&&GZ.getInt8(1)||vu(qu,{setInt8:function(e,t){yZ(this,e,t<<24>>24)},setUint8:function(e,t){yZ(this,e,t<<24>>24)}},{unsafe:!0})}else Du=function(e){Yu(this,Ou);var t=Ju(e);Pu(this,{bytes:iZ(eZ(t),0),byteLength:t}),Wu||(this.byteLength=t)},Ou=Du.prototype,_u=function(e,t,i){Yu(this,qu),Yu(e,Ou);var n=zu(e).byteLength,l=Ku(t);if(l<0||l>n)throw tZ("Wrong offset");if(l+(i=void 0===i?n-l:Nu(i))>n)throw tZ("Wrong length");Pu(this,{buffer:e,byteLength:i,byteOffset:l}),Wu||(this.buffer=e,this.byteLength=i,this.byteOffset=l)},qu=_u.prototype,Wu&&(ZZ(Du,"byteLength"),ZZ(_u,"buffer"),ZZ(_u,"byteLength"),ZZ(_u,"byteOffset")),vu(qu,{getInt8:function(e){return hZ(this,1,e)[0]<<24>>24},getUint8:function(e){return hZ(this,1,e)[0]},getInt16:function(e){var t=hZ(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=hZ(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return dZ(hZ(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return dZ(hZ(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return oZ(hZ(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return oZ(hZ(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){bZ(this,1,e,cZ,t)},setUint8:function(e,t){bZ(this,1,e,cZ,t)},setInt16:function(e,t){bZ(this,2,e,aZ,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){bZ(this,2,e,aZ,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){bZ(this,4,e,rZ,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){bZ(this,4,e,rZ,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){bZ(this,4,e,sZ,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){bZ(this,8,e,uZ,t,arguments.length>2?arguments[2]:void 0)}});Fu(Du,Qu),Fu(_u,ju);var XZ={ArrayBuffer:Du,DataView:_u},VZ=Ie,WZ=Math.floor,CZ=Number.isInteger||function(e){return!VZ(e)&&isFinite(e)&&WZ(e)===e},RZ=dn,SZ=RangeError,vZ=function(e){var t=RZ(e);if(t<0)throw SZ("The argument can't be less than 0");return t},fZ=RangeError,YZ=function(e,t){var i=vZ(e);if(i%t)throw fZ("Wrong offset");return i},KZ=Ql,NZ=Ne,JZ=lc,LZ=G,kZ=gn,UZ=Io,HZ=so,AZ=Ol,TZ=As.aTypedArrayConstructor,BZ=function(e){var t,i,n,l,o,c,a=JZ(this),r=LZ(e),d=arguments.length,s=d>1?arguments[1]:void 0,u=void 0!==s,Z=HZ(r);if(Z&&!AZ(Z))for(c=(o=UZ(r,Z)).next,r=[];!(l=NZ(c,o)).done;)r.push(l.value);for(u&&d>2&&(s=KZ(s,arguments[2])),i=kZ(r),n=new(TZ(a))(i),t=0;i>t;t++)n[t]=u?s(r[t],t):r[t];return n},FZ=Jt,wZ=Array.isArray||function(e){return"Array"==FZ(e)},xZ=ec,zZ=Ie,PZ=Ze("species"),QZ=Array,jZ=function(e){var t;return wZ(e)&&(t=e.constructor,(xZ(t)&&(t===QZ||wZ(t.prototype))||zZ(t)&&null===(t=t[PZ]))&&(t=void 0)),void 0===t?QZ:t},MZ=Ql,EZ=At,DZ=G,OZ=gn,_Z=function(e,t){return new(jZ(e))(0===t?0:t)},qZ=b([].push),$Z=function(e){var t=1==e,i=2==e,n=3==e,l=4==e,o=6==e,c=7==e,a=5==e||o;return function(r,d,s,u){for(var Z,h,b=DZ(r),m=EZ(b),p=MZ(d,s),I=OZ(m),g=0,G=u||_Z,y=t?G(r,I):i||c?G(r,0):void 0;I>g;g++)if((a||g in m)&&(h=p(Z=m[g],g,b),e))if(t)y[g]=h;else if(h)switch(e){case 3:return!0;case 5:return Z;case 6:return g;case 2:qZ(y,Z)}else switch(e){case 4:return!1;case 7:qZ(y,Z)}return o?-1:n||l?l:y}},eh={forEach:$Z(0),map:$Z(1),filter:$Z(2),some:$Z(3),every:$Z(4),find:$Z(5),findIndex:$Z(6),filterReject:$Z(7)},th=z,ih=be,nh=me,lh=Ze("species"),oh=B,ch=Ie,ah=ts,rh=cl,dh=o,sh=Ne,uh=me,Zh=Ps,hh=As,bh=XZ,mh=Ds,ph=ft,Ih=qt,gh=CZ,Gh=pn,yh=$s,Xh=YZ,Vh=ct,Wh=V,Ch=lo,Rh=Ie,Sh=Ae,vh=Kl,fh=Je,Yh=ts,Kh=ln.f,Nh=BZ,Jh=eh.forEach,Lh=function(e){var t=th(e),i=ih.f;nh&&t&&!t[lh]&&i(t,lh,{configurable:!0,get:function(){return this}})},kh=be,Uh=Wt,Hh=function(e,t,i){var n,l;return ah&&oh(n=t.constructor)&&n!==i&&ch(l=n.prototype)&&l!==i.prototype&&ah(e,l),e},Ah=Bi.get,Th=Bi.set,Bh=Bi.enforce,Fh=kh.f,wh=Uh.f,xh=Math.round,zh=dh.RangeError,Ph=bh.ArrayBuffer,Qh=Ph.prototype,jh=bh.DataView,Mh=hh.NATIVE_ARRAY_BUFFER_VIEWS,Eh=hh.TYPED_ARRAY_TAG,Dh=hh.TypedArray,Oh=hh.TypedArrayPrototype,_h=hh.aTypedArrayConstructor,qh=hh.isTypedArray,$h="BYTES_PER_ELEMENT",eb="Wrong length",tb=function(e,t){_h(e);for(var i=0,n=t.length,l=new e(n);n>i;)l[i]=t[i++];return l},ib=function(e,t){Fh(e,t,{get:function(){return Ah(this)[t]}})},nb=function(e){var t;return fh(Qh,e)||"ArrayBuffer"==(t=Ch(e))||"SharedArrayBuffer"==t},lb=function(e,t){return qh(e)&&!Sh(t)&&t in e&&gh(+t)&&t>=0},ob=function(e,t){return t=Vh(t),lb(e,t)?ph(2,e[t]):wh(e,t)},cb=function(e,t,i){return t=Vh(t),!(lb(e,t)&&Rh(i)&&Wh(i,"value"))||Wh(i,"get")||Wh(i,"set")||i.configurable||Wh(i,"writable")&&!i.writable||Wh(i,"enumerable")&&!i.enumerable?Fh(e,t,i):(e[t]=i.value,e)};uh?(Mh||(Uh.f=ob,kh.f=cb,ib(Oh,"buffer"),ib(Oh,"byteOffset"),ib(Oh,"byteLength"),ib(Oh,"length")),rh({target:"Object",stat:!0,forced:!Mh},{getOwnPropertyDescriptor:ob,defineProperty:cb}),Fd.exports=function(e,t,i){var n=e.match(/\d+$/)[0]/8,l=e+(i?"Clamped":"")+"Array",o="get"+e,c="set"+e,a=dh[l],r=a,d=r&&r.prototype,s={},u=function(e,t){Fh(e,t,{get:function(){return function(e,t){var i=Ah(e);return i.view[o](t*n+i.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,l){var o=Ah(e);i&&(l=(l=xh(l))<0?0:l>255?255:255&l),o.view[c](t*n+o.byteOffset,l,!0)}(this,t,e)},enumerable:!0})};Mh?Zh&&(r=t((function(e,t,i,l){return mh(e,d),Hh(Rh(t)?nb(t)?void 0!==l?new a(t,Xh(i,n),l):void 0!==i?new a(t,Xh(i,n)):new a(t):qh(t)?tb(r,t):sh(Nh,r,t):new a(yh(t)),e,r)})),Yh&&Yh(r,Dh),Jh(Kh(a),(function(e){e in r||Ih(r,e,a[e])})),r.prototype=d):(r=t((function(e,t,i,l){mh(e,d);var o,c,a,s=0,Z=0;if(Rh(t)){if(!nb(t))return qh(t)?tb(r,t):sh(Nh,r,t);o=t,Z=Xh(i,n);var h=t.byteLength;if(void 0===l){if(h%n)throw zh(eb);if((c=h-Z)<0)throw zh(eb)}else if((c=Gh(l)*n)+Z>h)throw zh(eb);a=c/n}else a=yh(t),o=new Ph(c=a*n);for(Th(e,{buffer:o,byteOffset:Z,byteLength:c,length:a,view:new jh(o)});s<a;)u(e,s++)})),Yh&&Yh(r,Dh),d=r.prototype=vh(Oh)),d.constructor!==r&&Ih(d,"constructor",r),Bh(d).TypedArrayConstructor=r,Eh&&Ih(d,Eh,l);var Z=r!=a;s[l]=r,rh({global:!0,constructor:!0,forced:Z,sham:!Mh},s),$h in r||Ih(r,$h,n),$h in d||Ih(d,$h,n),Lh(l)}):Fd.exports=function(){},(0,Fd.exports)("Float32",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,Fd.exports)("Float64",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,Fd.exports)("Int8",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,Fd.exports)("Int16",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,Fd.exports)("Int32",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,Fd.exports)("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,Fd.exports)("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}}),!0),(0,Fd.exports)("Uint16",(function(e){return function(t,i,n){return e(this,t,i,n)}})),(0,Fd.exports)("Uint32",(function(e){return function(t,i,n){return e(this,t,i,n)}}));var ab=nt,rb=TypeError,db=su,sb=function(e){var t=ab(e,"number");if("number"==typeof t)throw rb("Can't convert number to bigint");return BigInt(t)},ub=lo,Zb=Ne,hb=a,bb=As.aTypedArray,mb=As.exportTypedArrayMethod,pb=b("".slice);mb("fill",(function(e){var t=arguments.length;bb(this);var i="Big"===pb(ub(this),0,3)?sb(e):+e;return Zb(db,this,i,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),hb((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}))),(0,As.exportTypedArrayStaticMethod)("from",BZ,Ps);var Ib=As.aTypedArrayConstructor;(0,As.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,i=new(Ib(this))(t);t>e;)i[e]=arguments[e++];return i}),Ps);var gb=o,Gb=Ne,yb=As,Xb=gn,Vb=YZ,Wb=G,Cb=a,Rb=gb.RangeError,Sb=gb.Int8Array,vb=Sb&&Sb.prototype,fb=vb&&vb.set,Yb=yb.aTypedArray,Kb=yb.exportTypedArrayMethod,Nb=!Cb((function(){var e=new Uint8ClampedArray(2);return Gb(fb,e,{length:1,0:3},1),3!==e[1]})),Jb=Nb&&yb.NATIVE_ARRAY_BUFFER_VIEWS&&Cb((function(){var e=new Sb(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));Kb("set",(function(e){Yb(this);var t=Vb(arguments.length>1?arguments[1]:void 0,1),i=Wb(e);if(Nb)return Gb(fb,this,i,t);var n=this.length,l=Xb(i),o=0;if(l+t>n)throw Rb("Wrong length");for(;o<l;)this[t+o]=i[o++]}),!Nb||Jb);var Lb=yu,kb=Math.floor,Ub=function(e,t){var i=e.length,n=kb(i/2);return i<8?Hb(e,t):Ab(e,Ub(Lb(e,0,n),t),Ub(Lb(e,n),t),t)},Hb=function(e,t){for(var i,n,l=e.length,o=1;o<l;){for(n=o,i=e[o];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==o++&&(e[n]=i)}return e},Ab=function(e,t,i,n){for(var l=t.length,o=i.length,c=0,a=0;c<l||a<o;)e[c+a]=c<l&&a<o?n(t[c],i[a])<=0?t[c++]:i[a++]:c<l?t[c++]:i[a++];return e},Tb=Ub,Bb=P.match(/firefox\/(\d+)/i),Fb=!!Bb&&+Bb[1],wb=/MSIE|Trident/.test(P),xb=P.match(/AppleWebKit\/(\d+)\./),zb=!!xb&&+xb[1],Pb=b,Qb=a,jb=ze,Mb=Tb,Eb=Fb,Db=wb,Ob=_,_b=zb,qb=As.aTypedArray,$b=As.exportTypedArrayMethod,em=o.Uint16Array,tm=em&&Pb(em.prototype.sort),im=!(!tm||Qb((function(){tm(new em(2),null)}))&&Qb((function(){tm(new em(2),{})}))),nm=!!tm&&!Qb((function(){if(Ob)return Ob<74;if(Eb)return Eb<67;if(Db)return!0;if(_b)return _b<602;var e,t,i=new em(516),n=Array(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,n[e]=e-2*t+3;for(tm(i,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(i[e]!==n[e])return!0}));$b("sort",(function(e){return void 0!==e&&jb(e),nm?tm(this,e):Mb(qb(this),function(e){return function(t,i){return void 0!==e?+e(t,i)||0:i!=i?-1:t!=t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i}}(e))}),!nm||im);var lm=Xe("span").classList,om=lm&&lm.constructor&&lm.constructor.prototype,cm=om===Object.prototype?void 0:om,am=cl,rm=Ne,dm=B,sm=Za,um=Qc,Zm=ts,hm=oa,bm=qt,mm=nn,pm=jl,Im=oi.PROPER,gm=oi.CONFIGURABLE,Gm=ta.IteratorPrototype,ym=ta.BUGGY_SAFARI_ITERATORS,Xm=Ze("iterator"),Vm="keys",Wm="values",Cm="entries",Rm=function(){return this},Sm=function(e,t,i,n,l,o,c){sm(i,t,n);var a,r,d,s=function(e){if(e===l&&m)return m;if(!ym&&e in h)return h[e];switch(e){case Vm:case Wm:case Cm:return function(){return new i(this,e)}}return function(){return new i(this)}},u=t+" Iterator",Z=!1,h=e.prototype,b=h[Xm]||h["@@iterator"]||l&&h[l],m=!ym&&b||s(l),p="Array"==t&&h.entries||b;if(p&&(a=um(p.call(new e)))!==Object.prototype&&a.next&&(um(a)!==Gm&&(Zm?Zm(a,Gm):dm(a[Xm])||mm(a,Xm,Rm)),hm(a,u,!0)),Im&&l==Wm&&b&&b.name!==Wm&&(gm?bm(h,"name",Wm):(Z=!0,m=function(){return rm(b,this)})),l)if(r={values:s(Wm),keys:o?m:s(Vm),entries:s(Cm)},c)for(d in r)(ym||Z||!(d in h))&&mm(h,d,r[d]);else am({target:t,proto:!0,forced:ym||Z},r);return h[Xm]!==m&&mm(h,Xm,m,{name:l}),pm[t]=m,r},vm=Ft,fm=Hl,Ym=jl,Km=Bi,Nm=be.f,Jm=Sm,Lm=me,km="Array Iterator",Um=Km.set,Hm=Km.getterFor(km),Am=Jm(Array,"Array",(function(e,t){Um(this,{type:km,target:vm(e),index:0,kind:t})}),(function(){var e=Hm(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),Tm=Ym.Arguments=Ym.Array;if(fm("keys"),fm("values"),fm("entries"),Lm&&"values"!==Tm.name)try{Nm(Tm,"name",{value:"values"})}catch(e){}var Bm=o,Fm={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},wm=cm,xm=Am,zm=qt,Pm=Ze,Qm=Pm("iterator"),jm=Pm("toStringTag"),Mm=xm.values,Em=function(e,t){if(e){if(e[Qm]!==Mm)try{zm(e,Qm,Mm)}catch(t){e[Qm]=Mm}if(e[jm]||zm(e,jm,t),Fm[t])for(var i in xm)if(e[i]!==xm[i])try{zm(e,i,xm[i])}catch(t){e[i]=xm[i]}}};for(var Dm in Fm)Em(Bm[Dm]&&Bm[Dm].prototype,Dm);Em(wm,"DOMTokenList");var Om,_m,qm,$m,ep=b([].slice),tp=TypeError,ip=function(e,t){if(e<t)throw tp("Not enough arguments");return e},np=/(?:ipad|iphone|ipod).*applewebkit/i.test(P),lp="process"==Jt(o.process),op=o,cp=$r,ap=Ql,rp=B,dp=V,sp=a,up=gl,Zp=ep,hp=Xe,bp=ip,mp=np,pp=lp,Ip=op.setImmediate,gp=op.clearImmediate,Gp=op.process,yp=op.Dispatch,Xp=op.Function,Vp=op.MessageChannel,Wp=op.String,Cp=0,Rp={},Sp="onreadystatechange";try{Om=op.location}catch(e){}var vp=function(e){if(dp(Rp,e)){var t=Rp[e];delete Rp[e],t()}},fp=function(e){return function(){vp(e)}},Yp=function(e){vp(e.data)},Kp=function(e){op.postMessage(Wp(e),Om.protocol+"//"+Om.host)};Ip&&gp||(Ip=function(e){bp(arguments.length,1);var t=rp(e)?e:Xp(e),i=Zp(arguments,1);return Rp[++Cp]=function(){cp(t,void 0,i)},_m(Cp),Cp},gp=function(e){delete Rp[e]},pp?_m=function(e){Gp.nextTick(fp(e))}:yp&&yp.now?_m=function(e){yp.now(fp(e))}:Vp&&!mp?($m=(qm=new Vp).port2,qm.port1.onmessage=Yp,_m=ap($m.postMessage,$m)):op.addEventListener&&rp(op.postMessage)&&!op.importScripts&&Om&&"file:"!==Om.protocol&&!sp(Kp)?(_m=Kp,op.addEventListener("message",Yp,!1)):_m=Sp in hp("script")?function(e){up.appendChild(hp("script")).onreadystatechange=function(){up.removeChild(this),vp(e)}}:function(e){setTimeout(fp(e),0)});var Np={set:Ip,clear:gp},Jp=Np.clear;cl({global:!0,bind:!0,enumerable:!0,forced:o.clearImmediate!==Jp},{clearImmediate:Jp});var Lp=Np.set;cl({global:!0,bind:!0,enumerable:!0,forced:o.setImmediate!==Lp},{setImmediate:Lp});var kp=Ja.charAt,Up=ma,Hp=Bi,Ap=Sm,Tp="String Iterator",Bp=Hp.set,Fp=Hp.getterFor(Tp);Ap(String,"String",(function(e){Bp(this,{type:Tp,string:Up(e),index:0})}),(function(){var e,t=Fp(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=kp(i,n),t.index+=e.length,{value:e,done:!1})}));var wp=a,xp=Ze("iterator"),zp=!wp((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),i+=n+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[xp]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host})),Pp=me,Qp=b,jp=Ne,Mp=a,Ep=sl,Dp=Ln,Op=Ct,_p=G,qp=At,$p=Object.assign,eI=Object.defineProperty,tI=Qp([].concat),iI=!$p||Mp((function(){if(Pp&&1!==$p({b:1},$p(eI({},"a",{enumerable:!0,get:function(){eI(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach((function(e){t[e]=e})),7!=$p({},e)[i]||Ep($p({},t)).join("")!=n}))?function(e,t){for(var i=_p(e),n=arguments.length,l=1,o=Dp.f,c=Op.f;n>l;)for(var a,r=qp(arguments[l++]),d=o?tI(Ep(r),o(r)):Ep(r),s=d.length,u=0;s>u;)a=d[u++],Pp&&!jp(c,r,a)||(i[a]=r[a]);return i}:$p,nI=fe,lI=Xo,oI=Ql,cI=Ne,aI=G,rI=function(e,t,i,n){try{return n?t(nI(i)[0],i[1]):t(i)}catch(t){lI(e,"throw",t)}},dI=Ol,sI=ec,uI=gn,ZI=bu,hI=Io,bI=so,mI=Array,pI=b,II=2147483647,gI=/[^\0-\u007E]/,GI=/[.\u3002\uFF0E\uFF61]/g,yI="Overflow: input needs wider integers to process",XI=RangeError,VI=pI(GI.exec),WI=Math.floor,CI=String.fromCharCode,RI=pI("".charCodeAt),SI=pI([].join),vI=pI([].push),fI=pI("".replace),YI=pI("".split),KI=pI("".toLowerCase),NI=function(e){return e+22+75*(e<26)},JI=function(e,t,i){var n=0;for(e=i?WI(e/700):e>>1,e+=WI(e/t);e>455;)e=WI(e/35),n+=36;return WI(n+36*e/(e+38))},LI=function(e){var t=[];e=function(e){for(var t=[],i=0,n=e.length;i<n;){var l=RI(e,i++);if(l>=55296&&l<=56319&&i<n){var o=RI(e,i++);56320==(64512&o)?vI(t,((1023&l)<<10)+(1023&o)+65536):(vI(t,l),i--)}else vI(t,l)}return t}(e);var i,n,l=e.length,o=128,c=0,a=72;for(i=0;i<e.length;i++)(n=e[i])<128&&vI(t,CI(n));var r=t.length,d=r;for(r&&vI(t,"-");d<l;){var s=II;for(i=0;i<e.length;i++)(n=e[i])>=o&&n<s&&(s=n);var u=d+1;if(s-o>WI((II-c)/u))throw XI(yI);for(c+=(s-o)*u,o=s,i=0;i<e.length;i++){if((n=e[i])<o&&++c>II)throw XI(yI);if(n==o){for(var Z=c,h=36;;){var b=h<=a?1:h>=a+26?26:h-a;if(Z<b)break;var m=Z-b,p=36-b;vI(t,CI(NI(b+m%p))),Z=WI(m/p),h+=36}vI(t,CI(NI(Z))),a=JI(c,u,d==r),c=0,d++}}c++,o++}return SI(t,"")},kI=cl,UI=o,HI=Ne,AI=b,TI=me,BI=zp,FI=nn,wI=js,xI=oa,zI=Za,PI=Bi,QI=Ds,jI=B,MI=V,EI=Ql,DI=lo,OI=fe,_I=Ie,qI=ma,$I=Kl,eg=ft,tg=Io,ig=so,ng=ip,lg=Tb,og=Ze("iterator"),cg="URLSearchParams",ag="URLSearchParamsIterator",rg=PI.set,dg=PI.getterFor(cg),sg=PI.getterFor(ag),ug=Object.getOwnPropertyDescriptor,Zg=function(e){if(!TI)return UI[e];var t=ug(UI,e);return t&&t.value},hg=Zg("fetch"),bg=Zg("Request"),mg=Zg("Headers"),pg=bg&&bg.prototype,Ig=mg&&mg.prototype,gg=UI.RegExp,Gg=UI.TypeError,yg=UI.decodeURIComponent,Xg=UI.encodeURIComponent,Vg=AI("".charAt),Wg=AI([].join),Cg=AI([].push),Rg=AI("".replace),Sg=AI([].shift),vg=AI([].splice),fg=AI("".split),Yg=AI("".slice),Kg=/\+/g,Ng=Array(4),Jg=function(e){return Ng[e-1]||(Ng[e-1]=gg("((?:%[\\da-f]{2}){"+e+"})","gi"))},Lg=function(e){try{return yg(e)}catch(t){return e}},kg=function(e){var t=Rg(e,Kg," "),i=4;try{return yg(t)}catch(e){for(;i;)t=Rg(t,Jg(i--),Lg);return t}},Ug=/[!'()~]|%20/g,Hg={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ag=function(e){return Hg[e]},Tg=function(e){return Rg(Xg(e),Ug,Ag)},Bg=zI((function(e,t){rg(this,{type:ag,iterator:tg(dg(e).entries),kind:t})}),"Iterator",(function(){var e=sg(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),i}),!0),Fg=function(e){this.entries=[],this.url=null,void 0!==e&&(_I(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Vg(e,0)?Yg(e,1):e:qI(e)))};Fg.prototype={type:cg,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,i,n,l,o,c,a,r=ig(e);if(r)for(i=(t=tg(e,r)).next;!(n=HI(i,t)).done;){if(o=(l=tg(OI(n.value))).next,(c=HI(o,l)).done||(a=HI(o,l)).done||!HI(o,l).done)throw Gg("Expected sequence with length 2");Cg(this.entries,{key:qI(c.value),value:qI(a.value)})}else for(var d in e)MI(e,d)&&Cg(this.entries,{key:d,value:qI(e[d])})},parseQuery:function(e){if(e)for(var t,i,n=fg(e,"&"),l=0;l<n.length;)(t=n[l++]).length&&(i=fg(t,"="),Cg(this.entries,{key:kg(Sg(i)),value:kg(Wg(i,"="))}))},serialize:function(){for(var e,t=this.entries,i=[],n=0;n<t.length;)e=t[n++],Cg(i,Tg(e.key)+"="+Tg(e.value));return Wg(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var wg=function(){QI(this,xg);var e=arguments.length>0?arguments[0]:void 0;rg(this,new Fg(e))},xg=wg.prototype;if(wI(xg,{append:function(e,t){ng(arguments.length,2);var i=dg(this);Cg(i.entries,{key:qI(e),value:qI(t)}),i.updateURL()},delete:function(e){ng(arguments.length,1);for(var t=dg(this),i=t.entries,n=qI(e),l=0;l<i.length;)i[l].key===n?vg(i,l,1):l++;t.updateURL()},get:function(e){ng(arguments.length,1);for(var t=dg(this).entries,i=qI(e),n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){ng(arguments.length,1);for(var t=dg(this).entries,i=qI(e),n=[],l=0;l<t.length;l++)t[l].key===i&&Cg(n,t[l].value);return n},has:function(e){ng(arguments.length,1);for(var t=dg(this).entries,i=qI(e),n=0;n<t.length;)if(t[n++].key===i)return!0;return!1},set:function(e,t){ng(arguments.length,1);for(var i,n=dg(this),l=n.entries,o=!1,c=qI(e),a=qI(t),r=0;r<l.length;r++)(i=l[r]).key===c&&(o?vg(l,r--,1):(o=!0,i.value=a));o||Cg(l,{key:c,value:a}),n.updateURL()},sort:function(){var e=dg(this);lg(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,i=dg(this).entries,n=EI(e,arguments.length>1?arguments[1]:void 0),l=0;l<i.length;)n((t=i[l++]).value,t.key,this)},keys:function(){return new Bg(this,"keys")},values:function(){return new Bg(this,"values")},entries:function(){return new Bg(this,"entries")}},{enumerable:!0}),FI(xg,og,xg.entries,{name:"entries"}),FI(xg,"toString",(function(){return dg(this).serialize()}),{enumerable:!0}),xI(wg,cg),kI({global:!0,constructor:!0,forced:!BI},{URLSearchParams:wg}),!BI&&jI(mg)){var zg=AI(Ig.has),Pg=AI(Ig.set),Qg=function(e){if(_I(e)){var t,i=e.body;if(DI(i)===cg)return t=e.headers?new mg(e.headers):new mg,zg(t,"content-type")||Pg(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),$I(e,{body:eg(0,qI(i)),headers:eg(0,t)})}return e};if(jI(hg)&&kI({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return hg(e,arguments.length>1?Qg(arguments[1]):{})}}),jI(bg)){var jg=function(e){return QI(this,pg),new bg(e,arguments.length>1?Qg(arguments[1]):{})};pg.constructor=jg,jg.prototype=pg,kI({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:jg})}}var Mg,Eg=cl,Dg=me,Og=zp,_g=o,qg=Ql,$g=b,eG=nn,tG=Cc,iG=Ds,nG=V,lG=iI,oG=function(e){var t=aI(e),i=sI(this),n=arguments.length,l=n>1?arguments[1]:void 0,o=void 0!==l;o&&(l=oI(l,n>2?arguments[2]:void 0));var c,a,r,d,s,u,Z=bI(t),h=0;if(!Z||this===mI&&dI(Z))for(c=uI(t),a=i?new this(c):mI(c);c>h;h++)u=o?l(t[h],h):t[h],ZI(a,h,u);else for(s=(d=hI(t,Z)).next,a=i?new this:[];!(r=cI(s,d)).done;h++)u=o?rI(d,l,[r.value,h],!0):r.value,ZI(a,h,u);return a.length=h,a},cG=yu,aG=Ja.codeAt,rG=function(e){var t,i,n=[],l=YI(fI(KI(e),GI,"."),".");for(t=0;t<l.length;t++)i=l[t],vI(n,VI(gI,i)?"xn--"+LI(i):i);return SI(n,".")},dG=ma,sG=oa,uG=ip,ZG={URLSearchParams:wg,getState:dg},hG=Bi,bG=hG.set,mG=hG.getterFor("URL"),pG=ZG.URLSearchParams,IG=ZG.getState,gG=_g.URL,GG=_g.TypeError,yG=_g.parseInt,XG=Math.floor,VG=Math.pow,WG=$g("".charAt),CG=$g(/./.exec),RG=$g([].join),SG=$g(1..toString),vG=$g([].pop),fG=$g([].push),YG=$g("".replace),KG=$g([].shift),NG=$g("".split),JG=$g("".slice),LG=$g("".toLowerCase),kG=$g([].unshift),UG="Invalid scheme",HG="Invalid host",AG="Invalid port",TG=/[a-z]/i,BG=/[\d+-.a-z]/i,FG=/\d/,wG=/^0x/i,xG=/^[0-7]+$/,zG=/^\d+$/,PG=/^[\da-f]+$/i,QG=/[\0\t\n\r #%/:<>?@[\\\]^|]/,jG=/[\0\t\n\r #/:<>?@[\\\]^|]/,MG=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,EG=/[\t\n\r]/g,DG=function(e){var t,i,n,l;if("number"==typeof e){for(t=[],i=0;i<4;i++)kG(t,e%256),e=XG(e/256);return RG(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,i=1,n=null,l=0,o=0;o<8;o++)0!==e[o]?(l>i&&(t=n,i=l),n=null,l=0):(null===n&&(n=o),++l);return l>i&&(t=n,i=l),t}(e),i=0;i<8;i++)l&&0===e[i]||(l&&(l=!1),n===i?(t+=i?":":"::",l=!0):(t+=SG(e[i],16),i<7&&(t+=":")));return"["+t+"]"}return e},OG={},_G=lG({},OG,{" ":1,'"':1,"<":1,">":1,"`":1}),qG=lG({},_G,{"#":1,"?":1,"{":1,"}":1}),$G=lG({},qG,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ey=function(e,t){var i=aG(e,0);return i>32&&i<127&&!nG(t,e)?e:encodeURIComponent(e)},ty={ftp:21,file:null,http:80,https:443,ws:80,wss:443},iy=function(e,t){var i;return 2==e.length&&CG(TG,WG(e,0))&&(":"==(i=WG(e,1))||!t&&"|"==i)},ny=function(e){var t;return e.length>1&&iy(JG(e,0,2))&&(2==e.length||"/"===(t=WG(e,2))||"\\"===t||"?"===t||"#"===t)},ly=function(e){return"."===e||"%2e"===LG(e)},oy={},cy={},ay={},ry={},dy={},sy={},uy={},Zy={},hy={},by={},my={},py={},Iy={},gy={},Gy={},yy={},Xy={},Vy={},Wy={},Cy={},Ry={},Sy=function(e,t,i){var n,l,o,c=dG(e);if(t){if(l=this.parse(c))throw GG(l);this.searchParams=null}else{if(void 0!==i&&(n=new Sy(i,!0)),l=this.parse(c,null,n))throw GG(l);(o=IG(new pG)).bindURL(this),this.searchParams=o}};Sy.prototype={type:"URL",parse:function(e,t,i){var n,l,o,c,a,r=this,d=t||oy,s=0,u="",Z=!1,h=!1,b=!1;for(e=dG(e),t||(r.scheme="",r.username="",r.password="",r.host=null,r.port=null,r.path=[],r.query=null,r.fragment=null,r.cannotBeABaseURL=!1,e=YG(e,MG,"")),e=YG(e,EG,""),n=oG(e);s<=n.length;){switch(l=n[s],d){case oy:if(!l||!CG(TG,l)){if(t)return UG;d=ay;continue}u+=LG(l),d=cy;break;case cy:if(l&&(CG(BG,l)||"+"==l||"-"==l||"."==l))u+=LG(l);else{if(":"!=l){if(t)return UG;u="",d=ay,s=0;continue}if(t&&(r.isSpecial()!=nG(ty,u)||"file"==u&&(r.includesCredentials()||null!==r.port)||"file"==r.scheme&&!r.host))return;if(r.scheme=u,t)return void(r.isSpecial()&&ty[r.scheme]==r.port&&(r.port=null));u="","file"==r.scheme?d=gy:r.isSpecial()&&i&&i.scheme==r.scheme?d=ry:r.isSpecial()?d=Zy:"/"==n[s+1]?(d=dy,s++):(r.cannotBeABaseURL=!0,fG(r.path,""),d=Wy)}break;case ay:if(!i||i.cannotBeABaseURL&&"#"!=l)return UG;if(i.cannotBeABaseURL&&"#"==l){r.scheme=i.scheme,r.path=cG(i.path),r.query=i.query,r.fragment="",r.cannotBeABaseURL=!0,d=Ry;break}d="file"==i.scheme?gy:sy;continue;case ry:if("/"!=l||"/"!=n[s+1]){d=sy;continue}d=hy,s++;break;case dy:if("/"==l){d=by;break}d=Vy;continue;case sy:if(r.scheme=i.scheme,l==Mg)r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=cG(i.path),r.query=i.query;else if("/"==l||"\\"==l&&r.isSpecial())d=uy;else if("?"==l)r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=cG(i.path),r.query="",d=Cy;else{if("#"!=l){r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=cG(i.path),r.path.length--,d=Vy;continue}r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,r.path=cG(i.path),r.query=i.query,r.fragment="",d=Ry}break;case uy:if(!r.isSpecial()||"/"!=l&&"\\"!=l){if("/"!=l){r.username=i.username,r.password=i.password,r.host=i.host,r.port=i.port,d=Vy;continue}d=by}else d=hy;break;case Zy:if(d=hy,"/"!=l||"/"!=WG(u,s+1))continue;s++;break;case hy:if("/"!=l&&"\\"!=l){d=by;continue}break;case by:if("@"==l){Z&&(u="%40"+u),Z=!0,o=oG(u);for(var m=0;m<o.length;m++){var p=o[m];if(":"!=p||b){var I=ey(p,$G);b?r.password+=I:r.username+=I}else b=!0}u=""}else if(l==Mg||"/"==l||"?"==l||"#"==l||"\\"==l&&r.isSpecial()){if(Z&&""==u)return"Invalid authority";s-=oG(u).length+1,u="",d=my}else u+=l;break;case my:case py:if(t&&"file"==r.scheme){d=yy;continue}if(":"!=l||h){if(l==Mg||"/"==l||"?"==l||"#"==l||"\\"==l&&r.isSpecial()){if(r.isSpecial()&&""==u)return HG;if(t&&""==u&&(r.includesCredentials()||null!==r.port))return;if(c=r.parseHost(u))return c;if(u="",d=Xy,t)return;continue}"["==l?h=!0:"]"==l&&(h=!1),u+=l}else{if(""==u)return HG;if(c=r.parseHost(u))return c;if(u="",d=Iy,t==py)return}break;case Iy:if(!CG(FG,l)){if(l==Mg||"/"==l||"?"==l||"#"==l||"\\"==l&&r.isSpecial()||t){if(""!=u){var g=yG(u,10);if(g>65535)return AG;r.port=r.isSpecial()&&g===ty[r.scheme]?null:g,u=""}if(t)return;d=Xy;continue}return AG}u+=l;break;case gy:if(r.scheme="file","/"==l||"\\"==l)d=Gy;else{if(!i||"file"!=i.scheme){d=Vy;continue}if(l==Mg)r.host=i.host,r.path=cG(i.path),r.query=i.query;else if("?"==l)r.host=i.host,r.path=cG(i.path),r.query="",d=Cy;else{if("#"!=l){ny(RG(cG(n,s),""))||(r.host=i.host,r.path=cG(i.path),r.shortenPath()),d=Vy;continue}r.host=i.host,r.path=cG(i.path),r.query=i.query,r.fragment="",d=Ry}}break;case Gy:if("/"==l||"\\"==l){d=yy;break}i&&"file"==i.scheme&&!ny(RG(cG(n,s),""))&&(iy(i.path[0],!0)?fG(r.path,i.path[0]):r.host=i.host),d=Vy;continue;case yy:if(l==Mg||"/"==l||"\\"==l||"?"==l||"#"==l){if(!t&&iy(u))d=Vy;else if(""==u){if(r.host="",t)return;d=Xy}else{if(c=r.parseHost(u))return c;if("localhost"==r.host&&(r.host=""),t)return;u="",d=Xy}continue}u+=l;break;case Xy:if(r.isSpecial()){if(d=Vy,"/"!=l&&"\\"!=l)continue}else if(t||"?"!=l)if(t||"#"!=l){if(l!=Mg&&(d=Vy,"/"!=l))continue}else r.fragment="",d=Ry;else r.query="",d=Cy;break;case Vy:if(l==Mg||"/"==l||"\\"==l&&r.isSpecial()||!t&&("?"==l||"#"==l)){if(".."===(a=LG(a=u))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(r.shortenPath(),"/"==l||"\\"==l&&r.isSpecial()||fG(r.path,"")):ly(u)?"/"==l||"\\"==l&&r.isSpecial()||fG(r.path,""):("file"==r.scheme&&!r.path.length&&iy(u)&&(r.host&&(r.host=""),u=WG(u,0)+":"),fG(r.path,u)),u="","file"==r.scheme&&(l==Mg||"?"==l||"#"==l))for(;r.path.length>1&&""===r.path[0];)KG(r.path);"?"==l?(r.query="",d=Cy):"#"==l&&(r.fragment="",d=Ry)}else u+=ey(l,qG);break;case Wy:"?"==l?(r.query="",d=Cy):"#"==l?(r.fragment="",d=Ry):l!=Mg&&(r.path[0]+=ey(l,OG));break;case Cy:t||"#"!=l?l!=Mg&&("'"==l&&r.isSpecial()?r.query+="%27":r.query+="#"==l?"%23":ey(l,OG)):(r.fragment="",d=Ry);break;case Ry:l!=Mg&&(r.fragment+=ey(l,_G))}s++}},parseHost:function(e){var t,i,n;if("["==WG(e,0)){if("]"!=WG(e,e.length-1))return HG;if(t=function(e){var t,i,n,l,o,c,a,r=[0,0,0,0,0,0,0,0],d=0,s=null,u=0,Z=function(){return WG(e,u)};if(":"==Z()){if(":"!=WG(e,1))return;u+=2,s=++d}for(;Z();){if(8==d)return;if(":"!=Z()){for(t=i=0;i<4&&CG(PG,Z());)t=16*t+yG(Z(),16),u++,i++;if("."==Z()){if(0==i)return;if(u-=i,d>6)return;for(n=0;Z();){if(l=null,n>0){if(!("."==Z()&&n<4))return;u++}if(!CG(FG,Z()))return;for(;CG(FG,Z());){if(o=yG(Z(),10),null===l)l=o;else{if(0==l)return;l=10*l+o}if(l>255)return;u++}r[d]=256*r[d]+l,2!=++n&&4!=n||d++}if(4!=n)return;break}if(":"==Z()){if(u++,!Z())return}else if(Z())return;r[d++]=t}else{if(null!==s)return;u++,s=++d}}if(null!==s)for(c=d-s,d=7;0!=d&&c>0;)a=r[d],r[d--]=r[s+c-1],r[s+--c]=a;else if(8!=d)return;return r}(JG(e,1,-1)),!t)return HG;this.host=t}else if(this.isSpecial()){if(e=rG(e),CG(QG,e))return HG;if(t=function(e){var t,i,n,l,o,c,a,r=NG(e,".");if(r.length&&""==r[r.length-1]&&r.length--,(t=r.length)>4)return e;for(i=[],n=0;n<t;n++){if(""==(l=r[n]))return e;if(o=10,l.length>1&&"0"==WG(l,0)&&(o=CG(wG,l)?16:8,l=JG(l,8==o?1:2)),""===l)c=0;else{if(!CG(10==o?zG:8==o?xG:PG,l))return e;c=yG(l,o)}fG(i,c)}for(n=0;n<t;n++)if(c=i[n],n==t-1){if(c>=VG(256,5-t))return null}else if(c>255)return null;for(a=vG(i),n=0;n<i.length;n++)a+=i[n]*VG(256,3-n);return a}(e),null===t)return HG;this.host=t}else{if(CG(jG,e))return HG;for(t="",i=oG(e),n=0;n<i.length;n++)t+=ey(i[n],OG);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return nG(ty,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&iy(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,i=e.username,n=e.password,l=e.host,o=e.port,c=e.path,a=e.query,r=e.fragment,d=t+":";return null!==l?(d+="//",e.includesCredentials()&&(d+=i+(n?":"+n:"")+"@"),d+=DG(l),null!==o&&(d+=":"+o)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?c[0]:c.length?"/"+RG(c,"/"):"",null!==a&&(d+="?"+a),null!==r&&(d+="#"+r),d},setHref:function(e){var t=this.parse(e);if(t)throw GG(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new vy(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+DG(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(dG(e)+":",oy)},getUsername:function(){return this.username},setUsername:function(e){var t=oG(dG(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<t.length;i++)this.username+=ey(t[i],$G)}},getPassword:function(){return this.password},setPassword:function(e){var t=oG(dG(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<t.length;i++)this.password+=ey(t[i],$G)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?DG(e):DG(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,my)},getHostname:function(){var e=this.host;return null===e?"":DG(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,py)},getPort:function(){var e=this.port;return null===e?"":dG(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=dG(e))?this.port=null:this.parse(e,Iy))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+RG(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Xy))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=dG(e))?this.query=null:("?"==WG(e,0)&&(e=JG(e,1)),this.query="",this.parse(e,Cy)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=dG(e))?("#"==WG(e,0)&&(e=JG(e,1)),this.fragment="",this.parse(e,Ry)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var vy=function(e){var t=iG(this,fy),i=uG(arguments.length,1)>1?arguments[1]:void 0,n=bG(t,new Sy(e,!1,i));Dg||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},fy=vy.prototype,Yy=function(e,t){return{get:function(){return mG(this)[e]()},set:t&&function(e){return mG(this)[t](e)},configurable:!0,enumerable:!0}};if(Dg&&(tG(fy,"href",Yy("serialize","setHref")),tG(fy,"origin",Yy("getOrigin")),tG(fy,"protocol",Yy("getProtocol","setProtocol")),tG(fy,"username",Yy("getUsername","setUsername")),tG(fy,"password",Yy("getPassword","setPassword")),tG(fy,"host",Yy("getHost","setHost")),tG(fy,"hostname",Yy("getHostname","setHostname")),tG(fy,"port",Yy("getPort","setPort")),tG(fy,"pathname",Yy("getPathname","setPathname")),tG(fy,"search",Yy("getSearch","setSearch")),tG(fy,"searchParams",Yy("getSearchParams")),tG(fy,"hash",Yy("getHash","setHash"))),eG(fy,"toJSON",(function(){return mG(this).serialize()}),{enumerable:!0}),eG(fy,"toString",(function(){return mG(this).serialize()}),{enumerable:!0}),gG){var Ky=gG.createObjectURL,Ny=gG.revokeObjectURL;Ky&&eG(vy,"createObjectURL",qg(Ky,gG)),Ny&&eG(vy,"revokeObjectURL",qg(Ny,gG))}sG(vy,"URL"),Eg({global:!0,constructor:!0,forced:!Og,sham:!Dg},{URL:vy});var Jy=Ne;function Ly(e,t,i,n){return new(i||(i=Promise))((function(l,o){function c(e){try{r(n.next(e))}catch(e){o(e)}}function a(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}r((n=n.apply(e,t||[])).next())}))}function ky(e,t,i,n){return new(i||(i=Promise))((function(l,o){function c(e){try{r(n.next(e))}catch(e){o(e)}}function a(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}r((n=n.apply(e,t||[])).next())}))}cl({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Jy(URL.prototype.toString,this)}}),e.ResponseMode=void 0,function(e){e.formPost="form_post",e.query="query",e.direct="direct"}(e.ResponseMode||(e.ResponseMode={}));e.Stores=void 0,function(e){e.ConfigData="config_data",e.OIDCProviderMetaData="oidc_provider_meta_data",e.SessionData="session_data",e.TemporaryData="temporary_data"}(e.Stores||(e.Stores={}));const Uy="refresh_token_timer",Hy=["RS256","RS512","RS384","PS256"],Ay="code",Ty="session_state",By="sign_out_url",Fy="sign_out_success",wy="state";var xy;!function(e){e.Include="include",e.SameOrigin="same-origin",e.Omit="omit"}(xy||(xy={}));class zy{constructor(e,t,i){this.message=i,this.name=t,this.code=e,Object.setPrototypeOf(this,new.target.prototype)}}class Py{constructor(){}static filterClaimsFromIDTokenPayload(e){const t=Object.assign({},e);null==t||delete t.iss,null==t||delete t.aud,null==t||delete t.exp,null==t||delete t.iat,null==t||delete t.acr,null==t||delete t.amr,null==t||delete t.azp,null==t||delete t.auth_time,null==t||delete t.nonce,null==t||delete t.c_hash,null==t||delete t.at_hash,null==t||delete t.nbf,null==t||delete t.isk,null==t||delete t.sid;const i={};return Object.entries(t).forEach((e=>{let[t,n]=e;const l=t.split("_").map(((e,t)=>0===t?e:[e[0].toUpperCase(),...e.slice(1)].join(""))).join("");i[l]=n})),i}static getTokenRequestHeaders(){return{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}static generateStateParamForRequestCorrelation(e,t){const i=parseInt(e.split("#")[1]);return t?"".concat(t,"_request_").concat(i):"request_".concat(i)}static extractPKCEKeyFromStateParam(e){return"pkce_code_verifier#".concat(parseInt(e.split("request_")[1]))}}Py.getTenantDomainFromIdTokenPayload=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@";const i=e.sub.split(t);return i.length>2?i[i.length-1]:""};class Qy{constructor(e,t){this._dataLayer=e,this._config=()=>ky(this,void 0,void 0,(function*(){return yield this._dataLayer.getConfigData()})),this._oidcProviderMetaData=()=>ky(this,void 0,void 0,(function*(){return yield this._dataLayer.getOIDCProviderMetaData()})),this._cryptoHelper=t}resolveEndpoints(e){return ky(this,void 0,void 0,(function*(){const t={},i=yield this._config();return i.endpoints&&Object.keys(i.endpoints).forEach((e=>{const n=e.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));t[n]=(null==i?void 0:i.endpoints)?i.endpoints[e]:""})),Object.assign(Object.assign({},e),t)}))}resolveEndpointsExplicitly(){return ky(this,void 0,void 0,(function*(){const e={},t=yield this._config();if(!t.endpoints||!["authorization_endpoint","end_session_endpoint","jwks_uri","check_session_iframe","revocation_endpoint","token_endpoint","issuer","userinfo_endpoint"].every((e=>!!t.endpoints&&Object.keys(t.endpoints).some((t=>t.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())))===e)))))throw new zy("JS-AUTH_HELPER-REE-NF01","Required endpoints missing","Some or all of the required endpoints are missing in the object passed to the `endpoints` attribute of the`AuthConfig` object.");return t.endpoints&&Object.keys(t.endpoints).forEach((i=>{const n=i.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));e[n]=(null==t?void 0:t.endpoints)?t.endpoints[i]:""})),Object.assign({},e)}))}resolveEndpointsByBaseURL(){return ky(this,void 0,void 0,(function*(){const e={},t=yield this._config(),i=t.baseUrl;if(!i)throw new zy("JS-AUTH_HELPER_REBO-NF01","Base URL not defined.","Base URL is not defined in AuthClient config.");t.endpoints&&Object.keys(t.endpoints).forEach((i=>{const n=i.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));e[n]=(null==t?void 0:t.endpoints)?t.endpoints[i]:""}));const n={authorization_endpoint:"".concat(i).concat("/oauth2/authorize"),end_session_endpoint:"".concat(i).concat("/oidc/logout"),issuer:"".concat(i).concat("/oauth2/token"),jwks_uri:"".concat(i).concat("/oauth2/jwks"),check_session_iframe:"".concat(i).concat("/oidc/checksession"),revocation_endpoint:"".concat(i).concat("/oauth2/revoke"),token_endpoint:"".concat(i).concat("/oauth2/token"),userinfo_endpoint:"".concat(i).concat("/oauth2/userinfo")};return Object.assign(Object.assign({},n),e)}))}validateIdToken(e){var t;return ky(this,void 0,void 0,(function*(){const i=(yield this._dataLayer.getOIDCProviderMetaData()).jwks_uri,n=yield this._config();if(!i||0===i.trim().length)throw new zy("JS_AUTH_HELPER-VIT-NF01","JWKS endpoint not found.","No JWKS endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the JWKS endpoint passed to the SDK is empty.");let l;try{l=yield fetch(i,{credentials:n.sendCookiesInRequests?xy.Include:xy.SameOrigin})}catch(i){throw new zy("JS-AUTH_HELPER-VIT-NE02","Request to jwks endpoint failed.",null!=i?i:"The request sent to get the jwks from the server failed.")}if(200!==l.status||!l.ok)throw new zy("JS-AUTH_HELPER-VIT-HE03","Invalid response status received for jwks request (".concat(l.statusText,")."),yield l.json());const o=(yield this._oidcProviderMetaData()).issuer,{keys:c}=yield l.json(),a=yield this._cryptoHelper.getJWKForTheIdToken(e.split(".")[0],c);return this._cryptoHelper.isValidIdToken(e,a,(yield this._config()).clientID,null!=o?o:"",this._cryptoHelper.decodeIDToken(e).sub,(yield this._config()).clockTolerance,null===(t=(yield this._config()).validateIDTokenIssuer)||void 0===t||t)}))}getAuthenticatedUserInfo(e){var t,i,n,l;const o=this._cryptoHelper.decodeIDToken(e),c=Py.getTenantDomainFromIdTokenPayload(o),a=null!==(t=null==o?void 0:o.username)&&void 0!==t?t:"",r=null!==(i=o.given_name)&&void 0!==i?i:"",d=null!==(n=o.family_name)&&void 0!==n?n:"",s=r&&d?"".concat(r," ").concat(d):r||d||"",u=null!==(l=o.preferred_username)&&void 0!==l?l:s;return Object.assign({displayName:u,tenantDomain:c,username:a},Py.filterClaimsFromIDTokenPayload(o))}replaceCustomGrantTemplateTags(e,t){var i;return ky(this,void 0,void 0,(function*(){let n="openid";const l=yield this._config(),o=yield this._dataLayer.getSessionData(t);return l.scope&&l.scope.length>0&&(l.scope.includes("openid")||l.scope.push("openid"),n=l.scope.join(" ")),e.replace("{{token}}",o.access_token).replace("{{username}}",this.getAuthenticatedUserInfo(o.id_token).username).replace("{{scope}}",n).replace("{{clientID}}",l.clientID).replace("{{clientSecret}}",null!==(i=l.clientSecret)&&void 0!==i?i:"")}))}clearUserSessionData(e){return ky(this,void 0,void 0,(function*(){yield this._dataLayer.removeTemporaryData(e),yield this._dataLayer.removeSessionData(e)}))}handleTokenResponse(e,t){return ky(this,void 0,void 0,(function*(){if(200!==e.status||!e.ok)throw new zy("JS-AUTH_HELPER-HTR-NE01","Invalid response status received for token request (".concat(e.statusText,")."),yield e.json());const i=yield e.json();if(i.created_at=(new Date).getTime(),(yield this._config()).validateIDToken)return this.validateIdToken(i.id_token).then((()=>ky(this,void 0,void 0,(function*(){yield this._dataLayer.setSessionData(i,t);const e={accessToken:i.access_token,createdAt:i.created_at,expiresIn:i.expires_in,idToken:i.id_token,refreshToken:i.refresh_token,scope:i.scope,tokenType:i.token_type};return Promise.resolve(e)}))));{const e={accessToken:i.access_token,createdAt:i.created_at,expiresIn:i.expires_in,idToken:i.id_token,refreshToken:i.refresh_token,scope:i.scope,tokenType:i.token_type};return yield this._dataLayer.setSessionData(i,t),Promise.resolve(e)}}))}generatePKCEKey(e){var t;return ky(this,void 0,void 0,(function*(){const i=yield this._dataLayer.getTemporaryData(e),n=[];Object.keys(i).forEach((e=>{e.startsWith("pkce_code_verifier")&&n.push(e)}));const l=n.sort().pop();return"pkce_code_verifier#".concat(parseInt(null!==(t=null==l?void 0:l.split("#")[1])&&void 0!==t?t:"-1")+1)}))}}class jy{constructor(e){this._cryptoUtils=e}getCodeVerifier(){return this._cryptoUtils.base64URLEncode(this._cryptoUtils.generateRandomBytes(32))}getCodeChallenge(e){return this._cryptoUtils.base64URLEncode(this._cryptoUtils.hashSha256(e))}getJWKForTheIdToken(e,t){const i=JSON.parse(this._cryptoUtils.base64URLDecode(e));for(const e of t)if(i.kid===e.kid)return e;throw new zy("JS-CRYPTO_UTIL-GJFTIT-IV01","kid not found.","Failed to find the 'kid' specified in the id_token. 'kid' found in the header : "+i.kid+", Expected values: "+t.map((e=>e.kid)).join(", "))}isValidIdToken(e,t,i,n,l,o,c){return this._cryptoUtils.verifyJwt(e,t,Hy,i,n,l,o,c).then((e=>e?Promise.resolve(!0):Promise.reject(new zy("JS-CRYPTO_HELPER-IVIT-IV01","Invalid ID token.","ID token validation returned false"))))}decodeIDToken(e){try{const t=this._cryptoUtils.base64URLDecode(e.split(".")[1]);return JSON.parse(t)}catch(e){throw new zy("JS-CRYPTO_UTIL-DIT-IV01","Decoding ID token failed.",e)}}}class My{constructor(e,t){this._cryptoUtils=t,this._cryptoHelper=new jy(t),this._authenticationHelper=new Qy(e,this._cryptoHelper),this._dataLayer=e,this._config=()=>ky(this,void 0,void 0,(function*(){return yield this._dataLayer.getConfigData()})),this._oidcProviderMetaData=()=>ky(this,void 0,void 0,(function*(){return yield this._dataLayer.getOIDCProviderMetaData()}))}getAuthorizationURLParams(e,t){var i,n,l;return ky(this,void 0,void 0,(function*(){const o=yield this._config(),c=new Map;c.set("response_type","code"),c.set("client_id",o.clientID),o.clientSecret&&o.clientSecret.trim().length>0&&c.set("client_secret",o.clientSecret);let a="openid";o.scope&&o.scope.length>0&&(o.scope.includes("openid")||o.scope.push("openid"),a=o.scope.join(" ")),c.set("scope",a),c.set("redirect_uri",o.signInRedirectURL),o.responseMode&&c.set("response_mode",o.responseMode);const r=yield this._authenticationHelper.generatePKCEKey(t);if(o.enablePKCE){const e=null===(i=this._cryptoHelper)||void 0===i?void 0:i.getCodeVerifier(),l=null===(n=this._cryptoHelper)||void 0===n?void 0:n.getCodeChallenge(e);yield this._dataLayer.setTemporaryDataParameter(r,e,t),c.set("code_challenge_method","S256"),c.set("code_challenge",l)}o.prompt&&c.set("prompt",o.prompt);const d=e;if(d)for(const[e,t]of Object.entries(d))""!=e&&""!=t&&"state"!==e&&c.set(e,t.toString());return c.set("state",Py.generateStateParamForRequestCorrelation(r,d?null===(l=d.state)||void 0===l?void 0:l.toString():"")),c}))}getAuthorizationURL(e,t){return ky(this,void 0,void 0,(function*(){const i=yield this._dataLayer.getOIDCProviderMetaDataParameter("authorization_endpoint");if(!i||0===i.trim().length)throw new zy("JS-AUTH_CORE-GAU-NF01","No authorization endpoint found.","No authorization endpoint was found in the OIDC provider meta data from the well-known endpoint or the authorization endpoint passed to the SDK is empty.");const n=new URL(i),l=yield this.getAuthorizationURLParams(e,t);for(const[e,t]of l.entries())n.searchParams.append(e,t);return n.toString()}))}requestAccessToken(e,t,i,n,l){return ky(this,void 0,void 0,(function*(){const o=(yield this._oidcProviderMetaData()).token_endpoint,c=yield this._config();if(!o||0===o.trim().length)throw new zy("JS-AUTH_CORE-RAT1-NF01","Token endpoint not found.","No token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the token endpoint passed to the SDK is empty.");t&&(yield this._dataLayer.setSessionDataParameter("session_state",t,n));const a=new URLSearchParams;a.set("client_id",c.clientID),c.clientSecret&&c.clientSecret.trim().length>0&&a.set("client_secret",c.clientSecret);const r=e;let d;a.set("code",r),a.set("grant_type","authorization_code"),a.set("redirect_uri",c.signInRedirectURL),(null==l?void 0:l.params)&&Object.entries(l.params).forEach((e=>{let[t,i]=e;a.append(t,i)})),c.enablePKCE&&(a.set("code_verifier","".concat(yield this._dataLayer.getTemporaryDataParameter(Py.extractPKCEKeyFromStateParam(i),n))),yield this._dataLayer.removeTemporaryDataParameter(Py.extractPKCEKeyFromStateParam(i),n));try{d=yield fetch(o,{body:a,credentials:c.sendCookiesInRequests?xy.Include:xy.SameOrigin,headers:new Headers(Py.getTokenRequestHeaders()),method:"POST"})}catch(o){throw new zy("JS-AUTH_CORE-RAT1-NE02","Requesting access token failed",null!=o?o:"The request to get the access token from the server failed.")}if(!d.ok)throw new zy("JS-AUTH_CORE-RAT1-HE03","Requesting access token failed with ".concat(d.statusText),yield d.json());return yield this._authenticationHelper.handleTokenResponse(d,n)}))}refreshAccessToken(e){return ky(this,void 0,void 0,(function*(){const t=(yield this._oidcProviderMetaData()).token_endpoint,i=yield this._config(),n=yield this._dataLayer.getSessionData(e);if(!n.refresh_token)throw new zy("JS-AUTH_CORE-RAT2-NF01","No refresh token found.","There was no refresh token found. Asgardeo doesn't return a refresh token if the refresh token grant is not enabled.");if(!t||0===t.trim().length)throw new zy("JS-AUTH_CORE-RAT2-NF02","No refresh token endpoint found.","No refresh token endpoint was in the OIDC provider meta data returned by the well-known endpoint or the refresh token endpoint passed to the SDK is empty.");const l=[];let o;l.push("client_id=".concat(i.clientID)),l.push("refresh_token=".concat(n.refresh_token)),l.push("grant_type=refresh_token"),i.clientSecret&&i.clientSecret.trim().length>0&&l.push("client_secret=".concat(i.clientSecret));try{o=yield fetch(t,{body:l.join("&"),credentials:i.sendCookiesInRequests?xy.Include:xy.SameOrigin,headers:new Headers(Py.getTokenRequestHeaders()),method:"POST"})}catch(t){throw new zy("JS-AUTH_CORE-RAT2-NR03","Refresh access token request failed.",null!=t?t:"The request to refresh the access token failed.")}if(!o.ok)throw new zy("JS-AUTH_CORE-RAT2-HE04","Refreshing access token failed with ".concat(o.statusText),yield o.json());return this._authenticationHelper.handleTokenResponse(o,e)}))}revokeAccessToken(e){return ky(this,void 0,void 0,(function*(){const t=(yield this._oidcProviderMetaData()).revocation_endpoint,i=yield this._config();if(!t||0===t.trim().length)throw new zy("JS-AUTH_CORE-RAT3-NF01","No revoke access token endpoint found.","No revoke access token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the revoke access token endpoint passed to the SDK is empty.");const n=[];let l;n.push("client_id=".concat(i.clientID)),n.push("token=".concat((yield this._dataLayer.getSessionData(e)).access_token)),n.push("token_type_hint=access_token");try{l=yield fetch(t,{body:n.join("&"),credentials:i.sendCookiesInRequests?xy.Include:xy.SameOrigin,headers:new Headers(Py.getTokenRequestHeaders()),method:"POST"})}catch(t){throw new zy("JS-AUTH_CORE-RAT3-NE02","The request to revoke access token failed.",null!=t?t:"The request sent to revoke the access token failed.")}if(200!==l.status||!l.ok)throw new zy("JS-AUTH_CORE-RAT3-HE03","Invalid response status received for revoke access token request (".concat(l.statusText,")."),yield l.json());return this._authenticationHelper.clearUserSessionData(e),Promise.resolve(l)}))}requestCustomGrant(e,t){return ky(this,void 0,void 0,(function*(){const i=yield this._oidcProviderMetaData(),n=yield this._config();let l;if(l=e.tokenEndpoint&&0!==e.tokenEndpoint.trim().length?e.tokenEndpoint:i.token_endpoint,!l||0===l.trim().length)throw new zy("JS-AUTH_CORE-RCG-NF01","Token endpoint not found.","No token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the token endpoint passed to the SDK is empty.");const o=yield Promise.all(Object.entries(e.data).map((e=>{let[i,n]=e;return ky(this,void 0,void 0,(function*(){const e=yield this._authenticationHelper.replaceCustomGrantTemplateTags(n,t);return"".concat(i,"=").concat(e)}))})));let c=Object.assign({},Py.getTokenRequestHeaders());e.attachToken&&(c=Object.assign(Object.assign({},c),{Authorization:"Bearer ".concat((yield this._dataLayer.getSessionData(t)).access_token)}));const a={body:o.join("&"),credentials:n.sendCookiesInRequests?xy.Include:xy.SameOrigin,headers:new Headers(c),method:"POST"};let r;try{r=yield fetch(l,a)}catch(e){throw new zy("JS-AUTH_CORE-RCG-NE02","The custom grant request failed.",null!=e?e:"The request sent to get the custom grant failed.")}if(200!==r.status||!r.ok)throw new zy("JS-AUTH_CORE-RCG-HE03","Invalid response status received for the custom grant request. (".concat(r.statusText,")"),yield r.json());return e.returnsSession?this._authenticationHelper.handleTokenResponse(r,t):Promise.resolve(yield r.json())}))}getBasicUserInfo(e){return ky(this,void 0,void 0,(function*(){const t=yield this._dataLayer.getSessionData(e),i=this._authenticationHelper.getAuthenticatedUserInfo(null==t?void 0:t.id_token);let n={allowedScopes:t.scope,sessionState:t.session_state};return Object.keys(i).forEach((e=>{void 0!==i[e]&&""!==i[e]&&null!==i[e]||delete i[e]})),n=Object.assign(Object.assign({},n),i),n}))}getDecodedIDToken(e){return ky(this,void 0,void 0,(function*(){const t=(yield this._dataLayer.getSessionData(e)).id_token;return this._cryptoHelper.decodeIDToken(t)}))}getCryptoHelper(){return ky(this,void 0,void 0,(function*(){return this._cryptoHelper}))}getIDToken(e){return ky(this,void 0,void 0,(function*(){return(yield this._dataLayer.getSessionData(e)).id_token}))}getOIDCProviderMetaData(e){return ky(this,void 0,void 0,(function*(){const t=yield this._config();if(!e&&(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated")))return Promise.resolve();const i=t.wellKnownEndpoint;if(i){let e;try{if(e=yield fetch(i),200!==e.status||!e.ok)throw new Error}catch(t){throw new zy("JS-AUTH_CORE-GOPMD-HE01","Invalid well-known response","The well known endpoint response has been failed with an error.")}return yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpoints(yield e.json())),yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}if(t.baseUrl){try{yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpointsByBaseURL())}catch(t){throw new zy("JS-AUTH_CORE-GOPMD-IV02","Resolving endpoints failed.",null!=t?t:"Resolving endpoints by base url failed.")}return yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}return yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpointsExplicitly()),yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}))}getOIDCServiceEndpoints(){var e,t,i,n,l,o,c,a,r,d;return ky(this,void 0,void 0,(function*(){const s=yield this._oidcProviderMetaData();return{authorizationEndpoint:null!==(e=s.authorization_endpoint)&&void 0!==e?e:"",checkSessionIframe:null!==(t=s.check_session_iframe)&&void 0!==t?t:"",endSessionEndpoint:null!==(i=s.end_session_endpoint)&&void 0!==i?i:"",introspectionEndpoint:null!==(n=s.introspection_endpoint)&&void 0!==n?n:"",issuer:null!==(l=s.issuer)&&void 0!==l?l:"",jwksUri:null!==(o=s.jwks_uri)&&void 0!==o?o:"",registrationEndpoint:null!==(c=s.registration_endpoint)&&void 0!==c?c:"",revocationEndpoint:null!==(a=s.revocation_endpoint)&&void 0!==a?a:"",tokenEndpoint:null!==(r=s.token_endpoint)&&void 0!==r?r:"",userinfoEndpoint:null!==(d=s.userinfo_endpoint)&&void 0!==d?d:""}}))}getSignOutURL(e){var t,i,n;return ky(this,void 0,void 0,(function*(){const l=null===(t=yield this._oidcProviderMetaData())||void 0===t?void 0:t.end_session_endpoint,o=yield this._config();if(!l||0===l.trim().length)throw new zy("JS-AUTH_CORE-GSOU-NF01","Sign-out endpoint not found.","No sign-out endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the sign-out endpoint passed to the SDK is empty.");const c=null!==(i=null==o?void 0:o.signOutRedirectURL)&&void 0!==i?i:null==o?void 0:o.signInRedirectURL;if(!c||0===c.trim().length)throw new zy("JS-AUTH_CORE-GSOU-NF03","No sign-out redirect URL found.","The sign-out redirect URL cannot be found or the URL passed to the SDK is empty. No sign-in redirect URL has been found either. ");const a=new URLSearchParams;if(a.set("post_logout_redirect_uri",c),o.sendIdTokenInLogoutRequest){const t=null===(n=yield this._dataLayer.getSessionData(e))||void 0===n?void 0:n.id_token;if(!t||0===t.trim().length)throw new zy("JS-AUTH_CORE-GSOU-NF02","ID token not found.","No ID token could be found. Either the session information is lost or you have not signed in.");a.set("id_token_hint",t)}else a.set("client_id",o.clientID);return a.set("state","sign_out_success"),"".concat(l,"?").concat(a.toString())}))}clearUserSessionData(e){return ky(this,void 0,void 0,(function*(){yield this._authenticationHelper.clearUserSessionData(e)}))}getAccessToken(e){var t;return ky(this,void 0,void 0,(function*(){return null===(t=yield this._dataLayer.getSessionData(e))||void 0===t?void 0:t.access_token}))}getCreatedAt(e){var t;return ky(this,void 0,void 0,(function*(){return null===(t=yield this._dataLayer.getSessionData(e))||void 0===t?void 0:t.created_at}))}getExpiresIn(e){var t;return ky(this,void 0,void 0,(function*(){return null===(t=yield this._dataLayer.getSessionData(e))||void 0===t?void 0:t.expires_in}))}isAuthenticated(e){return ky(this,void 0,void 0,(function*(){const t=Boolean(yield this.getAccessToken(e)),i=yield this.getCreatedAt(e),n=yield this.getExpiresIn(e);if(!n)return!1;const l=1e3*parseInt(n),o=(new Date).getTime();return t&&i+l>o}))}getPKCECode(e,t){return ky(this,void 0,void 0,(function*(){return yield this._dataLayer.getTemporaryDataParameter(Py.extractPKCEKeyFromStateParam(e),t)}))}setPKCECode(e,t,i){return ky(this,void 0,void 0,(function*(){return yield this._dataLayer.setTemporaryDataParameter(Py.extractPKCEKeyFromStateParam(t),e,i)}))}updateConfig(e){return ky(this,void 0,void 0,(function*(){yield this._dataLayer.setConfigData(e),yield this.getOIDCProviderMetaData(!0)}))}}class Ey{constructor(e,t){this._id=e,this._store=t}setDataInBulk(e,t){var i;return ky(this,void 0,void 0,(function*(){const n=null!==(i=yield this._store.getData(e))&&void 0!==i?i:null,l=n&&JSON.parse(n),o=Object.assign(Object.assign({},l),t),c=JSON.stringify(o);yield this._store.setData(e,c)}))}setValue(e,t,i){var n;return ky(this,void 0,void 0,(function*(){const l=null!==(n=yield this._store.getData(e))&&void 0!==n?n:null,o=l&&JSON.parse(l),c=Object.assign(Object.assign({},o),{[t]:i}),a=JSON.stringify(c);yield this._store.setData(e,a)}))}removeValue(e,t){var i;return ky(this,void 0,void 0,(function*(){const n=null!==(i=yield this._store.getData(e))&&void 0!==i?i:null,l=n&&JSON.parse(n),o=Object.assign({},l);delete o[t];const c=JSON.stringify(o);yield this._store.setData(e,c)}))}_resolveKey(e,t){return t?"".concat(e,"-").concat(this._id,"-").concat(t):"".concat(e,"-").concat(this._id)}isLocalStorageAvailable(){try{const e="__ASGARDEO_AUTH_CORE_LOCAL_STORAGE_TEST__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}setConfigData(t){return ky(this,void 0,void 0,(function*(){yield this.setDataInBulk(this._resolveKey(e.Stores.ConfigData),t)}))}setOIDCProviderMetaData(t){return ky(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.OIDCProviderMetaData),t)}))}setTemporaryData(t,i){return ky(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.TemporaryData,i),t)}))}setSessionData(t,i){return ky(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.SessionData,i),t)}))}setCustomData(e,t,i){return ky(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e,i),t)}))}getConfigData(){var t;return ky(this,void 0,void 0,(function*(){return JSON.parse(null!==(t=yield this._store.getData(this._resolveKey(e.Stores.ConfigData)))&&void 0!==t?t:null)}))}getOIDCProviderMetaData(){var t;return ky(this,void 0,void 0,(function*(){return JSON.parse(null!==(t=yield this._store.getData(this._resolveKey(e.Stores.OIDCProviderMetaData)))&&void 0!==t?t:null)}))}getTemporaryData(t){var i;return ky(this,void 0,void 0,(function*(){return JSON.parse(null!==(i=yield this._store.getData(this._resolveKey(e.Stores.TemporaryData,t)))&&void 0!==i?i:null)}))}getSessionData(t){var i;return ky(this,void 0,void 0,(function*(){return JSON.parse(null!==(i=yield this._store.getData(this._resolveKey(e.Stores.SessionData,t)))&&void 0!==i?i:null)}))}getCustomData(e,t){var i;return ky(this,void 0,void 0,(function*(){return JSON.parse(null!==(i=yield this._store.getData(this._resolveKey(e,t)))&&void 0!==i?i:null)}))}setSessionStatus(e){this.isLocalStorageAvailable()&&localStorage.setItem("asgardeo-session-active",e)}getSessionStatus(){var e;return this.isLocalStorageAvailable()&&null!==(e=localStorage.getItem("asgardeo-session-active"))&&void 0!==e?e:""}removeSessionStatus(){this.isLocalStorageAvailable()&&localStorage.removeItem("asgardeo-session-active")}removeConfigData(){return ky(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.ConfigData))}))}removeOIDCProviderMetaData(){return ky(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.OIDCProviderMetaData))}))}removeTemporaryData(t){return ky(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.TemporaryData,t))}))}removeSessionData(t){return ky(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.SessionData,t))}))}getConfigDataParameter(t){return ky(this,void 0,void 0,(function*(){const i=yield this._store.getData(this._resolveKey(e.Stores.ConfigData));return i&&JSON.parse(i)[t]}))}getOIDCProviderMetaDataParameter(t){return ky(this,void 0,void 0,(function*(){const i=yield this._store.getData(this._resolveKey(e.Stores.OIDCProviderMetaData));return i&&JSON.parse(i)[t]}))}getTemporaryDataParameter(t,i){return ky(this,void 0,void 0,(function*(){const n=yield this._store.getData(this._resolveKey(e.Stores.TemporaryData,i));return n&&JSON.parse(n)[t]}))}getSessionDataParameter(t,i){return ky(this,void 0,void 0,(function*(){const n=yield this._store.getData(this._resolveKey(e.Stores.SessionData,i));return n&&JSON.parse(n)[t]}))}setConfigDataParameter(t,i){return ky(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.ConfigData),t,i)}))}setOIDCProviderMetaDataParameter(t,i){return ky(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.OIDCProviderMetaData),t,i)}))}setTemporaryDataParameter(t,i,n){return ky(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.TemporaryData,n),t,i)}))}setSessionDataParameter(t,i,n){return ky(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.SessionData,n),t,i)}))}removeConfigDataParameter(t){return ky(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.ConfigData),t)}))}removeOIDCProviderMetaDataParameter(t){return ky(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.OIDCProviderMetaData),t)}))}removeTemporaryDataParameter(t,i){return ky(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.TemporaryData,i),t)}))}removeSessionDataParameter(t,i){return ky(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.SessionData,i),t)}))}}const Dy={clockTolerance:300,enablePKCE:!0,responseMode:e.ResponseMode.query,scope:["openid"],sendCookiesInRequests:!0,validateIDToken:!0,validateIDTokenIssuer:!0};class Oy{
/**
	       * This is the constructor method that returns an instance of the .
	       *
	       * @param store - The store object.
	       *
	       * @example
	       * ```
	       * const _store: Store = new DataStore();
	       * const auth = new AsgardeoAuthClient<CustomClientConfig>(_store);
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#constructor}
	       *
	       * @preserve
	       */
constructor(){}
/**
	       *
	       * This method initializes the SDK with the config data.
	       *
	       * @param config - The config object to initialize with.
	       *
	       * @example
	       * const config = \{
	       *     signInRedirectURL: "http://localhost:3000/sign-in",
	       *     clientID: "client ID",
	       *     baseUrl: "https://localhost:9443"
	       * \}
	       *
	       * await auth.initialize(config);
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#initialize}
	       *
	       * @preserve
	       */initialize(e,t,i,n){var l,o,c;return ky(this,void 0,void 0,(function*(){const a=e.clientID;Oy._instanceID?Oy._instanceID+=1:Oy._instanceID=0,n&&(Oy._instanceID=n),this._dataLayer=new Ey(a?"instance_".concat(Oy._instanceID,"-").concat(a):"instance_".concat(Oy._instanceID),t),this._authenticationCore=new My(this._dataLayer,i),Oy._authenticationCore=new My(this._dataLayer,i),yield this._dataLayer.setConfigData(Object.assign(Object.assign(Object.assign({},Dy),e),{scope:[...null!==(l=Dy.scope)&&void 0!==l?l:[],...null!==(c=null===(o=e.scope)||void 0===o?void 0:o.filter((e=>{var t;return!(null===(t=null==Dy?void 0:Dy.scope)||void 0===t?void 0:t.includes(e))})))&&void 0!==c?c:[]]}))}))}
/**
	       * This method returns the `DataLayer` object that allows you to access authentication data.
	       *
	       * @returns - The `DataLayer` object.
	       *
	       * @example
	       * ```
	       * const data = auth.getDataLayer();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getDataLayer}
	       *
	       * @preserve
	       */getDataLayer(){return this._dataLayer}
/**
	       * This method returns the `instanceID` variable of the given instance.
	       *
	       * @returns - The `instanceID` number.
	       *
	       * @example
	       * ```
	       * const instanceId = auth.getInstanceID();
	       * ```
	       *
	       * @preserve
	       */getInstanceID(){return Oy._instanceID}
/**
	     * This is an async method that returns a Promise that resolves with the authorization URL parameters.
	     *
	     * @param config - (Optional) A config object to force initialization and pass
	     * custom path parameters such as the `fidp` parameter.
	     * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	     * scenarios where each user should be uniquely identified.
	     *
	     * @returns - A promise that resolves with the authorization URL parameters.
	     *
	     * @example
	     * ```
	     * auth.getAuthorizationURLParams().then((params)=>{
	     *  // console.log(params);
	     * }).catch((error)=>{
	     *  // console.error(error);
	     * });
	     * ```
	     *
	     * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getAuthorizationURLParams}
	     *
	     * @preserve
	     */getAuthorizationURLParams(e,t){return ky(this,void 0,void 0,(function*(){const i=Object.assign({},e);return null==i||delete i.forceInit,(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated"))?this._authenticationCore.getAuthorizationURLParams(i,t):this._authenticationCore.getOIDCProviderMetaData(null==e?void 0:e.forceInit).then((()=>this._authenticationCore.getAuthorizationURLParams(i,t)))}))}
/**
	       * This is an async method that returns a Promise that resolves with the authorization URL.
	       *
	       * @param config - (Optional) A config object to force initialization and pass
	       * custom path parameters such as the fidp parameter.
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A promise that resolves with the authorization URL.
	       *
	       * @example
	       * ```
	       * auth.getAuthorizationURL().then((url)=>{
	       *  // console.log(url);
	       * }).catch((error)=>{
	       *  // console.error(error);
	       * });
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getAuthorizationURL}
	       *
	       * @preserve
	       */getAuthorizationURL(e,t){return ky(this,void 0,void 0,(function*(){const i=Object.assign({},e);return null==i||delete i.forceInit,(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated"))?this._authenticationCore.getAuthorizationURL(i,t):this._authenticationCore.getOIDCProviderMetaData(null==e?void 0:e.forceInit).then((()=>this._authenticationCore.getAuthorizationURL(i,t)))}))}
/**
	       * This is an async method that sends a request to obtain the access token and returns a Promise
	       * that resolves with the token and other relevant data.
	       *
	       * @param authorizationCode - The authorization code.
	       * @param sessionState - The session state.
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A Promise that resolves with the token response.
	       *
	       * @example
	       * ```
	       * auth.requestAccessToken(authCode, sessionState).then((token)=>{
	       *  // console.log(token);
	       * }).catch((error)=>{
	       *  // console.error(error);
	       * });
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#requestAccessToken}
	       *
	       *
	       * @preserve
	       */requestAccessToken(e,t,i,n,l){return ky(this,void 0,void 0,(function*(){return(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated"))?this._authenticationCore.requestAccessToken(e,t,i,n,l):this._authenticationCore.getOIDCProviderMetaData(!1).then((()=>this._authenticationCore.requestAccessToken(e,t,i,n,l)))}))}
/**
	       * This method returns the sign-out URL.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * **This doesn't clear the authentication data.**
	       *
	       * @returns - A Promise that resolves with the sign-out URL.
	       *
	       * @example
	       * ```
	       * const signOutUrl = await auth.getSignOutURL();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getSignOutURL}
	       *
	       * @preserve
	       */getSignOutURL(e){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.getSignOutURL(e)}))}
/**
	       * This method returns OIDC service endpoints that are fetched from the `.well-known` endpoint.
	       *
	       * @returns - A Promise that resolves with an object containing the OIDC service endpoints.
	       *
	       * @example
	       * ```
	       * const endpoints = await auth.getOIDCServiceEndpoints();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getOIDCServiceEndpoints}
	       *
	       * @preserve
	       */getOIDCServiceEndpoints(){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.getOIDCServiceEndpoints()}))}
/**
	       * This method decodes the payload of the ID token and returns it.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A Promise that resolves with the decoded ID token payload.
	       *
	       * @example
	       * ```
	       * const decodedIdToken = await auth.getDecodedIDToken();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getDecodedIDToken}
	       *
	       * @preserve
	       */getDecodedIDToken(e){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.getDecodedIDToken(e)}))}
/**
	       * This method returns the ID token.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A Promise that resolves with the ID token.
	       *
	       * @example
	       * ```
	       * const idToken = await auth.getIDToken();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getIDToken}
	       *
	       * @preserve
	       */getIDToken(e){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.getIDToken(e)}))}
/**
	       * This method returns the basic user information obtained from the ID token.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A Promise that resolves with an object containing the basic user information.
	       *
	       * @example
	       * ```
	       * const userInfo = await auth.getBasicUserInfo();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getBasicUserInfo}
	       *
	       * @preserve
	       */getBasicUserInfo(e){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.getBasicUserInfo(e)}))}
/**
	       * This method returns the crypto helper object.
	       *
	       * @returns - A Promise that resolves with a CryptoHelper object.
	       *
	       * @example
	       * ```
	       * const cryptoHelper = await auth.CryptoHelper();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getCryptoHelper}
	       *
	       * @preserve
	       */getCryptoHelper(){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.getCryptoHelper()}))}
/**
	       * This method revokes the access token.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * **This method also clears the authentication data.**
	       *
	       * @returns - A Promise that returns the response of the revoke-access-token request.
	       *
	       * @example
	       * ```
	       * auth.revokeAccessToken().then((response)=>{
	       *  // console.log(response);
	       * }).catch((error)=>{
	       *  // console.error(error);
	       * });
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#revokeAccessToken}
	       *
	       * @preserve
	       */revokeAccessToken(e){return this._authenticationCore.revokeAccessToken(e)}
/**
	       * This method refreshes the access token and returns a Promise that resolves with the new access
	       * token and other relevant data.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A Promise that resolves with the token response.
	       *
	       * @example
	       * ```
	       * auth.refreshAccessToken().then((response)=>{
	       *  // console.log(response);
	       * }).catch((error)=>{
	       *  // console.error(error);
	       * });
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#refreshAccessToken}
	       *
	       * @preserve
	       */refreshAccessToken(e){return this._authenticationCore.refreshAccessToken(e)}
/**
	       * This method returns the access token.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A Promise that resolves with the access token.
	       *
	       * @example
	       * ```
	       * const accessToken = await auth.getAccessToken();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getAccessToken}
	       *
	       * @preserve
	       */getAccessToken(e){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.getAccessToken(e)}))}
/**
	       * This method sends a custom-grant request and returns a Promise that resolves with the response
	       * depending on the config passed.
	       *
	       * @param config - A config object containing the custom grant configurations.
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A Promise that resolves with the response depending
	       * on your configurations.
	       *
	       * @example
	       * ```
	       * const config = {
	       *   attachToken: false,
	       *   data: {
	       *       client_id: "{{clientID}}",
	       *       grant_type: "account_switch",
	       *       scope: "{{scope}}",
	       *       token: "{{token}}",
	       *   },
	       *   id: "account-switch",
	       *   returnResponse: true,
	       *   returnsSession: true,
	       *   signInRequired: true
	       * }
	       *
	       * auth.requestCustomGrant(config).then((response)=>{
	       *  // console.log(response);
	       * }).catch((error)=>{
	       *  // console.error(error);
	       * });
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#requestCustomGrant}
	       *
	       * @preserve
	       */requestCustomGrant(e,t){return this._authenticationCore.requestCustomGrant(e,t)}
/**
	       * This method returns if the user is authenticated or not.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @returns - A Promise that resolves with `true` if the user is authenticated, `false` otherwise.
	       *
	       * @example
	       * ```
	       * await auth.isAuthenticated();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#isAuthenticated}
	       *
	       * @preserve
	       */isAuthenticated(e){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.isAuthenticated(e)}))}
/**
	       * This method returns the PKCE code generated during the generation of the authentication URL.
	       *
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       * @param state - The state parameter that was passed in the authentication URL.
	       *
	       * @returns - A Promise that resolves with the PKCE code.
	       *
	       * @example
	       * ```
	       * const pkce = await getPKCECode();
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getPKCECode}
	       *
	       * @preserve
	       */getPKCECode(e,t){return ky(this,void 0,void 0,(function*(){return this._authenticationCore.getPKCECode(e,t)}))}
/**
	       * This method sets the PKCE code to the data store.
	       *
	       * @param pkce - The PKCE code.
	       * @param state - The state parameter that was passed in the authentication URL.
	       * @param userID - (Optional) A unique ID of the user to be authenticated. This is useful in multi-user
	       * scenarios where each user should be uniquely identified.
	       *
	       * @example
	       * ```
	       * await auth.setPKCECode("pkce_code")
	       * ```
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#setPKCECode}
	       *
	       * @preserve
	       */setPKCECode(e,t,i){return ky(this,void 0,void 0,(function*(){yield this._authenticationCore.setPKCECode(e,t,i)}))}
/**
	       * This method returns if the sign-out is successful or not.
	       *
	       * @param signOutRedirectUrl - The URL to which the user has been redirected to after signing-out.
	       *
	       * **The server appends path parameters to the `signOutRedirectURL` and these path parameters
	       *  are required for this method to function.**
	       *
	       * @returns - `true` if successful, `false` otherwise.
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#isSignOutSuccessful}
	       *
	       * @preserve
	       */static isSignOutSuccessful(e){const t=new URL(e),i=t.searchParams.get("state"),n=Boolean(t.searchParams.get("error"));return!!i&&"sign_out_success"===i&&!n}
/**
	       * This method returns if the sign-out has failed or not.
	       *
	       * @param signOutRedirectUrl - The URL to which the user has been redirected to after signing-out.
	       *
	       * **The server appends path parameters to the `signOutRedirectURL` and these path parameters
	       *  are required for this method to function.**
	       *
	       * @returns - `true` if successful, `false` otherwise.
	       *
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#didSignOutFail}
	       *
	       * @preserve
	       */static didSignOutFail(e){const t=new URL(e),i=t.searchParams.get("state"),n=Boolean(t.searchParams.get("error"));return!!i&&"sign_out_success"===i&&n}
/**
	       * This method updates the configuration that was passed into the constructor when instantiating this class.
	       *
	       * @param config - A config object to update the SDK configurations with.
	       *
	       * @example
	       * ```
	       * const config = {
	       *     signInRedirectURL: "http://localhost:3000/sign-in",
	       *     clientID: "client ID",
	       *     baseUrl: "https://localhost:9443"
	       * }
	       *
	       * await auth.updateConfig(config);
	       * ```
	       * {@link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#updateConfig}
	       *
	       * @preserve
	       */updateConfig(e){return ky(this,void 0,void 0,(function*(){yield this._authenticationCore.updateConfig(e)}))}static clearUserSessionData(e){return ky(this,void 0,void 0,(function*(){yield this._authenticationCore.clearUserSessionData(e)}))}}function _y(e,t,i){var n=void 0===t?null:t,l=function(e,t){var i=atob(e);if(t){for(var n=new Uint8Array(i.length),l=0,o=i.length;l<o;++l)n[l]=i.charCodeAt(l);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}(e,void 0!==i&&i),o=l.indexOf("\n",10)+1,c=l.substring(o)+(n?"//# sourceMappingURL="+n:""),a=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(a)}var qy,$y,eX,tX,iX=(qy="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGU9ZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQsbixyKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKSgoZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiBzKGUpe3RyeXtjKHIubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gYShlKXt0cnl7YyhyLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBjKGUpe3ZhciB0O2UuZG9uZT9pKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbigoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihzLGEpfWMoKHI9ci5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX1mdW5jdGlvbiB0KGUsdCxuLHIpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKChmdW5jdGlvbihpLG8pe2Z1bmN0aW9uIHMoZSl7dHJ5e2Moci5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBhKGUpe3RyeXtjKHIudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGMoZSl7dmFyIHQ7ZS5kb25lP2koZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKHMsYSl9Yygocj1yLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfXZhciBuOyFmdW5jdGlvbihlKXtlLmZvcm1Qb3N0PSJmb3JtX3Bvc3QiLGUucXVlcnk9InF1ZXJ5IixlLmRpcmVjdD0iZGlyZWN0In0obnx8KG49e30pKTt2YXIgcjshZnVuY3Rpb24oZSl7ZS5Db25maWdEYXRhPSJjb25maWdfZGF0YSIsZS5PSURDUHJvdmlkZXJNZXRhRGF0YT0ib2lkY19wcm92aWRlcl9tZXRhX2RhdGEiLGUuU2Vzc2lvbkRhdGE9InNlc3Npb25fZGF0YSIsZS5UZW1wb3JhcnlEYXRhPSJ0ZW1wb3JhcnlfZGF0YSJ9KHJ8fChyPXt9KSk7Y29uc3QgaT0icmVmcmVzaF90b2tlbl90aW1lciIsbz1bIlJTMjU2IiwiUlM1MTIiLCJSUzM4NCIsIlBTMjU2Il0scz0ic2lnbl9vdXRfdXJsIjt2YXIgYTshZnVuY3Rpb24oZSl7ZS5JbmNsdWRlPSJpbmNsdWRlIixlLlNhbWVPcmlnaW49InNhbWUtb3JpZ2luIixlLk9taXQ9Im9taXQifShhfHwoYT17fSkpO2NsYXNzIGN7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMubWVzc2FnZT1uLHRoaXMubmFtZT10LHRoaXMuY29kZT1lLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLG5ldy50YXJnZXQucHJvdG90eXBlKX19Y2xhc3MgdXtjb25zdHJ1Y3Rvcigpe31zdGF0aWMgZmlsdGVyQ2xhaW1zRnJvbUlEVG9rZW5QYXlsb2FkKGUpe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbih7fSxlKTtudWxsPT10fHxkZWxldGUgdC5pc3MsbnVsbD09dHx8ZGVsZXRlIHQuYXVkLG51bGw9PXR8fGRlbGV0ZSB0LmV4cCxudWxsPT10fHxkZWxldGUgdC5pYXQsbnVsbD09dHx8ZGVsZXRlIHQuYWNyLG51bGw9PXR8fGRlbGV0ZSB0LmFtcixudWxsPT10fHxkZWxldGUgdC5henAsbnVsbD09dHx8ZGVsZXRlIHQuYXV0aF90aW1lLG51bGw9PXR8fGRlbGV0ZSB0Lm5vbmNlLG51bGw9PXR8fGRlbGV0ZSB0LmNfaGFzaCxudWxsPT10fHxkZWxldGUgdC5hdF9oYXNoLG51bGw9PXR8fGRlbGV0ZSB0Lm5iZixudWxsPT10fHxkZWxldGUgdC5pc2ssbnVsbD09dHx8ZGVsZXRlIHQuc2lkO2NvbnN0IG49e307cmV0dXJuIE9iamVjdC5lbnRyaWVzKHQpLmZvckVhY2goKGU9PntsZXRbdCxyXT1lO2NvbnN0IGk9dC5zcGxpdCgiXyIpLm1hcCgoKGUsdCk9PjA9PT10P2U6W2VbMF0udG9VcHBlckNhc2UoKSwuLi5lLnNsaWNlKDEpXS5qb2luKCIiKSkpLmpvaW4oIiIpO25baV09cn0pKSxufXN0YXRpYyBnZXRUb2tlblJlcXVlc3RIZWFkZXJzKCl7cmV0dXJue0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiIsIkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9fXN0YXRpYyBnZW5lcmF0ZVN0YXRlUGFyYW1Gb3JSZXF1ZXN0Q29ycmVsYXRpb24oZSx0KXtjb25zdCBuPXBhcnNlSW50KGUuc3BsaXQoIiMiKVsxXSk7cmV0dXJuIHQ/IiIuY29uY2F0KHQsIl9yZXF1ZXN0XyIpLmNvbmNhdChuKToicmVxdWVzdF8iLmNvbmNhdChuKX1zdGF0aWMgZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShlKXtyZXR1cm4icGtjZV9jb2RlX3ZlcmlmaWVyIyIuY29uY2F0KHBhcnNlSW50KGUuc3BsaXQoInJlcXVlc3RfIilbMV0pKX19dS5nZXRUZW5hbnREb21haW5Gcm9tSWRUb2tlblBheWxvYWQ9ZnVuY3Rpb24oZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiJAIjtjb25zdCBuPWUuc3ViLnNwbGl0KHQpO3JldHVybiBuLmxlbmd0aD4yP25bbi5sZW5ndGgtMV06IiJ9O2NsYXNzIGx7Y29uc3RydWN0b3IoZSxuKXt0aGlzLl9kYXRhTGF5ZXI9ZSx0aGlzLl9jb25maWc9KCk9PnQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLmdldENvbmZpZ0RhdGEoKX0pKSx0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YT0oKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoKX0pKSx0aGlzLl9jcnlwdG9IZWxwZXI9bn1yZXNvbHZlRW5kcG9pbnRzKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD17fSxuPXlpZWxkIHRoaXMuX2NvbmZpZygpO3JldHVybiBuLmVuZHBvaW50cyYmT2JqZWN0LmtleXMobi5lbmRwb2ludHMpLmZvckVhY2goKGU9Pntjb25zdCByPWUucmVwbGFjZSgvW0EtWl0vZywoZT0+Il8iLmNvbmNhdChlLnRvTG93ZXJDYXNlKCkpKSk7dFtyXT0obnVsbD09bj92b2lkIDA6bi5lbmRwb2ludHMpP24uZW5kcG9pbnRzW2VdOiIifSkpLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx0KX0pKX1yZXNvbHZlRW5kcG9pbnRzRXhwbGljaXRseSgpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT17fSx0PXlpZWxkIHRoaXMuX2NvbmZpZygpO2lmKCF0LmVuZHBvaW50c3x8IVsiYXV0aG9yaXphdGlvbl9lbmRwb2ludCIsImVuZF9zZXNzaW9uX2VuZHBvaW50Iiwiandrc191cmkiLCJjaGVja19zZXNzaW9uX2lmcmFtZSIsInJldm9jYXRpb25fZW5kcG9pbnQiLCJ0b2tlbl9lbmRwb2ludCIsImlzc3VlciIsInVzZXJpbmZvX2VuZHBvaW50Il0uZXZlcnkoKGU9PiEhdC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5zb21lKCh0PT50LnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpPT09ZSkpKSkpdGhyb3cgbmV3IGMoIkpTLUFVVEhfSEVMUEVSLVJFRS1ORjAxIiwiUmVxdWlyZWQgZW5kcG9pbnRzIG1pc3NpbmciLCJTb21lIG9yIGFsbCBvZiB0aGUgcmVxdWlyZWQgZW5kcG9pbnRzIGFyZSBtaXNzaW5nIGluIHRoZSBvYmplY3QgcGFzc2VkIHRvIHRoZSBgZW5kcG9pbnRzYCBhdHRyaWJ1dGUgb2YgdGhlYEF1dGhDb25maWdgIG9iamVjdC4iKTtyZXR1cm4gdC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5mb3JFYWNoKChuPT57Y29uc3Qgcj1uLnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpO2Vbcl09KG51bGw9PXQ/dm9pZCAwOnQuZW5kcG9pbnRzKT90LmVuZHBvaW50c1tuXToiIn0pKSxPYmplY3QuYXNzaWduKHt9LGUpfSkpfXJlc29sdmVFbmRwb2ludHNCeUJhc2VVUkwoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9e30sdD15aWVsZCB0aGlzLl9jb25maWcoKSxuPXQuYmFzZVVybDtpZighbil0aHJvdyBuZXcgYygiSlMtQVVUSF9IRUxQRVJfUkVCTy1ORjAxIiwiQmFzZSBVUkwgbm90IGRlZmluZWQuIiwiQmFzZSBVUkwgaXMgbm90IGRlZmluZWQgaW4gQXV0aENsaWVudCBjb25maWcuIik7dC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5mb3JFYWNoKChuPT57Y29uc3Qgcj1uLnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpO2Vbcl09KG51bGw9PXQ/dm9pZCAwOnQuZW5kcG9pbnRzKT90LmVuZHBvaW50c1tuXToiIn0pKTtjb25zdCByPXthdXRob3JpemF0aW9uX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvYXV0aG9yaXplIiksZW5kX3Nlc3Npb25fZW5kcG9pbnQ6IiIuY29uY2F0KG4pLmNvbmNhdCgiL29pZGMvbG9nb3V0IiksaXNzdWVyOiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvdG9rZW4iKSxqd2tzX3VyaToiIi5jb25jYXQobikuY29uY2F0KCIvb2F1dGgyL2p3a3MiKSxjaGVja19zZXNzaW9uX2lmcmFtZToiIi5jb25jYXQobikuY29uY2F0KCIvb2lkYy9jaGVja3Nlc3Npb24iKSxyZXZvY2F0aW9uX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvcmV2b2tlIiksdG9rZW5fZW5kcG9pbnQ6IiIuY29uY2F0KG4pLmNvbmNhdCgiL29hdXRoMi90b2tlbiIpLHVzZXJpbmZvX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvdXNlcmluZm8iKX07cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSxlKX0pKX12YWxpZGF0ZUlkVG9rZW4oZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PSh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoKSkuandrc191cmkscj15aWVsZCB0aGlzLl9jb25maWcoKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlNfQVVUSF9IRUxQRVItVklULU5GMDEiLCJKV0tTIGVuZHBvaW50IG5vdCBmb3VuZC4iLCJObyBKV0tTIGVuZHBvaW50IHdhcyBmb3VuZCBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIEpXS1MgZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7bGV0IGk7dHJ5e2k9eWllbGQgZmV0Y2godCx7Y3JlZGVudGlhbHM6ci5zZW5kQ29va2llc0luUmVxdWVzdHM/YS5JbmNsdWRlOmEuU2FtZU9yaWdpbn0pfWNhdGNoKHQpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0hFTFBFUi1WSVQtTkUwMiIsIlJlcXVlc3QgdG8gandrcyBlbmRwb2ludCBmYWlsZWQuIixudWxsIT10P3Q6IlRoZSByZXF1ZXN0IHNlbnQgdG8gZ2V0IHRoZSBqd2tzIGZyb20gdGhlIHNlcnZlciBmYWlsZWQuIil9aWYoMjAwIT09aS5zdGF0dXN8fCFpLm9rKXRocm93IG5ldyBjKCJKUy1BVVRIX0hFTFBFUi1WSVQtSEUwMyIsIkludmFsaWQgcmVzcG9uc2Ugc3RhdHVzIHJlY2VpdmVkIGZvciBqd2tzIHJlcXVlc3QgKCIuY29uY2F0KGkuc3RhdHVzVGV4dCwiKS4iKSx5aWVsZCBpLmpzb24oKSk7Y29uc3Qgbz0oeWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSkuaXNzdWVyLHtrZXlzOnN9PXlpZWxkIGkuanNvbigpLHU9eWllbGQgdGhpcy5fY3J5cHRvSGVscGVyLmdldEpXS0ZvclRoZUlkVG9rZW4oZS5zcGxpdCgiLiIpWzBdLHMpO3JldHVybiB0aGlzLl9jcnlwdG9IZWxwZXIuaXNWYWxpZElkVG9rZW4oZSx1LCh5aWVsZCB0aGlzLl9jb25maWcoKSkuY2xpZW50SUQsbnVsbCE9bz9vOiIiLHRoaXMuX2NyeXB0b0hlbHBlci5kZWNvZGVJRFRva2VuKGUpLnN1YiwoeWllbGQgdGhpcy5fY29uZmlnKCkpLmNsb2NrVG9sZXJhbmNlLG51bGw9PT0obj0oeWllbGQgdGhpcy5fY29uZmlnKCkpLnZhbGlkYXRlSURUb2tlbklzc3Vlcil8fHZvaWQgMD09PW58fG4pfSkpfWdldEF1dGhlbnRpY2F0ZWRVc2VySW5mbyhlKXt2YXIgdCxuLHIsaTtjb25zdCBvPXRoaXMuX2NyeXB0b0hlbHBlci5kZWNvZGVJRFRva2VuKGUpLHM9dS5nZXRUZW5hbnREb21haW5Gcm9tSWRUb2tlblBheWxvYWQobyksYT1udWxsIT09KHQ9bnVsbD09bz92b2lkIDA6by51c2VybmFtZSkmJnZvaWQgMCE9PXQ/dDoiIixjPW51bGwhPT0obj1vLmdpdmVuX25hbWUpJiZ2b2lkIDAhPT1uP246IiIsbD1udWxsIT09KHI9by5mYW1pbHlfbmFtZSkmJnZvaWQgMCE9PXI/cjoiIixkPWMmJmw/IiIuY29uY2F0KGMsIiAiKS5jb25jYXQobCk6Y3x8bHx8IiIsaD1udWxsIT09KGk9by5wcmVmZXJyZWRfdXNlcm5hbWUpJiZ2b2lkIDAhPT1pP2k6ZDtyZXR1cm4gT2JqZWN0LmFzc2lnbih7ZGlzcGxheU5hbWU6aCx0ZW5hbnREb21haW46cyx1c2VybmFtZTphfSx1LmZpbHRlckNsYWltc0Zyb21JRFRva2VuUGF5bG9hZChvKSl9cmVwbGFjZUN1c3RvbUdyYW50VGVtcGxhdGVUYWdzKGUsbil7dmFyIHI7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtsZXQgdD0ib3BlbmlkIjtjb25zdCBpPXlpZWxkIHRoaXMuX2NvbmZpZygpLG89eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKG4pO3JldHVybiBpLnNjb3BlJiZpLnNjb3BlLmxlbmd0aD4wJiYoaS5zY29wZS5pbmNsdWRlcygib3BlbmlkIil8fGkuc2NvcGUucHVzaCgib3BlbmlkIiksdD1pLnNjb3BlLmpvaW4oIiAiKSksZS5yZXBsYWNlKCJ7e3Rva2VufX0iLG8uYWNjZXNzX3Rva2VuKS5yZXBsYWNlKCJ7e3VzZXJuYW1lfX0iLHRoaXMuZ2V0QXV0aGVudGljYXRlZFVzZXJJbmZvKG8uaWRfdG9rZW4pLnVzZXJuYW1lKS5yZXBsYWNlKCJ7e3Njb3BlfX0iLHQpLnJlcGxhY2UoInt7Y2xpZW50SUR9fSIsaS5jbGllbnRJRCkucmVwbGFjZSgie3tjbGllbnRTZWNyZXR9fSIsbnVsbCE9PShyPWkuY2xpZW50U2VjcmV0KSYmdm9pZCAwIT09cj9yOiIiKX0pKX1jbGVhclVzZXJTZXNzaW9uRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2RhdGFMYXllci5yZW1vdmVUZW1wb3JhcnlEYXRhKGUpLHlpZWxkIHRoaXMuX2RhdGFMYXllci5yZW1vdmVTZXNzaW9uRGF0YShlKX0pKX1oYW5kbGVUb2tlblJlc3BvbnNlKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZigyMDAhPT1lLnN0YXR1c3x8IWUub2spdGhyb3cgbmV3IGMoIkpTLUFVVEhfSEVMUEVSLUhUUi1ORTAxIiwiSW52YWxpZCByZXNwb25zZSBzdGF0dXMgcmVjZWl2ZWQgZm9yIHRva2VuIHJlcXVlc3QgKCIuY29uY2F0KGUuc3RhdHVzVGV4dCwiKS4iKSx5aWVsZCBlLmpzb24oKSk7Y29uc3Qgcj15aWVsZCBlLmpzb24oKTtpZihyLmNyZWF0ZWRfYXQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksKHlpZWxkIHRoaXMuX2NvbmZpZygpKS52YWxpZGF0ZUlEVG9rZW4pcmV0dXJuIHRoaXMudmFsaWRhdGVJZFRva2VuKHIuaWRfdG9rZW4pLnRoZW4oKCgpPT50KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFNlc3Npb25EYXRhKHIsbik7Y29uc3QgZT17YWNjZXNzVG9rZW46ci5hY2Nlc3NfdG9rZW4sY3JlYXRlZEF0OnIuY3JlYXRlZF9hdCxleHBpcmVzSW46ci5leHBpcmVzX2luLGlkVG9rZW46ci5pZF90b2tlbixyZWZyZXNoVG9rZW46ci5yZWZyZXNoX3Rva2VuLHNjb3BlOnIuc2NvcGUsdG9rZW5UeXBlOnIudG9rZW5fdHlwZX07cmV0dXJuIFByb21pc2UucmVzb2x2ZShlKX0pKSkpO3tjb25zdCBlPXthY2Nlc3NUb2tlbjpyLmFjY2Vzc190b2tlbixjcmVhdGVkQXQ6ci5jcmVhdGVkX2F0LGV4cGlyZXNJbjpyLmV4cGlyZXNfaW4saWRUb2tlbjpyLmlkX3Rva2VuLHJlZnJlc2hUb2tlbjpyLnJlZnJlc2hfdG9rZW4sc2NvcGU6ci5zY29wZSx0b2tlblR5cGU6ci50b2tlbl90eXBlfTtyZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFNlc3Npb25EYXRhKHIsbiksUHJvbWlzZS5yZXNvbHZlKGUpfX0pKX1nZW5lcmF0ZVBLQ0VLZXkoZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhKGUpLHI9W107T2JqZWN0LmtleXModCkuZm9yRWFjaCgoZT0+e2Uuc3RhcnRzV2l0aCgicGtjZV9jb2RlX3ZlcmlmaWVyIikmJnIucHVzaChlKX0pKTtjb25zdCBpPXIuc29ydCgpLnBvcCgpO3JldHVybiJwa2NlX2NvZGVfdmVyaWZpZXIjIi5jb25jYXQocGFyc2VJbnQobnVsbCE9PShuPW51bGw9PWk/dm9pZCAwOmkuc3BsaXQoIiMiKVsxXSkmJnZvaWQgMCE9PW4/bjoiLTEiKSsxKX0pKX19Y2xhc3MgZHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9jcnlwdG9VdGlscz1lfWdldENvZGVWZXJpZmllcigpe3JldHVybiB0aGlzLl9jcnlwdG9VdGlscy5iYXNlNjRVUkxFbmNvZGUodGhpcy5fY3J5cHRvVXRpbHMuZ2VuZXJhdGVSYW5kb21CeXRlcygzMikpfWdldENvZGVDaGFsbGVuZ2UoZSl7cmV0dXJuIHRoaXMuX2NyeXB0b1V0aWxzLmJhc2U2NFVSTEVuY29kZSh0aGlzLl9jcnlwdG9VdGlscy5oYXNoU2hhMjU2KGUpKX1nZXRKV0tGb3JUaGVJZFRva2VuKGUsdCl7Y29uc3Qgbj1KU09OLnBhcnNlKHRoaXMuX2NyeXB0b1V0aWxzLmJhc2U2NFVSTERlY29kZShlKSk7Zm9yKGNvbnN0IGUgb2YgdClpZihuLmtpZD09PWUua2lkKXJldHVybiBlO3Rocm93IG5ldyBjKCJKUy1DUllQVE9fVVRJTC1HSkZUSVQtSVYwMSIsImtpZCBub3QgZm91bmQuIiwiRmFpbGVkIHRvIGZpbmQgdGhlICdraWQnIHNwZWNpZmllZCBpbiB0aGUgaWRfdG9rZW4uICdraWQnIGZvdW5kIGluIHRoZSBoZWFkZXIgOiAiK24ua2lkKyIsIEV4cGVjdGVkIHZhbHVlczogIit0Lm1hcCgoZT0+ZS5raWQpKS5qb2luKCIsICIpKX1pc1ZhbGlkSWRUb2tlbihlLHQsbixyLGkscyxhKXtyZXR1cm4gdGhpcy5fY3J5cHRvVXRpbHMudmVyaWZ5Snd0KGUsdCxvLG4scixpLHMsYSkudGhlbigoZT0+ZT9Qcm9taXNlLnJlc29sdmUoITApOlByb21pc2UucmVqZWN0KG5ldyBjKCJKUy1DUllQVE9fSEVMUEVSLUlWSVQtSVYwMSIsIkludmFsaWQgSUQgdG9rZW4uIiwiSUQgdG9rZW4gdmFsaWRhdGlvbiByZXR1cm5lZCBmYWxzZSIpKSkpfWRlY29kZUlEVG9rZW4oZSl7dHJ5e2NvbnN0IHQ9dGhpcy5fY3J5cHRvVXRpbHMuYmFzZTY0VVJMRGVjb2RlKGUuc3BsaXQoIi4iKVsxXSk7cmV0dXJuIEpTT04ucGFyc2UodCl9Y2F0Y2goZSl7dGhyb3cgbmV3IGMoIkpTLUNSWVBUT19VVElMLURJVC1JVjAxIiwiRGVjb2RpbmcgSUQgdG9rZW4gZmFpbGVkLiIsZSl9fX1jbGFzcyBoe2NvbnN0cnVjdG9yKGUsbil7dGhpcy5fY3J5cHRvVXRpbHM9bix0aGlzLl9jcnlwdG9IZWxwZXI9bmV3IGQobiksdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXI9bmV3IGwoZSx0aGlzLl9jcnlwdG9IZWxwZXIpLHRoaXMuX2RhdGFMYXllcj1lLHRoaXMuX2NvbmZpZz0oKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpfSkpLHRoaXMuX29pZGNQcm92aWRlck1ldGFEYXRhPSgpPT50KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRPSURDUHJvdmlkZXJNZXRhRGF0YSgpfSkpfWdldEF1dGhvcml6YXRpb25VUkxQYXJhbXMoZSxuKXt2YXIgcixpLG87cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2NvbmZpZygpLHM9bmV3IE1hcDtzLnNldCgicmVzcG9uc2VfdHlwZSIsImNvZGUiKSxzLnNldCgiY2xpZW50X2lkIix0LmNsaWVudElEKSx0LmNsaWVudFNlY3JldCYmdC5jbGllbnRTZWNyZXQudHJpbSgpLmxlbmd0aD4wJiZzLnNldCgiY2xpZW50X3NlY3JldCIsdC5jbGllbnRTZWNyZXQpO2xldCBhPSJvcGVuaWQiO3Quc2NvcGUmJnQuc2NvcGUubGVuZ3RoPjAmJih0LnNjb3BlLmluY2x1ZGVzKCJvcGVuaWQiKXx8dC5zY29wZS5wdXNoKCJvcGVuaWQiKSxhPXQuc2NvcGUuam9pbigiICIpKSxzLnNldCgic2NvcGUiLGEpLHMuc2V0KCJyZWRpcmVjdF91cmkiLHQuc2lnbkluUmVkaXJlY3RVUkwpLHQucmVzcG9uc2VNb2RlJiZzLnNldCgicmVzcG9uc2VfbW9kZSIsdC5yZXNwb25zZU1vZGUpO2NvbnN0IGM9eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIuZ2VuZXJhdGVQS0NFS2V5KG4pO2lmKHQuZW5hYmxlUEtDRSl7Y29uc3QgZT1udWxsPT09KHI9dGhpcy5fY3J5cHRvSGVscGVyKXx8dm9pZCAwPT09cj92b2lkIDA6ci5nZXRDb2RlVmVyaWZpZXIoKSx0PW51bGw9PT0oaT10aGlzLl9jcnlwdG9IZWxwZXIpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmdldENvZGVDaGFsbGVuZ2UoZSk7eWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoYyxlLG4pLHMuc2V0KCJjb2RlX2NoYWxsZW5nZV9tZXRob2QiLCJTMjU2Iikscy5zZXQoImNvZGVfY2hhbGxlbmdlIix0KX10LnByb21wdCYmcy5zZXQoInByb21wdCIsdC5wcm9tcHQpO2NvbnN0IGw9ZTtpZihsKWZvcihjb25zdFtlLHRdb2YgT2JqZWN0LmVudHJpZXMobCkpIiIhPWUmJiIiIT10JiYic3RhdGUiIT09ZSYmcy5zZXQoZSx0LnRvU3RyaW5nKCkpO3JldHVybiBzLnNldCgic3RhdGUiLHUuZ2VuZXJhdGVTdGF0ZVBhcmFtRm9yUmVxdWVzdENvcnJlbGF0aW9uKGMsbD9udWxsPT09KG89bC5zdGF0ZSl8fHZvaWQgMD09PW8/dm9pZCAwOm8udG9TdHJpbmcoKToiIikpLHN9KSl9Z2V0QXV0aG9yaXphdGlvblVSTChlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGFQYXJhbWV0ZXIoImF1dGhvcml6YXRpb25fZW5kcG9pbnQiKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLUdBVS1ORjAxIiwiTm8gYXV0aG9yaXphdGlvbiBlbmRwb2ludCBmb3VuZC4iLCJObyBhdXRob3JpemF0aW9uIGVuZHBvaW50IHdhcyBmb3VuZCBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgZnJvbSB0aGUgd2VsbC1rbm93biBlbmRwb2ludCBvciB0aGUgYXV0aG9yaXphdGlvbiBlbmRwb2ludCBwYXNzZWQgdG8gdGhlIFNESyBpcyBlbXB0eS4iKTtjb25zdCByPW5ldyBVUkwodCksaT15aWVsZCB0aGlzLmdldEF1dGhvcml6YXRpb25VUkxQYXJhbXMoZSxuKTtmb3IoY29uc3RbZSx0XW9mIGkuZW50cmllcygpKXIuc2VhcmNoUGFyYW1zLmFwcGVuZChlLHQpO3JldHVybiByLnRvU3RyaW5nKCl9KSl9cmVxdWVzdEFjY2Vzc1Rva2VuKGUsbixyLGksbyl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PSh5aWVsZCB0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YSgpKS50b2tlbl9lbmRwb2ludCxzPXlpZWxkIHRoaXMuX2NvbmZpZygpO2lmKCF0fHwwPT09dC50cmltKCkubGVuZ3RoKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMS1ORjAxIiwiVG9rZW4gZW5kcG9pbnQgbm90IGZvdW5kLiIsIk5vIHRva2VuIGVuZHBvaW50IHdhcyBmb3VuZCBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIHRva2VuIGVuZHBvaW50IHBhc3NlZCB0byB0aGUgU0RLIGlzIGVtcHR5LiIpO24mJih5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0U2Vzc2lvbkRhdGFQYXJhbWV0ZXIoInNlc3Npb25fc3RhdGUiLG4saSkpO2NvbnN0IGw9bmV3IFVSTFNlYXJjaFBhcmFtcztsLnNldCgiY2xpZW50X2lkIixzLmNsaWVudElEKSxzLmNsaWVudFNlY3JldCYmcy5jbGllbnRTZWNyZXQudHJpbSgpLmxlbmd0aD4wJiZsLnNldCgiY2xpZW50X3NlY3JldCIscy5jbGllbnRTZWNyZXQpO2NvbnN0IGQ9ZTtsZXQgaDtsLnNldCgiY29kZSIsZCksbC5zZXQoImdyYW50X3R5cGUiLCJhdXRob3JpemF0aW9uX2NvZGUiKSxsLnNldCgicmVkaXJlY3RfdXJpIixzLnNpZ25JblJlZGlyZWN0VVJMKSwobnVsbD09bz92b2lkIDA6by5wYXJhbXMpJiZPYmplY3QuZW50cmllcyhvLnBhcmFtcykuZm9yRWFjaCgoZT0+e2xldFt0LG5dPWU7bC5hcHBlbmQodCxuKX0pKSxzLmVuYWJsZVBLQ0UmJihsLnNldCgiY29kZV92ZXJpZmllciIsIiIuY29uY2F0KHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKHUuZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShyKSxpKSkpLHlpZWxkIHRoaXMuX2RhdGFMYXllci5yZW1vdmVUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKHUuZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShyKSxpKSk7dHJ5e2g9eWllbGQgZmV0Y2godCx7Ym9keTpsLGNyZWRlbnRpYWxzOnMuc2VuZENvb2tpZXNJblJlcXVlc3RzP2EuSW5jbHVkZTphLlNhbWVPcmlnaW4saGVhZGVyczpuZXcgSGVhZGVycyh1LmdldFRva2VuUmVxdWVzdEhlYWRlcnMoKSksbWV0aG9kOiJQT1NUIn0pfWNhdGNoKHQpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMS1ORTAyIiwiUmVxdWVzdGluZyBhY2Nlc3MgdG9rZW4gZmFpbGVkIixudWxsIT10P3Q6IlRoZSByZXF1ZXN0IHRvIGdldCB0aGUgYWNjZXNzIHRva2VuIGZyb20gdGhlIHNlcnZlciBmYWlsZWQuIil9aWYoIWgub2spdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQxLUhFMDMiLCJSZXF1ZXN0aW5nIGFjY2VzcyB0b2tlbiBmYWlsZWQgd2l0aCAiLmNvbmNhdChoLnN0YXR1c1RleHQpLHlpZWxkIGguanNvbigpKTtyZXR1cm4geWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIuaGFuZGxlVG9rZW5SZXNwb25zZShoLGkpfSkpfXJlZnJlc2hBY2Nlc3NUb2tlbihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9KHlpZWxkIHRoaXMuX29pZGNQcm92aWRlck1ldGFEYXRhKCkpLnRva2VuX2VuZHBvaW50LG49eWllbGQgdGhpcy5fY29uZmlnKCkscj15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoZSk7aWYoIXIucmVmcmVzaF90b2tlbil0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDItTkYwMSIsIk5vIHJlZnJlc2ggdG9rZW4gZm91bmQuIiwiVGhlcmUgd2FzIG5vIHJlZnJlc2ggdG9rZW4gZm91bmQuIEFzZ2FyZGVvIGRvZXNuJ3QgcmV0dXJuIGEgcmVmcmVzaCB0b2tlbiBpZiB0aGUgcmVmcmVzaCB0b2tlbiBncmFudCBpcyBub3QgZW5hYmxlZC4iKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDItTkYwMiIsIk5vIHJlZnJlc2ggdG9rZW4gZW5kcG9pbnQgZm91bmQuIiwiTm8gcmVmcmVzaCB0b2tlbiBlbmRwb2ludCB3YXMgaW4gdGhlIE9JREMgcHJvdmlkZXIgbWV0YSBkYXRhIHJldHVybmVkIGJ5IHRoZSB3ZWxsLWtub3duIGVuZHBvaW50IG9yIHRoZSByZWZyZXNoIHRva2VuIGVuZHBvaW50IHBhc3NlZCB0byB0aGUgU0RLIGlzIGVtcHR5LiIpO2NvbnN0IGk9W107bGV0IG87aS5wdXNoKCJjbGllbnRfaWQ9Ii5jb25jYXQobi5jbGllbnRJRCkpLGkucHVzaCgicmVmcmVzaF90b2tlbj0iLmNvbmNhdChyLnJlZnJlc2hfdG9rZW4pKSxpLnB1c2goImdyYW50X3R5cGU9cmVmcmVzaF90b2tlbiIpLG4uY2xpZW50U2VjcmV0JiZuLmNsaWVudFNlY3JldC50cmltKCkubGVuZ3RoPjAmJmkucHVzaCgiY2xpZW50X3NlY3JldD0iLmNvbmNhdChuLmNsaWVudFNlY3JldCkpO3RyeXtvPXlpZWxkIGZldGNoKHQse2JvZHk6aS5qb2luKCImIiksY3JlZGVudGlhbHM6bi5zZW5kQ29va2llc0luUmVxdWVzdHM/YS5JbmNsdWRlOmEuU2FtZU9yaWdpbixoZWFkZXJzOm5ldyBIZWFkZXJzKHUuZ2V0VG9rZW5SZXF1ZXN0SGVhZGVycygpKSxtZXRob2Q6IlBPU1QifSl9Y2F0Y2godCl7dGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQyLU5SMDMiLCJSZWZyZXNoIGFjY2VzcyB0b2tlbiByZXF1ZXN0IGZhaWxlZC4iLG51bGwhPXQ/dDoiVGhlIHJlcXVlc3QgdG8gcmVmcmVzaCB0aGUgYWNjZXNzIHRva2VuIGZhaWxlZC4iKX1pZighby5vayl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDItSEUwNCIsIlJlZnJlc2hpbmcgYWNjZXNzIHRva2VuIGZhaWxlZCB3aXRoICIuY29uY2F0KG8uc3RhdHVzVGV4dCkseWllbGQgby5qc29uKCkpO3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5oYW5kbGVUb2tlblJlc3BvbnNlKG8sZSl9KSl9cmV2b2tlQWNjZXNzVG9rZW4oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PSh5aWVsZCB0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YSgpKS5yZXZvY2F0aW9uX2VuZHBvaW50LG49eWllbGQgdGhpcy5fY29uZmlnKCk7aWYoIXR8fDA9PT10LnRyaW0oKS5sZW5ndGgpdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQzLU5GMDEiLCJObyByZXZva2UgYWNjZXNzIHRva2VuIGVuZHBvaW50IGZvdW5kLiIsIk5vIHJldm9rZSBhY2Nlc3MgdG9rZW4gZW5kcG9pbnQgd2FzIGZvdW5kIGluIHRoZSBPSURDIHByb3ZpZGVyIG1ldGEgZGF0YSByZXR1cm5lZCBieSB0aGUgd2VsbC1rbm93biBlbmRwb2ludCBvciB0aGUgcmV2b2tlIGFjY2VzcyB0b2tlbiBlbmRwb2ludCBwYXNzZWQgdG8gdGhlIFNESyBpcyBlbXB0eS4iKTtjb25zdCByPVtdO2xldCBpO3IucHVzaCgiY2xpZW50X2lkPSIuY29uY2F0KG4uY2xpZW50SUQpKSxyLnB1c2goInRva2VuPSIuY29uY2F0KCh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoZSkpLmFjY2Vzc190b2tlbikpLHIucHVzaCgidG9rZW5fdHlwZV9oaW50PWFjY2Vzc190b2tlbiIpO3RyeXtpPXlpZWxkIGZldGNoKHQse2JvZHk6ci5qb2luKCImIiksY3JlZGVudGlhbHM6bi5zZW5kQ29va2llc0luUmVxdWVzdHM/YS5JbmNsdWRlOmEuU2FtZU9yaWdpbixoZWFkZXJzOm5ldyBIZWFkZXJzKHUuZ2V0VG9rZW5SZXF1ZXN0SGVhZGVycygpKSxtZXRob2Q6IlBPU1QifSl9Y2F0Y2godCl7dGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQzLU5FMDIiLCJUaGUgcmVxdWVzdCB0byByZXZva2UgYWNjZXNzIHRva2VuIGZhaWxlZC4iLG51bGwhPXQ/dDoiVGhlIHJlcXVlc3Qgc2VudCB0byByZXZva2UgdGhlIGFjY2VzcyB0b2tlbiBmYWlsZWQuIil9aWYoMjAwIT09aS5zdGF0dXN8fCFpLm9rKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMy1IRTAzIiwiSW52YWxpZCByZXNwb25zZSBzdGF0dXMgcmVjZWl2ZWQgZm9yIHJldm9rZSBhY2Nlc3MgdG9rZW4gcmVxdWVzdCAoIi5jb25jYXQoaS5zdGF0dXNUZXh0LCIpLiIpLHlpZWxkIGkuanNvbigpKTtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIuY2xlYXJVc2VyU2Vzc2lvbkRhdGEoZSksUHJvbWlzZS5yZXNvbHZlKGkpfSkpfXJlcXVlc3RDdXN0b21HcmFudChlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcj15aWVsZCB0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YSgpLGk9eWllbGQgdGhpcy5fY29uZmlnKCk7bGV0IG87aWYobz1lLnRva2VuRW5kcG9pbnQmJjAhPT1lLnRva2VuRW5kcG9pbnQudHJpbSgpLmxlbmd0aD9lLnRva2VuRW5kcG9pbnQ6ci50b2tlbl9lbmRwb2ludCwhb3x8MD09PW8udHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJDRy1ORjAxIiwiVG9rZW4gZW5kcG9pbnQgbm90IGZvdW5kLiIsIk5vIHRva2VuIGVuZHBvaW50IHdhcyBmb3VuZCBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIHRva2VuIGVuZHBvaW50IHBhc3NlZCB0byB0aGUgU0RLIGlzIGVtcHR5LiIpO2NvbnN0IHM9eWllbGQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXMoZS5kYXRhKS5tYXAoKGU9PntsZXRbcixpXT1lO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT15aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5yZXBsYWNlQ3VzdG9tR3JhbnRUZW1wbGF0ZVRhZ3MoaSxuKTtyZXR1cm4iIi5jb25jYXQociwiPSIpLmNvbmNhdChlKX0pKX0pKSk7bGV0IGw9T2JqZWN0LmFzc2lnbih7fSx1LmdldFRva2VuUmVxdWVzdEhlYWRlcnMoKSk7ZS5hdHRhY2hUb2tlbiYmKGw9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGwpLHtBdXRob3JpemF0aW9uOiJCZWFyZXIgIi5jb25jYXQoKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShuKSkuYWNjZXNzX3Rva2VuKX0pKTtjb25zdCBkPXtib2R5OnMuam9pbigiJiIpLGNyZWRlbnRpYWxzOmkuc2VuZENvb2tpZXNJblJlcXVlc3RzP2EuSW5jbHVkZTphLlNhbWVPcmlnaW4saGVhZGVyczpuZXcgSGVhZGVycyhsKSxtZXRob2Q6IlBPU1QifTtsZXQgaDt0cnl7aD15aWVsZCBmZXRjaChvLGQpfWNhdGNoKGUpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkNHLU5FMDIiLCJUaGUgY3VzdG9tIGdyYW50IHJlcXVlc3QgZmFpbGVkLiIsbnVsbCE9ZT9lOiJUaGUgcmVxdWVzdCBzZW50IHRvIGdldCB0aGUgY3VzdG9tIGdyYW50IGZhaWxlZC4iKX1pZigyMDAhPT1oLnN0YXR1c3x8IWgub2spdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQ0ctSEUwMyIsIkludmFsaWQgcmVzcG9uc2Ugc3RhdHVzIHJlY2VpdmVkIGZvciB0aGUgY3VzdG9tIGdyYW50IHJlcXVlc3QuICgiLmNvbmNhdChoLnN0YXR1c1RleHQsIikiKSx5aWVsZCBoLmpzb24oKSk7cmV0dXJuIGUucmV0dXJuc1Nlc3Npb24/dGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIuaGFuZGxlVG9rZW5SZXNwb25zZShoLG4pOlByb21pc2UucmVzb2x2ZSh5aWVsZCBoLmpzb24oKSl9KSl9Z2V0QmFzaWNVc2VySW5mbyhlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKGUpLG49dGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0QXV0aGVudGljYXRlZFVzZXJJbmZvKG51bGw9PXQ/dm9pZCAwOnQuaWRfdG9rZW4pO2xldCByPXthbGxvd2VkU2NvcGVzOnQuc2NvcGUsc2Vzc2lvblN0YXRlOnQuc2Vzc2lvbl9zdGF0ZX07cmV0dXJuIE9iamVjdC5rZXlzKG4pLmZvckVhY2goKGU9Pnt2b2lkIDAhPT1uW2VdJiYiIiE9PW5bZV0mJm51bGwhPT1uW2VdfHxkZWxldGUgbltlXX0pKSxyPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSxuKSxyfSkpfWdldERlY29kZWRJRFRva2VuKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD0oeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKGUpKS5pZF90b2tlbjtyZXR1cm4gdGhpcy5fY3J5cHRvSGVscGVyLmRlY29kZUlEVG9rZW4odCl9KSl9Z2V0Q3J5cHRvSGVscGVyKCl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fY3J5cHRvSGVscGVyfSkpfWdldElEVG9rZW4oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4oeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKGUpKS5pZF90b2tlbn0pKX1nZXRPSURDUHJvdmlkZXJNZXRhRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fY29uZmlnKCk7aWYoIWUmJih5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcigib3BfY29uZmlnX2luaXRpYXRlZCIpKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3Qgbj10LndlbGxLbm93bkVuZHBvaW50O2lmKG4pe2xldCBlO3RyeXtpZihlPXlpZWxkIGZldGNoKG4pLDIwMCE9PWUuc3RhdHVzfHwhZS5vayl0aHJvdyBuZXcgRXJyb3J9Y2F0Y2godCl7dGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1HT1BNRC1IRTAxIiwiSW52YWxpZCB3ZWxsLWtub3duIHJlc3BvbnNlIiwiVGhlIHdlbGwga25vd24gZW5kcG9pbnQgcmVzcG9uc2UgaGFzIGJlZW4gZmFpbGVkIHdpdGggYW4gZXJyb3IuIil9cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRPSURDUHJvdmlkZXJNZXRhRGF0YSh5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5yZXNvbHZlRW5kcG9pbnRzKHlpZWxkIGUuanNvbigpKSkseWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoIm9wX2NvbmZpZ19pbml0aWF0ZWQiLCEwKSxQcm9taXNlLnJlc29sdmUoKX1pZih0LmJhc2VVcmwpe3RyeXt5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoeWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIucmVzb2x2ZUVuZHBvaW50c0J5QmFzZVVSTCgpKX1jYXRjaCh0KXt0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLUdPUE1ELUlWMDIiLCJSZXNvbHZpbmcgZW5kcG9pbnRzIGZhaWxlZC4iLG51bGwhPXQ/dDoiUmVzb2x2aW5nIGVuZHBvaW50cyBieSBiYXNlIHVybCBmYWlsZWQuIil9cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKCJvcF9jb25maWdfaW5pdGlhdGVkIiwhMCksUHJvbWlzZS5yZXNvbHZlKCl9cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRPSURDUHJvdmlkZXJNZXRhRGF0YSh5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5yZXNvbHZlRW5kcG9pbnRzRXhwbGljaXRseSgpKSx5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcigib3BfY29uZmlnX2luaXRpYXRlZCIsITApLFByb21pc2UucmVzb2x2ZSgpfSkpfWdldE9JRENTZXJ2aWNlRW5kcG9pbnRzKCl7dmFyIGUsbixyLGksbyxzLGEsYyx1LGw7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX29pZGNQcm92aWRlck1ldGFEYXRhKCk7cmV0dXJue2F1dGhvcml6YXRpb25FbmRwb2ludDpudWxsIT09KGU9dC5hdXRob3JpemF0aW9uX2VuZHBvaW50KSYmdm9pZCAwIT09ZT9lOiIiLGNoZWNrU2Vzc2lvbklmcmFtZTpudWxsIT09KG49dC5jaGVja19zZXNzaW9uX2lmcmFtZSkmJnZvaWQgMCE9PW4/bjoiIixlbmRTZXNzaW9uRW5kcG9pbnQ6bnVsbCE9PShyPXQuZW5kX3Nlc3Npb25fZW5kcG9pbnQpJiZ2b2lkIDAhPT1yP3I6IiIsaW50cm9zcGVjdGlvbkVuZHBvaW50Om51bGwhPT0oaT10LmludHJvc3BlY3Rpb25fZW5kcG9pbnQpJiZ2b2lkIDAhPT1pP2k6IiIsaXNzdWVyOm51bGwhPT0obz10Lmlzc3VlcikmJnZvaWQgMCE9PW8/bzoiIixqd2tzVXJpOm51bGwhPT0ocz10Lmp3a3NfdXJpKSYmdm9pZCAwIT09cz9zOiIiLHJlZ2lzdHJhdGlvbkVuZHBvaW50Om51bGwhPT0oYT10LnJlZ2lzdHJhdGlvbl9lbmRwb2ludCkmJnZvaWQgMCE9PWE/YToiIixyZXZvY2F0aW9uRW5kcG9pbnQ6bnVsbCE9PShjPXQucmV2b2NhdGlvbl9lbmRwb2ludCkmJnZvaWQgMCE9PWM/YzoiIix0b2tlbkVuZHBvaW50Om51bGwhPT0odT10LnRva2VuX2VuZHBvaW50KSYmdm9pZCAwIT09dT91OiIiLHVzZXJpbmZvRW5kcG9pbnQ6bnVsbCE9PShsPXQudXNlcmluZm9fZW5kcG9pbnQpJiZ2b2lkIDAhPT1sP2w6IiJ9fSkpfWdldFNpZ25PdXRVUkwoZSl7dmFyIG4scixpO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1udWxsPT09KG49eWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZW5kX3Nlc3Npb25fZW5kcG9pbnQsbz15aWVsZCB0aGlzLl9jb25maWcoKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLUdTT1UtTkYwMSIsIlNpZ24tb3V0IGVuZHBvaW50IG5vdCBmb3VuZC4iLCJObyBzaWduLW91dCBlbmRwb2ludCB3YXMgZm91bmQgaW4gdGhlIE9JREMgcHJvdmlkZXIgbWV0YSBkYXRhIHJldHVybmVkIGJ5IHRoZSB3ZWxsLWtub3duIGVuZHBvaW50IG9yIHRoZSBzaWduLW91dCBlbmRwb2ludCBwYXNzZWQgdG8gdGhlIFNESyBpcyBlbXB0eS4iKTtjb25zdCBzPW51bGwhPT0ocj1udWxsPT1vP3ZvaWQgMDpvLnNpZ25PdXRSZWRpcmVjdFVSTCkmJnZvaWQgMCE9PXI/cjpudWxsPT1vP3ZvaWQgMDpvLnNpZ25JblJlZGlyZWN0VVJMO2lmKCFzfHwwPT09cy50cmltKCkubGVuZ3RoKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtR1NPVS1ORjAzIiwiTm8gc2lnbi1vdXQgcmVkaXJlY3QgVVJMIGZvdW5kLiIsIlRoZSBzaWduLW91dCByZWRpcmVjdCBVUkwgY2Fubm90IGJlIGZvdW5kIG9yIHRoZSBVUkwgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIE5vIHNpZ24taW4gcmVkaXJlY3QgVVJMIGhhcyBiZWVuIGZvdW5kIGVpdGhlci4gIik7Y29uc3QgYT1uZXcgVVJMU2VhcmNoUGFyYW1zO2lmKGEuc2V0KCJwb3N0X2xvZ291dF9yZWRpcmVjdF91cmkiLHMpLG8uc2VuZElkVG9rZW5JbkxvZ291dFJlcXVlc3Qpe2NvbnN0IHQ9bnVsbD09PShpPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuaWRfdG9rZW47aWYoIXR8fDA9PT10LnRyaW0oKS5sZW5ndGgpdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1HU09VLU5GMDIiLCJJRCB0b2tlbiBub3QgZm91bmQuIiwiTm8gSUQgdG9rZW4gY291bGQgYmUgZm91bmQuIEVpdGhlciB0aGUgc2Vzc2lvbiBpbmZvcm1hdGlvbiBpcyBsb3N0IG9yIHlvdSBoYXZlIG5vdCBzaWduZWQgaW4uIik7YS5zZXQoImlkX3Rva2VuX2hpbnQiLHQpfWVsc2UgYS5zZXQoImNsaWVudF9pZCIsby5jbGllbnRJRCk7cmV0dXJuIGEuc2V0KCJzdGF0ZSIsInNpZ25fb3V0X3N1Y2Nlc3MiKSwiIi5jb25jYXQodCwiPyIpLmNvbmNhdChhLnRvU3RyaW5nKCkpfSkpfWNsZWFyVXNlclNlc3Npb25EYXRhKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXIuY2xlYXJVc2VyU2Vzc2lvbkRhdGEoZSl9KSl9Z2V0QWNjZXNzVG9rZW4oZSl7dmFyIG47cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gbnVsbD09PShuPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uYWNjZXNzX3Rva2VufSkpfWdldENyZWF0ZWRBdChlKXt2YXIgbjtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBudWxsPT09KG49eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKGUpKXx8dm9pZCAwPT09bj92b2lkIDA6bi5jcmVhdGVkX2F0fSkpfWdldEV4cGlyZXNJbihlKXt2YXIgbjtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBudWxsPT09KG49eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKGUpKXx8dm9pZCAwPT09bj92b2lkIDA6bi5leHBpcmVzX2lufSkpfWlzQXV0aGVudGljYXRlZChlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9Qm9vbGVhbih5aWVsZCB0aGlzLmdldEFjY2Vzc1Rva2VuKGUpKSxuPXlpZWxkIHRoaXMuZ2V0Q3JlYXRlZEF0KGUpLHI9eWllbGQgdGhpcy5nZXRFeHBpcmVzSW4oZSk7aWYoIXIpcmV0dXJuITE7Y29uc3QgaT0xZTMqcGFyc2VJbnQociksbz0obmV3IERhdGUpLmdldFRpbWUoKTtyZXR1cm4gdCYmbitpPm99KSl9Z2V0UEtDRUNvZGUoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcih1LmV4dHJhY3RQS0NFS2V5RnJvbVN0YXRlUGFyYW0oZSksbil9KSl9c2V0UEtDRUNvZGUoZSxuLHIpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKHUuZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShuKSxlLHIpfSkpfXVwZGF0ZUNvbmZpZyhlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRDb25maWdEYXRhKGUpLHlpZWxkIHRoaXMuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoITApfSkpfX1jbGFzcyBme2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5faWQ9ZSx0aGlzLl9zdG9yZT10fXNldERhdGFJbkJ1bGsoZSxuKXt2YXIgcjtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9bnVsbCE9PShyPXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEoZSkpJiZ2b2lkIDAhPT1yP3I6bnVsbCxpPXQmJkpTT04ucGFyc2UodCksbz1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSksbikscz1KU09OLnN0cmluZ2lmeShvKTt5aWVsZCB0aGlzLl9zdG9yZS5zZXREYXRhKGUscyl9KSl9c2V0VmFsdWUoZSxuLHIpe3ZhciBpO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1udWxsIT09KGk9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YShlKSkmJnZvaWQgMCE9PWk/aTpudWxsLG89dCYmSlNPTi5wYXJzZSh0KSxzPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxvKSx7W25dOnJ9KSxhPUpTT04uc3RyaW5naWZ5KHMpO3lpZWxkIHRoaXMuX3N0b3JlLnNldERhdGEoZSxhKX0pKX1yZW1vdmVWYWx1ZShlLG4pe3ZhciByO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1udWxsIT09KHI9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YShlKSkmJnZvaWQgMCE9PXI/cjpudWxsLGk9dCYmSlNPTi5wYXJzZSh0KSxvPU9iamVjdC5hc3NpZ24oe30saSk7ZGVsZXRlIG9bbl07Y29uc3Qgcz1KU09OLnN0cmluZ2lmeShvKTt5aWVsZCB0aGlzLl9zdG9yZS5zZXREYXRhKGUscyl9KSl9X3Jlc29sdmVLZXkoZSx0KXtyZXR1cm4gdD8iIi5jb25jYXQoZSwiLSIpLmNvbmNhdCh0aGlzLl9pZCwiLSIpLmNvbmNhdCh0KToiIi5jb25jYXQoZSwiLSIpLmNvbmNhdCh0aGlzLl9pZCl9aXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKXt0cnl7Y29uc3QgZT0iX19BU0dBUkRFT19BVVRIX0NPUkVfTE9DQUxfU1RPUkFHRV9URVNUX18iO3JldHVybiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShlLGUpLGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUpLCEwfWNhdGNoKGUpe3JldHVybiExfX1zZXRDb25maWdEYXRhKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZXREYXRhSW5CdWxrKHRoaXMuX3Jlc29sdmVLZXkoci5Db25maWdEYXRhKSxlKX0pKX1zZXRPSURDUHJvdmlkZXJNZXRhRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuc2V0RGF0YUluQnVsayh0aGlzLl9yZXNvbHZlS2V5KHIuT0lEQ1Byb3ZpZGVyTWV0YURhdGEpLGUpfSkpfXNldFRlbXBvcmFyeURhdGEoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuc2V0RGF0YUluQnVsayh0aGlzLl9yZXNvbHZlS2V5KHIuVGVtcG9yYXJ5RGF0YSxuKSxlKX0pKX1zZXRTZXNzaW9uRGF0YShlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5zZXREYXRhSW5CdWxrKHRoaXMuX3Jlc29sdmVLZXkoci5TZXNzaW9uRGF0YSxuKSxlKX0pKX1zZXRDdXN0b21EYXRhKGUsbixyKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuc2V0RGF0YUluQnVsayh0aGlzLl9yZXNvbHZlS2V5KGUsciksbil9KSl9Z2V0Q29uZmlnRGF0YSgpe3ZhciBlO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIEpTT04ucGFyc2UobnVsbCE9PShlPXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShyLkNvbmZpZ0RhdGEpKSkmJnZvaWQgMCE9PWU/ZTpudWxsKX0pKX1nZXRPSURDUHJvdmlkZXJNZXRhRGF0YSgpe3ZhciBlO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIEpTT04ucGFyc2UobnVsbCE9PShlPXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShyLk9JRENQcm92aWRlck1ldGFEYXRhKSkpJiZ2b2lkIDAhPT1lP2U6bnVsbCl9KSl9Z2V0VGVtcG9yYXJ5RGF0YShlKXt2YXIgbjtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBKU09OLnBhcnNlKG51bGwhPT0obj15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5UZW1wb3JhcnlEYXRhLGUpKSkmJnZvaWQgMCE9PW4/bjpudWxsKX0pKX1nZXRTZXNzaW9uRGF0YShlKXt2YXIgbjtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBKU09OLnBhcnNlKG51bGwhPT0obj15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5TZXNzaW9uRGF0YSxlKSkpJiZ2b2lkIDAhPT1uP246bnVsbCl9KSl9Z2V0Q3VzdG9tRGF0YShlLG4pe3ZhciByO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIEpTT04ucGFyc2UobnVsbCE9PShyPXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShlLG4pKSkmJnZvaWQgMCE9PXI/cjpudWxsKX0pKX1zZXRTZXNzaW9uU3RhdHVzKGUpe3RoaXMuaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSYmbG9jYWxTdG9yYWdlLnNldEl0ZW0oImFzZ2FyZGVvLXNlc3Npb24tYWN0aXZlIixlKX1nZXRTZXNzaW9uU3RhdHVzKCl7dmFyIGU7cmV0dXJuIHRoaXMuaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSYmbnVsbCE9PShlPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhc2dhcmRlby1zZXNzaW9uLWFjdGl2ZSIpKSYmdm9pZCAwIT09ZT9lOiIifXJlbW92ZVNlc3Npb25TdGF0dXMoKXt0aGlzLmlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCkmJmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJhc2dhcmRlby1zZXNzaW9uLWFjdGl2ZSIpfXJlbW92ZUNvbmZpZ0RhdGEoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX3N0b3JlLnJlbW92ZURhdGEodGhpcy5fcmVzb2x2ZUtleShyLkNvbmZpZ0RhdGEpKX0pKX1yZW1vdmVPSURDUHJvdmlkZXJNZXRhRGF0YSgpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fc3RvcmUucmVtb3ZlRGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuT0lEQ1Byb3ZpZGVyTWV0YURhdGEpKX0pKX1yZW1vdmVUZW1wb3JhcnlEYXRhKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fc3RvcmUucmVtb3ZlRGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuVGVtcG9yYXJ5RGF0YSxlKSl9KSl9cmVtb3ZlU2Vzc2lvbkRhdGEoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9zdG9yZS5yZW1vdmVEYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5TZXNzaW9uRGF0YSxlKSl9KSl9Z2V0Q29uZmlnRGF0YVBhcmFtZXRlcihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuQ29uZmlnRGF0YSkpO3JldHVybiB0JiZKU09OLnBhcnNlKHQpW2VdfSkpfWdldE9JRENQcm92aWRlck1ldGFEYXRhUGFyYW1ldGVyKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5PSURDUHJvdmlkZXJNZXRhRGF0YSkpO3JldHVybiB0JiZKU09OLnBhcnNlKHQpW2VdfSkpfWdldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuVGVtcG9yYXJ5RGF0YSxuKSk7cmV0dXJuIHQmJkpTT04ucGFyc2UodClbZV19KSl9Z2V0U2Vzc2lvbkRhdGFQYXJhbWV0ZXIoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuU2Vzc2lvbkRhdGEsbikpO3JldHVybiB0JiZKU09OLnBhcnNlKHQpW2VdfSkpfXNldENvbmZpZ0RhdGFQYXJhbWV0ZXIoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2V0VmFsdWUodGhpcy5fcmVzb2x2ZUtleShyLkNvbmZpZ0RhdGEpLGUsbil9KSl9c2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGFQYXJhbWV0ZXIoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2V0VmFsdWUodGhpcy5fcmVzb2x2ZUtleShyLk9JRENQcm92aWRlck1ldGFEYXRhKSxlLG4pfSkpfXNldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoZSxuLGkpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZXRWYWx1ZSh0aGlzLl9yZXNvbHZlS2V5KHIuVGVtcG9yYXJ5RGF0YSxpKSxlLG4pfSkpfXNldFNlc3Npb25EYXRhUGFyYW1ldGVyKGUsbixpKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2V0VmFsdWUodGhpcy5fcmVzb2x2ZUtleShyLlNlc3Npb25EYXRhLGkpLGUsbil9KSl9cmVtb3ZlQ29uZmlnRGF0YVBhcmFtZXRlcihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucmVtb3ZlVmFsdWUodGhpcy5fcmVzb2x2ZUtleShyLkNvbmZpZ0RhdGEpLGUpfSkpfXJlbW92ZU9JRENQcm92aWRlck1ldGFEYXRhUGFyYW1ldGVyKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5yZW1vdmVWYWx1ZSh0aGlzLl9yZXNvbHZlS2V5KHIuT0lEQ1Byb3ZpZGVyTWV0YURhdGEpLGUpfSkpfXJlbW92ZVRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucmVtb3ZlVmFsdWUodGhpcy5fcmVzb2x2ZUtleShyLlRlbXBvcmFyeURhdGEsbiksZSl9KSl9cmVtb3ZlU2Vzc2lvbkRhdGFQYXJhbWV0ZXIoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucmVtb3ZlVmFsdWUodGhpcy5fcmVzb2x2ZUtleShyLlNlc3Npb25EYXRhLG4pLGUpfSkpfX1jb25zdCBwPXtjbG9ja1RvbGVyYW5jZTozMDAsZW5hYmxlUEtDRTohMCxyZXNwb25zZU1vZGU6bi5xdWVyeSxzY29wZTpbIm9wZW5pZCJdLHNlbmRDb29raWVzSW5SZXF1ZXN0czohMCx2YWxpZGF0ZUlEVG9rZW46ITAsdmFsaWRhdGVJRFRva2VuSXNzdWVyOiEwfTtjbGFzcyBnewovKioKICAgICAgICAgICAqIFRoaXMgaXMgdGhlIGNvbnN0cnVjdG9yIG1ldGhvZCB0aGF0IHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgdGhlIC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gc3RvcmUgLSBUaGUgc3RvcmUgb2JqZWN0LgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGNvbnN0IF9zdG9yZTogU3RvcmUgPSBuZXcgRGF0YVN0b3JlKCk7CiAgICAgICAgICAgKiBjb25zdCBhdXRoID0gbmV3IEFzZ2FyZGVvQXV0aENsaWVudDxDdXN0b21DbGllbnRDb25maWc+KF9zdG9yZSk7CiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI2NvbnN0cnVjdG9yfQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovCmNvbnN0cnVjdG9yKCl7fQovKioKICAgICAgICAgICAqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCBpbml0aWFsaXplcyB0aGUgU0RLIHdpdGggdGhlIGNvbmZpZyBkYXRhLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgY29uZmlnIG9iamVjdCB0byBpbml0aWFsaXplIHdpdGguCiAgICAgICAgICAgKgogICAgICAgICAgICogQGV4YW1wbGUKICAgICAgICAgICAqIGNvbnN0IGNvbmZpZyA9IFx7CiAgICAgICAgICAgKiAgICAgc2lnbkluUmVkaXJlY3RVUkw6ICJodHRwOi8vbG9jYWxob3N0OjMwMDAvc2lnbi1pbiIsCiAgICAgICAgICAgKiAgICAgY2xpZW50SUQ6ICJjbGllbnQgSUQiLAogICAgICAgICAgICogICAgIGJhc2VVcmw6ICJodHRwczovL2xvY2FsaG9zdDo5NDQzIgogICAgICAgICAgICogXH0KICAgICAgICAgICAqCiAgICAgICAgICAgKiBhd2FpdCBhdXRoLmluaXRpYWxpemUoY29uZmlnKTsKICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI2luaXRpYWxpemV9CiAgICAgICAgICAgKgogICAgICAgICAgICogQHByZXNlcnZlCiAgICAgICAgICAgKi9pbml0aWFsaXplKGUsbixyLGkpe3ZhciBvLHMsYTtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9ZS5jbGllbnRJRDtnLl9pbnN0YW5jZUlEP2cuX2luc3RhbmNlSUQrPTE6Zy5faW5zdGFuY2VJRD0wLGkmJihnLl9pbnN0YW5jZUlEPWkpLHRoaXMuX2RhdGFMYXllcj1uZXcgZih0PyJpbnN0YW5jZV8iLmNvbmNhdChnLl9pbnN0YW5jZUlELCItIikuY29uY2F0KHQpOiJpbnN0YW5jZV8iLmNvbmNhdChnLl9pbnN0YW5jZUlEKSxuKSx0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmU9bmV3IGgodGhpcy5fZGF0YUxheWVyLHIpLGcuX2F1dGhlbnRpY2F0aW9uQ29yZT1uZXcgaCh0aGlzLl9kYXRhTGF5ZXIscikseWllbGQgdGhpcy5fZGF0YUxheWVyLnNldENvbmZpZ0RhdGEoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scCksZSkse3Njb3BlOlsuLi5udWxsIT09KG89cC5zY29wZSkmJnZvaWQgMCE9PW8/bzpbXSwuLi5udWxsIT09KGE9bnVsbD09PShzPWUuc2NvcGUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmZpbHRlcigoZT0+e3ZhciB0O3JldHVybiEobnVsbD09PSh0PW51bGw9PXA/dm9pZCAwOnAuc2NvcGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmluY2x1ZGVzKGUpKX0pKSkmJnZvaWQgMCE9PWE/YTpbXV19KSl9KSl9Ci8qKgogICAgICAgICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgYERhdGFMYXllcmAgb2JqZWN0IHRoYXQgYWxsb3dzIHlvdSB0byBhY2Nlc3MgYXV0aGVudGljYXRpb24gZGF0YS4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIFRoZSBgRGF0YUxheWVyYCBvYmplY3QuCiAgICAgICAgICAgKgogICAgICAgICAgICogQGV4YW1wbGUKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICogY29uc3QgZGF0YSA9IGF1dGguZ2V0RGF0YUxheWVyKCk7CiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI2dldERhdGFMYXllcn0KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcHJlc2VydmUKICAgICAgICAgICAqL2dldERhdGFMYXllcigpe3JldHVybiB0aGlzLl9kYXRhTGF5ZXJ9Ci8qKgogICAgICAgICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgYGluc3RhbmNlSURgIHZhcmlhYmxlIG9mIHRoZSBnaXZlbiBpbnN0YW5jZS4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIFRoZSBgaW5zdGFuY2VJRGAgbnVtYmVyLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGNvbnN0IGluc3RhbmNlSWQgPSBhdXRoLmdldEluc3RhbmNlSUQoKTsKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovZ2V0SW5zdGFuY2VJRCgpe3JldHVybiBnLl9pbnN0YW5jZUlEfQovKioKICAgICAgICAgKiBUaGlzIGlzIGFuIGFzeW5jIG1ldGhvZCB0aGF0IHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgYXV0aG9yaXphdGlvbiBVUkwgcGFyYW1ldGVycy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBjb25maWcgLSAoT3B0aW9uYWwpIEEgY29uZmlnIG9iamVjdCB0byBmb3JjZSBpbml0aWFsaXphdGlvbiBhbmQgcGFzcwogICAgICAgICAqIGN1c3RvbSBwYXRoIHBhcmFtZXRlcnMgc3VjaCBhcyB0aGUgYGZpZHBgIHBhcmFtZXRlci4KICAgICAgICAgKiBAcGFyYW0gdXNlcklEIC0gKE9wdGlvbmFsKSBBIHVuaXF1ZSBJRCBvZiB0aGUgdXNlciB0byBiZSBhdXRoZW50aWNhdGVkLiBUaGlzIGlzIHVzZWZ1bCBpbiBtdWx0aS11c2VyCiAgICAgICAgICogc2NlbmFyaW9zIHdoZXJlIGVhY2ggdXNlciBzaG91bGQgYmUgdW5pcXVlbHkgaWRlbnRpZmllZC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm5zIC0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgYXV0aG9yaXphdGlvbiBVUkwgcGFyYW1ldGVycy4KICAgICAgICAgKgogICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICogYGBgCiAgICAgICAgICogYXV0aC5nZXRBdXRob3JpemF0aW9uVVJMUGFyYW1zKCkudGhlbigocGFyYW1zKT0+ewogICAgICAgICAqICAvLyBjb25zb2xlLmxvZyhwYXJhbXMpOwogICAgICAgICAqIH0pLmNhdGNoKChlcnJvcik9PnsKICAgICAgICAgKiAgLy8gY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICogfSk7CiAgICAgICAgICogYGBgCiAgICAgICAgICoKICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI2dldEF1dGhvcml6YXRpb25VUkxQYXJhbXN9CiAgICAgICAgICoKICAgICAgICAgKiBAcHJlc2VydmUKICAgICAgICAgKi9nZXRBdXRob3JpemF0aW9uVVJMUGFyYW1zKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PU9iamVjdC5hc3NpZ24oe30sZSk7cmV0dXJuIG51bGw9PXR8fGRlbGV0ZSB0LmZvcmNlSW5pdCwoeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoIm9wX2NvbmZpZ19pbml0aWF0ZWQiKSk/dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldEF1dGhvcml6YXRpb25VUkxQYXJhbXModCxuKTp0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEobnVsbD09ZT92b2lkIDA6ZS5mb3JjZUluaXQpLnRoZW4oKCgpPT50aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0QXV0aG9yaXphdGlvblVSTFBhcmFtcyh0LG4pKSl9KSl9Ci8qKgogICAgICAgICAgICogVGhpcyBpcyBhbiBhc3luYyBtZXRob2QgdGhhdCByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGF1dGhvcml6YXRpb24gVVJMLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBwYXJhbSBjb25maWcgLSAoT3B0aW9uYWwpIEEgY29uZmlnIG9iamVjdCB0byBmb3JjZSBpbml0aWFsaXphdGlvbiBhbmQgcGFzcwogICAgICAgICAgICogY3VzdG9tIHBhdGggcGFyYW1ldGVycyBzdWNoIGFzIHRoZSBmaWRwIHBhcmFtZXRlci4KICAgICAgICAgICAqIEBwYXJhbSB1c2VySUQgLSAoT3B0aW9uYWwpIEEgdW5pcXVlIElEIG9mIHRoZSB1c2VyIHRvIGJlIGF1dGhlbnRpY2F0ZWQuIFRoaXMgaXMgdXNlZnVsIGluIG11bHRpLXVzZXIKICAgICAgICAgICAqIHNjZW5hcmlvcyB3aGVyZSBlYWNoIHVzZXIgc2hvdWxkIGJlIHVuaXF1ZWx5IGlkZW50aWZpZWQuCiAgICAgICAgICAgKgogICAgICAgICAgICogQHJldHVybnMgLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBhdXRob3JpemF0aW9uIFVSTC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAZXhhbXBsZQogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKiBhdXRoLmdldEF1dGhvcml6YXRpb25VUkwoKS50aGVuKCh1cmwpPT57CiAgICAgICAgICAgKiAgLy8gY29uc29sZS5sb2codXJsKTsKICAgICAgICAgICAqIH0pLmNhdGNoKChlcnJvcik9PnsKICAgICAgICAgICAqICAvLyBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAqIH0pOwogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKgogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciNnZXRBdXRob3JpemF0aW9uVVJMfQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovZ2V0QXV0aG9yaXphdGlvblVSTChlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1PYmplY3QuYXNzaWduKHt9LGUpO3JldHVybiBudWxsPT10fHxkZWxldGUgdC5mb3JjZUluaXQsKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKCJvcF9jb25maWdfaW5pdGlhdGVkIikpP3RoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRBdXRob3JpemF0aW9uVVJMKHQsbik6dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldE9JRENQcm92aWRlck1ldGFEYXRhKG51bGw9PWU/dm9pZCAwOmUuZm9yY2VJbml0KS50aGVuKCgoKT0+dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldEF1dGhvcml6YXRpb25VUkwodCxuKSkpfSkpfQovKioKICAgICAgICAgICAqIFRoaXMgaXMgYW4gYXN5bmMgbWV0aG9kIHRoYXQgc2VuZHMgYSByZXF1ZXN0IHRvIG9idGFpbiB0aGUgYWNjZXNzIHRva2VuIGFuZCByZXR1cm5zIGEgUHJvbWlzZQogICAgICAgICAgICogdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0b2tlbiBhbmQgb3RoZXIgcmVsZXZhbnQgZGF0YS4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvbkNvZGUgLSBUaGUgYXV0aG9yaXphdGlvbiBjb2RlLgogICAgICAgICAgICogQHBhcmFtIHNlc3Npb25TdGF0ZSAtIFRoZSBzZXNzaW9uIHN0YXRlLgogICAgICAgICAgICogQHBhcmFtIHVzZXJJRCAtIChPcHRpb25hbCkgQSB1bmlxdWUgSUQgb2YgdGhlIHVzZXIgdG8gYmUgYXV0aGVudGljYXRlZC4gVGhpcyBpcyB1c2VmdWwgaW4gbXVsdGktdXNlcgogICAgICAgICAgICogc2NlbmFyaW9zIHdoZXJlIGVhY2ggdXNlciBzaG91bGQgYmUgdW5pcXVlbHkgaWRlbnRpZmllZC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHRva2VuIHJlc3BvbnNlLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGF1dGgucmVxdWVzdEFjY2Vzc1Rva2VuKGF1dGhDb2RlLCBzZXNzaW9uU3RhdGUpLnRoZW4oKHRva2VuKT0+ewogICAgICAgICAgICogIC8vIGNvbnNvbGUubG9nKHRva2VuKTsKICAgICAgICAgICAqIH0pLmNhdGNoKChlcnJvcik9PnsKICAgICAgICAgICAqICAvLyBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAqIH0pOwogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKgogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciNyZXF1ZXN0QWNjZXNzVG9rZW59CiAgICAgICAgICAgKgogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovcmVxdWVzdEFjY2Vzc1Rva2VuKGUsbixyLGksbyl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4oeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoIm9wX2NvbmZpZ19pbml0aWF0ZWQiKSk/dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLnJlcXVlc3RBY2Nlc3NUb2tlbihlLG4scixpLG8pOnRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRPSURDUHJvdmlkZXJNZXRhRGF0YSghMSkudGhlbigoKCk9PnRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5yZXF1ZXN0QWNjZXNzVG9rZW4oZSxuLHIsaSxvKSkpfSkpfQovKioKICAgICAgICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIHNpZ24tb3V0IFVSTC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gdXNlcklEIC0gKE9wdGlvbmFsKSBBIHVuaXF1ZSBJRCBvZiB0aGUgdXNlciB0byBiZSBhdXRoZW50aWNhdGVkLiBUaGlzIGlzIHVzZWZ1bCBpbiBtdWx0aS11c2VyCiAgICAgICAgICAgKiBzY2VuYXJpb3Mgd2hlcmUgZWFjaCB1c2VyIHNob3VsZCBiZSB1bmlxdWVseSBpZGVudGlmaWVkLgogICAgICAgICAgICoKICAgICAgICAgICAqICoqVGhpcyBkb2Vzbid0IGNsZWFyIHRoZSBhdXRoZW50aWNhdGlvbiBkYXRhLioqCiAgICAgICAgICAgKgogICAgICAgICAgICogQHJldHVybnMgLSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBzaWduLW91dCBVUkwuCiAgICAgICAgICAgKgogICAgICAgICAgICogQGV4YW1wbGUKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICogY29uc3Qgc2lnbk91dFVybCA9IGF3YWl0IGF1dGguZ2V0U2lnbk91dFVSTCgpOwogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKgogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciNnZXRTaWduT3V0VVJMfQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovZ2V0U2lnbk91dFVSTChlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0U2lnbk91dFVSTChlKX0pKX0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIE9JREMgc2VydmljZSBlbmRwb2ludHMgdGhhdCBhcmUgZmV0Y2hlZCBmcm9tIHRoZSBgLndlbGwta25vd25gIGVuZHBvaW50LgogICAgICAgICAgICoKICAgICAgICAgICAqIEByZXR1cm5zIC0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgT0lEQyBzZXJ2aWNlIGVuZHBvaW50cy4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAZXhhbXBsZQogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKiBjb25zdCBlbmRwb2ludHMgPSBhd2FpdCBhdXRoLmdldE9JRENTZXJ2aWNlRW5kcG9pbnRzKCk7CiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI2dldE9JRENTZXJ2aWNlRW5kcG9pbnRzfQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovZ2V0T0lEQ1NlcnZpY2VFbmRwb2ludHMoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0T0lEQ1NlcnZpY2VFbmRwb2ludHMoKX0pKX0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCBkZWNvZGVzIHRoZSBwYXlsb2FkIG9mIHRoZSBJRCB0b2tlbiBhbmQgcmV0dXJucyBpdC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gdXNlcklEIC0gKE9wdGlvbmFsKSBBIHVuaXF1ZSBJRCBvZiB0aGUgdXNlciB0byBiZSBhdXRoZW50aWNhdGVkLiBUaGlzIGlzIHVzZWZ1bCBpbiBtdWx0aS11c2VyCiAgICAgICAgICAgKiBzY2VuYXJpb3Mgd2hlcmUgZWFjaCB1c2VyIHNob3VsZCBiZSB1bmlxdWVseSBpZGVudGlmaWVkLgogICAgICAgICAgICoKICAgICAgICAgICAqIEByZXR1cm5zIC0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZGVjb2RlZCBJRCB0b2tlbiBwYXlsb2FkLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGNvbnN0IGRlY29kZWRJZFRva2VuID0gYXdhaXQgYXV0aC5nZXREZWNvZGVkSURUb2tlbigpOwogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKgogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciNnZXREZWNvZGVkSURUb2tlbn0KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcHJlc2VydmUKICAgICAgICAgICAqL2dldERlY29kZWRJRFRva2VuKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXREZWNvZGVkSURUb2tlbihlKX0pKX0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBJRCB0b2tlbi4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gdXNlcklEIC0gKE9wdGlvbmFsKSBBIHVuaXF1ZSBJRCBvZiB0aGUgdXNlciB0byBiZSBhdXRoZW50aWNhdGVkLiBUaGlzIGlzIHVzZWZ1bCBpbiBtdWx0aS11c2VyCiAgICAgICAgICAgKiBzY2VuYXJpb3Mgd2hlcmUgZWFjaCB1c2VyIHNob3VsZCBiZSB1bmlxdWVseSBpZGVudGlmaWVkLgogICAgICAgICAgICoKICAgICAgICAgICAqIEByZXR1cm5zIC0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgSUQgdG9rZW4uCiAgICAgICAgICAgKgogICAgICAgICAgICogQGV4YW1wbGUKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICogY29uc3QgaWRUb2tlbiA9IGF3YWl0IGF1dGguZ2V0SURUb2tlbigpOwogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKgogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciNnZXRJRFRva2VufQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovZ2V0SURUb2tlbihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0SURUb2tlbihlKX0pKX0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBiYXNpYyB1c2VyIGluZm9ybWF0aW9uIG9idGFpbmVkIGZyb20gdGhlIElEIHRva2VuLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBwYXJhbSB1c2VySUQgLSAoT3B0aW9uYWwpIEEgdW5pcXVlIElEIG9mIHRoZSB1c2VyIHRvIGJlIGF1dGhlbnRpY2F0ZWQuIFRoaXMgaXMgdXNlZnVsIGluIG11bHRpLXVzZXIKICAgICAgICAgICAqIHNjZW5hcmlvcyB3aGVyZSBlYWNoIHVzZXIgc2hvdWxkIGJlIHVuaXF1ZWx5IGlkZW50aWZpZWQuCiAgICAgICAgICAgKgogICAgICAgICAgICogQHJldHVybnMgLSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBiYXNpYyB1c2VyIGluZm9ybWF0aW9uLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGNvbnN0IHVzZXJJbmZvID0gYXdhaXQgYXV0aC5nZXRCYXNpY1VzZXJJbmZvKCk7CiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI2dldEJhc2ljVXNlckluZm99CiAgICAgICAgICAgKgogICAgICAgICAgICogQHByZXNlcnZlCiAgICAgICAgICAgKi9nZXRCYXNpY1VzZXJJbmZvKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRCYXNpY1VzZXJJbmZvKGUpfSkpfQovKioKICAgICAgICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGNyeXB0byBoZWxwZXIgb2JqZWN0LgogICAgICAgICAgICoKICAgICAgICAgICAqIEByZXR1cm5zIC0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIENyeXB0b0hlbHBlciBvYmplY3QuCiAgICAgICAgICAgKgogICAgICAgICAgICogQGV4YW1wbGUKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICogY29uc3QgY3J5cHRvSGVscGVyID0gYXdhaXQgYXV0aC5DcnlwdG9IZWxwZXIoKTsKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICoKICAgICAgICAgICAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vYXNnYXJkZW8vYXNnYXJkZW8tYXV0aC1qcy1zZGsvdHJlZS9tYXN0ZXIjZ2V0Q3J5cHRvSGVscGVyfQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovZ2V0Q3J5cHRvSGVscGVyKCl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldENyeXB0b0hlbHBlcigpfSkpfQovKioKICAgICAgICAgICAqIFRoaXMgbWV0aG9kIHJldm9rZXMgdGhlIGFjY2VzcyB0b2tlbi4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gdXNlcklEIC0gKE9wdGlvbmFsKSBBIHVuaXF1ZSBJRCBvZiB0aGUgdXNlciB0byBiZSBhdXRoZW50aWNhdGVkLiBUaGlzIGlzIHVzZWZ1bCBpbiBtdWx0aS11c2VyCiAgICAgICAgICAgKiBzY2VuYXJpb3Mgd2hlcmUgZWFjaCB1c2VyIHNob3VsZCBiZSB1bmlxdWVseSBpZGVudGlmaWVkLgogICAgICAgICAgICoKICAgICAgICAgICAqICoqVGhpcyBtZXRob2QgYWxzbyBjbGVhcnMgdGhlIGF1dGhlbnRpY2F0aW9uIGRhdGEuKioKICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIEEgUHJvbWlzZSB0aGF0IHJldHVybnMgdGhlIHJlc3BvbnNlIG9mIHRoZSByZXZva2UtYWNjZXNzLXRva2VuIHJlcXVlc3QuCiAgICAgICAgICAgKgogICAgICAgICAgICogQGV4YW1wbGUKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICogYXV0aC5yZXZva2VBY2Nlc3NUb2tlbigpLnRoZW4oKHJlc3BvbnNlKT0+ewogICAgICAgICAgICogIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAqIH0pLmNhdGNoKChlcnJvcik9PnsKICAgICAgICAgICAqICAvLyBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAqIH0pOwogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKgogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciNyZXZva2VBY2Nlc3NUb2tlbn0KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcHJlc2VydmUKICAgICAgICAgICAqL3Jldm9rZUFjY2Vzc1Rva2VuKGUpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUucmV2b2tlQWNjZXNzVG9rZW4oZSl9Ci8qKgogICAgICAgICAgICogVGhpcyBtZXRob2QgcmVmcmVzaGVzIHRoZSBhY2Nlc3MgdG9rZW4gYW5kIHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgbmV3IGFjY2VzcwogICAgICAgICAgICogdG9rZW4gYW5kIG90aGVyIHJlbGV2YW50IGRhdGEuCiAgICAgICAgICAgKgogICAgICAgICAgICogQHBhcmFtIHVzZXJJRCAtIChPcHRpb25hbCkgQSB1bmlxdWUgSUQgb2YgdGhlIHVzZXIgdG8gYmUgYXV0aGVudGljYXRlZC4gVGhpcyBpcyB1c2VmdWwgaW4gbXVsdGktdXNlcgogICAgICAgICAgICogc2NlbmFyaW9zIHdoZXJlIGVhY2ggdXNlciBzaG91bGQgYmUgdW5pcXVlbHkgaWRlbnRpZmllZC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHRva2VuIHJlc3BvbnNlLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGF1dGgucmVmcmVzaEFjY2Vzc1Rva2VuKCkudGhlbigocmVzcG9uc2UpPT57CiAgICAgICAgICAgKiAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICogfSkuY2F0Y2goKGVycm9yKT0+ewogICAgICAgICAgICogIC8vIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICogfSk7CiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI3JlZnJlc2hBY2Nlc3NUb2tlbn0KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcHJlc2VydmUKICAgICAgICAgICAqL3JlZnJlc2hBY2Nlc3NUb2tlbihlKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLnJlZnJlc2hBY2Nlc3NUb2tlbihlKX0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBhY2Nlc3MgdG9rZW4uCiAgICAgICAgICAgKgogICAgICAgICAgICogQHBhcmFtIHVzZXJJRCAtIChPcHRpb25hbCkgQSB1bmlxdWUgSUQgb2YgdGhlIHVzZXIgdG8gYmUgYXV0aGVudGljYXRlZC4gVGhpcyBpcyB1c2VmdWwgaW4gbXVsdGktdXNlcgogICAgICAgICAgICogc2NlbmFyaW9zIHdoZXJlIGVhY2ggdXNlciBzaG91bGQgYmUgdW5pcXVlbHkgaWRlbnRpZmllZC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGFjY2VzcyB0b2tlbi4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAZXhhbXBsZQogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKiBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IGF1dGguZ2V0QWNjZXNzVG9rZW4oKTsKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICoKICAgICAgICAgICAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vYXNnYXJkZW8vYXNnYXJkZW8tYXV0aC1qcy1zZGsvdHJlZS9tYXN0ZXIjZ2V0QWNjZXNzVG9rZW59CiAgICAgICAgICAgKgogICAgICAgICAgICogQHByZXNlcnZlCiAgICAgICAgICAgKi9nZXRBY2Nlc3NUb2tlbihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0QWNjZXNzVG9rZW4oZSl9KSl9Ci8qKgogICAgICAgICAgICogVGhpcyBtZXRob2Qgc2VuZHMgYSBjdXN0b20tZ3JhbnQgcmVxdWVzdCBhbmQgcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXNwb25zZQogICAgICAgICAgICogZGVwZW5kaW5nIG9uIHRoZSBjb25maWcgcGFzc2VkLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBwYXJhbSBjb25maWcgLSBBIGNvbmZpZyBvYmplY3QgY29udGFpbmluZyB0aGUgY3VzdG9tIGdyYW50IGNvbmZpZ3VyYXRpb25zLgogICAgICAgICAgICogQHBhcmFtIHVzZXJJRCAtIChPcHRpb25hbCkgQSB1bmlxdWUgSUQgb2YgdGhlIHVzZXIgdG8gYmUgYXV0aGVudGljYXRlZC4gVGhpcyBpcyB1c2VmdWwgaW4gbXVsdGktdXNlcgogICAgICAgICAgICogc2NlbmFyaW9zIHdoZXJlIGVhY2ggdXNlciBzaG91bGQgYmUgdW5pcXVlbHkgaWRlbnRpZmllZC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3BvbnNlIGRlcGVuZGluZwogICAgICAgICAgICogb24geW91ciBjb25maWd1cmF0aW9ucy4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAZXhhbXBsZQogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKiBjb25zdCBjb25maWcgPSB7CiAgICAgICAgICAgKiAgIGF0dGFjaFRva2VuOiBmYWxzZSwKICAgICAgICAgICAqICAgZGF0YTogewogICAgICAgICAgICogICAgICAgY2xpZW50X2lkOiAie3tjbGllbnRJRH19IiwKICAgICAgICAgICAqICAgICAgIGdyYW50X3R5cGU6ICJhY2NvdW50X3N3aXRjaCIsCiAgICAgICAgICAgKiAgICAgICBzY29wZTogInt7c2NvcGV9fSIsCiAgICAgICAgICAgKiAgICAgICB0b2tlbjogInt7dG9rZW59fSIsCiAgICAgICAgICAgKiAgIH0sCiAgICAgICAgICAgKiAgIGlkOiAiYWNjb3VudC1zd2l0Y2giLAogICAgICAgICAgICogICByZXR1cm5SZXNwb25zZTogdHJ1ZSwKICAgICAgICAgICAqICAgcmV0dXJuc1Nlc3Npb246IHRydWUsCiAgICAgICAgICAgKiAgIHNpZ25JblJlcXVpcmVkOiB0cnVlCiAgICAgICAgICAgKiB9CiAgICAgICAgICAgKgogICAgICAgICAgICogYXV0aC5yZXF1ZXN0Q3VzdG9tR3JhbnQoY29uZmlnKS50aGVuKChyZXNwb25zZSk9PnsKICAgICAgICAgICAqICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgKiB9KS5jYXRjaCgoZXJyb3IpPT57CiAgICAgICAgICAgKiAgLy8gY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICAgKiB9KTsKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICoKICAgICAgICAgICAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vYXNnYXJkZW8vYXNnYXJkZW8tYXV0aC1qcy1zZGsvdHJlZS9tYXN0ZXIjcmVxdWVzdEN1c3RvbUdyYW50fQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovcmVxdWVzdEN1c3RvbUdyYW50KGUsdCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5yZXF1ZXN0Q3VzdG9tR3JhbnQoZSx0KX0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGlmIHRoZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgb3Igbm90LgogICAgICAgICAgICoKICAgICAgICAgICAqIEBwYXJhbSB1c2VySUQgLSAoT3B0aW9uYWwpIEEgdW5pcXVlIElEIG9mIHRoZSB1c2VyIHRvIGJlIGF1dGhlbnRpY2F0ZWQuIFRoaXMgaXMgdXNlZnVsIGluIG11bHRpLXVzZXIKICAgICAgICAgICAqIHNjZW5hcmlvcyB3aGVyZSBlYWNoIHVzZXIgc2hvdWxkIGJlIHVuaXF1ZWx5IGlkZW50aWZpZWQuCiAgICAgICAgICAgKgogICAgICAgICAgICogQHJldHVybnMgLSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGB0cnVlYCBpZiB0aGUgdXNlciBpcyBhdXRoZW50aWNhdGVkLCBgZmFsc2VgIG90aGVyd2lzZS4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAZXhhbXBsZQogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKiBhd2FpdCBhdXRoLmlzQXV0aGVudGljYXRlZCgpOwogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKgogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciNpc0F1dGhlbnRpY2F0ZWR9CiAgICAgICAgICAgKgogICAgICAgICAgICogQHByZXNlcnZlCiAgICAgICAgICAgKi9pc0F1dGhlbnRpY2F0ZWQoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmlzQXV0aGVudGljYXRlZChlKX0pKX0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBQS0NFIGNvZGUgZ2VuZXJhdGVkIGR1cmluZyB0aGUgZ2VuZXJhdGlvbiBvZiB0aGUgYXV0aGVudGljYXRpb24gVVJMLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBwYXJhbSB1c2VySUQgLSAoT3B0aW9uYWwpIEEgdW5pcXVlIElEIG9mIHRoZSB1c2VyIHRvIGJlIGF1dGhlbnRpY2F0ZWQuIFRoaXMgaXMgdXNlZnVsIGluIG11bHRpLXVzZXIKICAgICAgICAgICAqIHNjZW5hcmlvcyB3aGVyZSBlYWNoIHVzZXIgc2hvdWxkIGJlIHVuaXF1ZWx5IGlkZW50aWZpZWQuCiAgICAgICAgICAgKiBAcGFyYW0gc3RhdGUgLSBUaGUgc3RhdGUgcGFyYW1ldGVyIHRoYXQgd2FzIHBhc3NlZCBpbiB0aGUgYXV0aGVudGljYXRpb24gVVJMLgogICAgICAgICAgICoKICAgICAgICAgICAqIEByZXR1cm5zIC0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgUEtDRSBjb2RlLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGNvbnN0IHBrY2UgPSBhd2FpdCBnZXRQS0NFQ29kZSgpOwogICAgICAgICAgICogYGBgCiAgICAgICAgICAgKgogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciNnZXRQS0NFQ29kZX0KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcHJlc2VydmUKICAgICAgICAgICAqL2dldFBLQ0VDb2RlKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldFBLQ0VDb2RlKGUsbil9KSl9Ci8qKgogICAgICAgICAgICogVGhpcyBtZXRob2Qgc2V0cyB0aGUgUEtDRSBjb2RlIHRvIHRoZSBkYXRhIHN0b3JlLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBwYXJhbSBwa2NlIC0gVGhlIFBLQ0UgY29kZS4KICAgICAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIFRoZSBzdGF0ZSBwYXJhbWV0ZXIgdGhhdCB3YXMgcGFzc2VkIGluIHRoZSBhdXRoZW50aWNhdGlvbiBVUkwuCiAgICAgICAgICAgKiBAcGFyYW0gdXNlcklEIC0gKE9wdGlvbmFsKSBBIHVuaXF1ZSBJRCBvZiB0aGUgdXNlciB0byBiZSBhdXRoZW50aWNhdGVkLiBUaGlzIGlzIHVzZWZ1bCBpbiBtdWx0aS11c2VyCiAgICAgICAgICAgKiBzY2VuYXJpb3Mgd2hlcmUgZWFjaCB1c2VyIHNob3VsZCBiZSB1bmlxdWVseSBpZGVudGlmaWVkLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGF3YWl0IGF1dGguc2V0UEtDRUNvZGUoInBrY2VfY29kZSIpCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI3NldFBLQ0VDb2RlfQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovc2V0UEtDRUNvZGUoZSxuLHIpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLnNldFBLQ0VDb2RlKGUsbixyKX0pKX0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGlmIHRoZSBzaWduLW91dCBpcyBzdWNjZXNzZnVsIG9yIG5vdC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gc2lnbk91dFJlZGlyZWN0VXJsIC0gVGhlIFVSTCB0byB3aGljaCB0aGUgdXNlciBoYXMgYmVlbiByZWRpcmVjdGVkIHRvIGFmdGVyIHNpZ25pbmctb3V0LgogICAgICAgICAgICoKICAgICAgICAgICAqICoqVGhlIHNlcnZlciBhcHBlbmRzIHBhdGggcGFyYW1ldGVycyB0byB0aGUgYHNpZ25PdXRSZWRpcmVjdFVSTGAgYW5kIHRoZXNlIHBhdGggcGFyYW1ldGVycwogICAgICAgICAgICogIGFyZSByZXF1aXJlZCBmb3IgdGhpcyBtZXRob2QgdG8gZnVuY3Rpb24uKioKICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIGB0cnVlYCBpZiBzdWNjZXNzZnVsLCBgZmFsc2VgIG90aGVyd2lzZS4KICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI2lzU2lnbk91dFN1Y2Nlc3NmdWx9CiAgICAgICAgICAgKgogICAgICAgICAgICogQHByZXNlcnZlCiAgICAgICAgICAgKi9zdGF0aWMgaXNTaWduT3V0U3VjY2Vzc2Z1bChlKXtjb25zdCB0PW5ldyBVUkwoZSksbj10LnNlYXJjaFBhcmFtcy5nZXQoInN0YXRlIikscj1Cb29sZWFuKHQuc2VhcmNoUGFyYW1zLmdldCgiZXJyb3IiKSk7cmV0dXJuISFuJiYic2lnbl9vdXRfc3VjY2VzcyI9PT1uJiYhcn0KLyoqCiAgICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGlmIHRoZSBzaWduLW91dCBoYXMgZmFpbGVkIG9yIG5vdC4KICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcGFyYW0gc2lnbk91dFJlZGlyZWN0VXJsIC0gVGhlIFVSTCB0byB3aGljaCB0aGUgdXNlciBoYXMgYmVlbiByZWRpcmVjdGVkIHRvIGFmdGVyIHNpZ25pbmctb3V0LgogICAgICAgICAgICoKICAgICAgICAgICAqICoqVGhlIHNlcnZlciBhcHBlbmRzIHBhdGggcGFyYW1ldGVycyB0byB0aGUgYHNpZ25PdXRSZWRpcmVjdFVSTGAgYW5kIHRoZXNlIHBhdGggcGFyYW1ldGVycwogICAgICAgICAgICogIGFyZSByZXF1aXJlZCBmb3IgdGhpcyBtZXRob2QgdG8gZnVuY3Rpb24uKioKICAgICAgICAgICAqCiAgICAgICAgICAgKiBAcmV0dXJucyAtIGB0cnVlYCBpZiBzdWNjZXNzZnVsLCBgZmFsc2VgIG90aGVyd2lzZS4KICAgICAgICAgICAqCiAgICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2FzZ2FyZGVvL2FzZ2FyZGVvLWF1dGgtanMtc2RrL3RyZWUvbWFzdGVyI2RpZFNpZ25PdXRGYWlsfQogICAgICAgICAgICoKICAgICAgICAgICAqIEBwcmVzZXJ2ZQogICAgICAgICAgICovc3RhdGljIGRpZFNpZ25PdXRGYWlsKGUpe2NvbnN0IHQ9bmV3IFVSTChlKSxuPXQuc2VhcmNoUGFyYW1zLmdldCgic3RhdGUiKSxyPUJvb2xlYW4odC5zZWFyY2hQYXJhbXMuZ2V0KCJlcnJvciIpKTtyZXR1cm4hIW4mJiJzaWduX291dF9zdWNjZXNzIj09PW4mJnJ9Ci8qKgogICAgICAgICAgICogVGhpcyBtZXRob2QgdXBkYXRlcyB0aGUgY29uZmlndXJhdGlvbiB0aGF0IHdhcyBwYXNzZWQgaW50byB0aGUgY29uc3RydWN0b3Igd2hlbiBpbnN0YW50aWF0aW5nIHRoaXMgY2xhc3MuCiAgICAgICAgICAgKgogICAgICAgICAgICogQHBhcmFtIGNvbmZpZyAtIEEgY29uZmlnIG9iamVjdCB0byB1cGRhdGUgdGhlIFNESyBjb25maWd1cmF0aW9ucyB3aXRoLgogICAgICAgICAgICoKICAgICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICAgKiBgYGAKICAgICAgICAgICAqIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICAgICAqICAgICBzaWduSW5SZWRpcmVjdFVSTDogImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9zaWduLWluIiwKICAgICAgICAgICAqICAgICBjbGllbnRJRDogImNsaWVudCBJRCIsCiAgICAgICAgICAgKiAgICAgYmFzZVVybDogImh0dHBzOi8vbG9jYWxob3N0Ojk0NDMiCiAgICAgICAgICAgKiB9CiAgICAgICAgICAgKgogICAgICAgICAgICogYXdhaXQgYXV0aC51cGRhdGVDb25maWcoY29uZmlnKTsKICAgICAgICAgICAqIGBgYAogICAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2dhcmRlby9hc2dhcmRlby1hdXRoLWpzLXNkay90cmVlL21hc3RlciN1cGRhdGVDb25maWd9CiAgICAgICAgICAgKgogICAgICAgICAgICogQHByZXNlcnZlCiAgICAgICAgICAgKi91cGRhdGVDb25maWcoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUudXBkYXRlQ29uZmlnKGUpfSkpfXN0YXRpYyBjbGVhclVzZXJTZXNzaW9uRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5jbGVhclVzZXJTZXNzaW9uRGF0YShlKX0pKX19Y29uc3Qgdj0iaW5pdCI7dmFyIHk7IWZ1bmN0aW9uKGUpe2UuU2lnbkluPSJzaWduLWluIixlLlNpZ25PdXQ9InNpZ24tb3V0IixlLkluaXRpYWxpemU9ImluaXRpYWxpemUiLGUuSHR0cFJlcXVlc3RTdGFydD0iaHR0cC1yZXF1ZXN0LXN0YXJ0IixlLkh0dHBSZXF1ZXN0RmluaXNoPSJodHRwLXJlcXVlc3QtZmluaXNoIixlLkh0dHBSZXF1ZXN0RXJyb3I9Imh0dHAtcmVxdWVzdC1lcnJvciIsZS5IdHRwUmVxdWVzdFN1Y2Nlc3M9Imh0dHAtcmVxdWVzdC1zdWNjZXNzIixlLlJldm9rZUFjY2Vzc1Rva2VuPSJyZXZva2UtYWNjZXNzLXRva2VuIixlLkN1c3RvbUdyYW50PSJjdXN0b20tZ3JhbnQiLGUuU2lnbk91dEZhaWxlZD0ic2lnbi1vdXQtZmFpbGVkIn0oeXx8KHk9e30pKTtjb25zdCBtPSJwcm9tcHROb25lUmVxdWVzdFNlbnQiLHc9ImVycm9yIixfPSJlcnJvcl9kZXNjcmlwdGlvbiIsUz0iY3VzdG9tX2dyYW50X2NvbmZpZyIsYj0iQWNjZXNzIHRva2VuIGlzIGludmFsaWQiO3ZhciBFOyFmdW5jdGlvbihlKXtlLkxvY2FsU3RvcmFnZT0ibG9jYWxTdG9yYWdlIixlLlNlc3Npb25TdG9yYWdlPSJzZXNzaW9uU3RvcmFnZSIsZS5XZWJXb3JrZXI9IndlYldvcmtlciIsZS5Ccm93c2VyTWVtb3J5PSJicm93c2VyTWVtb3J5In0oRXx8KEU9e30pKTtjbGFzcyBre2NvbnN0cnVjdG9yKCl7fXN0YXRpYyBnZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKGUpe3JldHVybntibG9iOihudWxsPT1lP3ZvaWQgMDplLmRhdGEpaW5zdGFuY2VvZiBCbG9iP251bGw9PWU/dm9pZCAwOmUuZGF0YTpudWxsLGRhdGE6SlNPTi5zdHJpbmdpZnkobnVsbCE9ZT9lOiIiKSxzdWNjZXNzOiEwfX1zdGF0aWMgZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKXtyZXR1cm4obnVsbD09ZT92b2lkIDA6ZS50b0pTT04pJiZkZWxldGUgZS50b0pTT04se2Vycm9yOkpTT04uc3RyaW5naWZ5KG51bGwhPWU/ZToiIiksc3VjY2VzczohMX19fWNsYXNzIFJ7Y29uc3RydWN0b3IoKXt9c3RhdGljIHJlbW92ZUF1dGhvcml6YXRpb25Db2RlKCl7Y29uc3QgZT1sb2NhdGlvbi5ocmVmO2hpc3RvcnkucHVzaFN0YXRlKHt9LGRvY3VtZW50LnRpdGxlLGUucmVwbGFjZSgvXD9jb2RlPS4qJC8sIiIpKX1zdGF0aWMgZ2V0UEtDRShlKXt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZSkpJiZ2b2lkIDAhPT10P3Q6IiJ9c3RhdGljIHNldFBLQ0UoZSx0KXtzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGUsdCl9c3RhdGljIHNldFNpZ25PdXRVUkwoZSx0LG4pe3Nlc3Npb25TdG9yYWdlLnNldEl0ZW0oIiIuY29uY2F0KHMsIi1pbnN0YW5jZV8iKS5jb25jYXQobiwiLSIpLmNvbmNhdCh0KSxlKX1zdGF0aWMgZ2V0U2lnbk91dFVSTChlLHQpe3ZhciBuO3JldHVybiBudWxsIT09KG49c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiIi5jb25jYXQocywiLWluc3RhbmNlXyIpLmNvbmNhdCh0LCItIikuY29uY2F0KGUpKSkmJnZvaWQgMCE9PW4/bjoiIn1zdGF0aWMgcmVtb3ZlUEtDRShlKXtzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGUpfXN0YXRpYyBjYW5Db250aW51ZVNpZ25JbihlLHQpe3JldHVybiEoZSYmIVIuaGFzRXJyb3JJblVSTCgpJiYhUi5oYXNBdXRoU2VhcmNoUGFyYW1zSW5VUkwoKSYmIXQpfXN0YXRpYyBpc0luaXRpYWxpemVkU2lsZW50U2lnbkluKCl7cmV0dXJuIFIuaXNTaWxlbnRTdGF0ZVByZXNlbnRJblVSTCgpfXN0YXRpYyB3YXNTaWduSW5DYWxsZWQoKXtyZXR1cm4hKCFSLmhhc0Vycm9ySW5VUkwoKSYmIVIuaGFzQXV0aFNlYXJjaFBhcmFtc0luVVJMKCl8fHRoaXMuaXNTaWxlbnRTdGF0ZVByZXNlbnRJblVSTCgpKX1zdGF0aWMgd2FzU2lsZW50U2lnbkluQ2FsbGVkKCl7Y29uc3QgZT1zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJpbml0aWFsaXplZC1zaWxlbnQtc2lnbi1pbiIpLHQ9ZT9KU09OLnBhcnNlKGUpOm51bGw7cmV0dXJuIEJvb2xlYW4odCl9c3RhdGljIGlzU2lnbk91dFN1Y2Nlc3NmdWwoKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKGcuaXNTaWduT3V0U3VjY2Vzc2Z1bCh3aW5kb3cubG9jYXRpb24uaHJlZikpe2NvbnN0IGU9d2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoIj8iKVswXTtyZXR1cm4gaGlzdG9yeS5wdXNoU3RhdGUoe30sZG9jdW1lbnQudGl0bGUsZSkseWllbGQgZy5jbGVhclVzZXJTZXNzaW9uRGF0YSgpLCEwfXJldHVybiExfSkpfXN0YXRpYyBkaWRTaWduT3V0RmFpbCgpe2lmKGcuZGlkU2lnbk91dEZhaWwod2luZG93LmxvY2F0aW9uLmhyZWYpKXtjb25zdCBlPW5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLHQ9ZS5zZWFyY2hQYXJhbXMuZ2V0KHcpLG49ZS5zZWFyY2hQYXJhbXMuZ2V0KF8pLHI9d2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoIj8iKVswXTtyZXR1cm4gaGlzdG9yeS5wdXNoU3RhdGUoe30sZG9jdW1lbnQudGl0bGUscikse2Rlc2NyaXB0aW9uOm51bGwhPW4/bjoiIixlcnJvcjpudWxsIT10P3Q6IiJ9fXJldHVybiExfXN0YXRpYyBpc1NpbGVudFN0YXRlUHJlc2VudEluVVJMKCl7dmFyIGU7Y29uc3QgdD1uZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KCJzdGF0ZSIpO3JldHVybiBudWxsIT09KGU9bnVsbD09dD92b2lkIDA6dC5pbmNsdWRlcygic2lnbi1pbi1zaWxlbnRseSIpKSYmdm9pZCAwIT09ZSYmZX1zdGF0aWMgaGFzQXV0aFNlYXJjaFBhcmFtc0luVVJMKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOndpbmRvdy5sb2NhdGlvbi5zZWFyY2g7cmV0dXJuL1s/Jl1jb2RlPVteJl0rLy50ZXN0KGUpfXN0YXRpYyBoYXNFcnJvckluVVJMKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOndpbmRvdy5sb2NhdGlvbi5ocmVmO2NvbnN0IHQ9bmV3IFVSTChlKTtyZXR1cm4hIXQuc2VhcmNoUGFyYW1zLmdldCh3KSYmInNpZ25fb3V0X3N1Y2Nlc3MiIT09dC5zZWFyY2hQYXJhbXMuZ2V0KCJzdGF0ZSIpfXN0YXRpYyBjYW5TZW5kUHJvbXB0Tm9uZVJlcXVlc3QoKXtjb25zdCBlPXNlc3Npb25TdG9yYWdlLmdldEl0ZW0obSk7cmV0dXJuIShlP0pTT04ucGFyc2UoZSk6bnVsbCl9c3RhdGljIHNldFByb21wdE5vbmVSZXF1ZXN0U2VudChlKXtzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKG0sSlNPTi5zdHJpbmdpZnkoZSkpfXN0YXRpYyB3YWl0VGlsbFBhZ2VSZWRpcmVjdCh0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9bnVsbCE9dD90OjNlMzt5aWVsZCBuZXcgUHJvbWlzZSgodD0+c2V0VGltZW91dCh0LDFlMyplKSkpfSkpfX1SLnVudGlsPWZ1bmN0aW9uKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTo1MDA7Y29uc3Qgbj1yPT5lKCk/cigpOnNldFRpbWVvdXQoKCgpPT5uKHIpKSx0KTtyZXR1cm4gbmV3IFByb21pc2Uobil9O2NsYXNzIFR7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudD1lLHRoaXMuX2RhdGFMYXllcj10aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXREYXRhTGF5ZXIoKSx0aGlzLl9zcGFIZWxwZXI9dCx0aGlzLl9pbnN0YW5jZUlEPXRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldEluc3RhbmNlSUQoKSx0aGlzLl9pc1Rva2VuUmVmcmVzaGluZz0hMX1lbmFibGVIdHRwSGFuZGxlcihlKXsobnVsbD09ZT92b2lkIDA6ZS5lbmFibGVIYW5kbGVyKSYmZS5lbmFibGVIYW5kbGVyKCl9ZGlzYWJsZUh0dHBIYW5kbGVyKGUpeyhudWxsPT1lP3ZvaWQgMDplLmRpc2FibGVIYW5kbGVyKSYmZS5kaXNhYmxlSGFuZGxlcigpfWluaXRpYWxpemVTZXNzaW9uTWFuZ2VyKGUsdCxuLHIsaSl7dmFyIG8scyxhO2kuaW5pdGlhbGl6ZShlLmNsaWVudElELG51bGwhPT0obz10LmNoZWNrU2Vzc2lvbklmcmFtZSkmJnZvaWQgMCE9PW8/bzoiIixuLG51bGwhPT0ocz1lLmNoZWNrU2Vzc2lvbkludGVydmFsKSYmdm9pZCAwIT09cz9zOjMsbnVsbCE9PShhPWUuc2Vzc2lvblJlZnJlc2hJbnRlcnZhbCkmJnZvaWQgMCE9PWE/YTozMDAsZS5zaWduSW5SZWRpcmVjdFVSTCxyKX1yZXF1ZXN0Q3VzdG9tR3JhbnQodCxuKXt2YXIgcixpLG87cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtsZXQgcz0hMCxhPSExO2lmKG51bGw9PXQ/dm9pZCAwOnQudG9rZW5FbmRwb2ludCl7cz0hMTtmb3IoY29uc3QgZSBvZlsuLi5udWxsIT09KGk9bnVsbD09PShyPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRDb25maWdEYXRhKCkpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnJlc291cmNlU2VydmVyVVJMcykmJnZvaWQgMCE9PWk/aTpbXSx0LmJhc2VVcmxdKWlmKGUmJihudWxsPT09KG89dC50b2tlbkVuZHBvaW50KXx8dm9pZCAwPT09bz92b2lkIDA6by5zdGFydHNXaXRoKGUpKSl7YT0hMDticmVha319cmV0dXJuIHQuc2hvdWxkUmVwbGF5QWZ0ZXJSZWZyZXNoJiZ0aGlzLl9kYXRhTGF5ZXIuc2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcihTLEpTT04uc3RyaW5naWZ5KHQpKSxzfHxhP3RoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LnJlcXVlc3RDdXN0b21HcmFudCh0KS50aGVuKChyPT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIG4mJiJmdW5jdGlvbiI9PXR5cGVvZiBuJiZuKHQpLHQucmV0dXJuc1Nlc3Npb24/KHRoaXMuX3NwYUhlbHBlci5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KHRoaXMpLHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldEJhc2ljVXNlckluZm8oKSk6cn0pKSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpOlByb21pc2UucmVqZWN0KG5ldyBjKCJTUEEtTUFJTl9USFJFQURfQ0xJRU5ULVJDRy1JVjAxIiwiUmVxdWVzdCB0byB0aGUgcHJvdmlkZWQgZW5kcG9pbnQgaXMgcHJvaGliaXRlZC4iLCJSZXF1ZXN0cyBjYW4gb25seSBiZSBzZW50IHRvIHJlc291cmNlIHNlcnZlcnMgc3BlY2lmaWVkIGJ5IHRoZSBgcmVzb3VyY2VTZXJ2ZXJVUkxzYCBhdHRyaWJ1dGUgd2hpbGUgaW5pdGlhbGl6aW5nIHRoZSBTREsuIFRoZSBzcGVjaWZpZWQgdG9rZW4gZW5kcG9pbnQgaW4gdGhpcyByZXF1ZXN0IGNhbm5vdCBiZSBmb3VuZCBhbW9uZyB0aGUgYHJlc291cmNlU2VydmVyVVJMc2AiKSl9KSl9Z2V0Q3VzdG9tR3JhbnRDb25maWdEYXRhKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKFMpO3JldHVybiBlP0pTT04ucGFyc2UoZSk6bnVsbH0pKX1yZWZyZXNoQWNjZXNzVG9rZW4odCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0cnl7eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQucmVmcmVzaEFjY2Vzc1Rva2VuKCk7Y29uc3QgZT15aWVsZCB0aGlzLmdldEN1c3RvbUdyYW50Q29uZmlnRGF0YSgpO3JldHVybiBlJiYoeWllbGQgdGhpcy5yZXF1ZXN0Q3VzdG9tR3JhbnQoZSx0KSksdGhpcy5fc3BhSGVscGVyLnJlZnJlc2hBY2Nlc3NUb2tlbkF1dG9tYXRpY2FsbHkodGhpcyksdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0QmFzaWNVc2VySW5mbygpfWNhdGNoKGUpe2NvbnN0IHQ9e3R5cGU6InJlZnJlc2gtYWNjZXNzLXRva2VuLWVycm9yIn07cmV0dXJuIHdpbmRvdy5wb3N0TWVzc2FnZSh0KSxQcm9taXNlLnJlamVjdChlKX19KSl9cmV0cnlGYWlsZWRSZXF1ZXN0cyh0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9dC5odHRwQ2xpZW50LG49dC5yZXF1ZXN0Q29uZmlnLHI9dC5pc0h0dHBIYW5kbGVyRW5hYmxlZCxpPXQuaHR0cEVycm9yQ2FsbGJhY2ssbz10Lmh0dHBGaW5pc2hDYWxsYmFjazt5aWVsZCBSLnVudGlsKCgoKT0+IXRoaXMuX2lzVG9rZW5SZWZyZXNoaW5nKSk7dHJ5e2NvbnN0IHQ9eWllbGQgZS5yZXF1ZXN0KG4pO3JldHVybiBQcm9taXNlLnJlc29sdmUodCl9Y2F0Y2goZSl7cmV0dXJuIHImJigiZnVuY3Rpb24iPT10eXBlb2YgaSYmKHlpZWxkIGkoZSkpLCJmdW5jdGlvbiI9PXR5cGVvZiBvJiZvKCkpLFByb21pc2UucmVqZWN0KGUpfX0pKX1odHRwUmVxdWVzdCh0LG4scixpLG8scyl7dmFyIGEsdTtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2xldCBsPSExO2NvbnN0IGQ9eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldENvbmZpZ0RhdGEoKTtmb3IoY29uc3QgZSBvZlsuLi5udWxsIT09KGE9eWllbGQgbnVsbD09ZD92b2lkIDA6ZC5yZXNvdXJjZVNlcnZlclVSTHMpJiZ2b2lkIDAhPT1hP2E6W10sZC5iYXNlVXJsXSlpZihlJiYobnVsbD09PSh1PW51bGw9PW4/dm9pZCAwOm4udXJsKXx8dm9pZCAwPT09dT92b2lkIDA6dS5zdGFydHNXaXRoKGUpKSl7bD0hMDticmVha31yZXR1cm4gbD90LnJlcXVlc3QobikudGhlbigoZT0+UHJvbWlzZS5yZXNvbHZlKGUpKSkuY2F0Y2goKGE9PmUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt2YXIgZSx1LGw7aWYoNDAxPT09KG51bGw9PT0oZT1udWxsPT1hP3ZvaWQgMDphLnJlc3BvbnNlKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zdGF0dXMpfHwhKG51bGw9PWE/dm9pZCAwOmEucmVzcG9uc2UpKXtpZih0aGlzLl9pc1Rva2VuUmVmcmVzaGluZylyZXR1cm4gdGhpcy5yZXRyeUZhaWxlZFJlcXVlc3RzKHtlbmFibGVSZXRyaWV2aW5nU2lnbk91dFVSTEZyb21TZXNzaW9uOnMsaHR0cENsaWVudDp0LGh0dHBFcnJvckNhbGxiYWNrOmksaHR0cEZpbmlzaENhbGxiYWNrOm8saXNIdHRwSGFuZGxlckVuYWJsZWQ6cixyZXF1ZXN0Q29uZmlnOm59KTtsZXQgZTt0aGlzLl9pc1Rva2VuUmVmcmVzaGluZz0hMDt0cnl7ZT15aWVsZCB0aGlzLnJlZnJlc2hBY2Nlc3NUb2tlbihzKSx0aGlzLl9pc1Rva2VuUmVmcmVzaGluZz0hMX1jYXRjaChlKXt0aHJvdyB0aGlzLl9pc1Rva2VuUmVmcmVzaGluZz0hMSxyJiYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJih5aWVsZCBpKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxhKSx7Y29kZTpifSkpKSwiZnVuY3Rpb24iPT10eXBlb2YgbyYmbygpKSxuZXcgYygiU1BBLUFVVEhfSEVMUEVSLUhSLVNFMDEiLG51bGwhPT0odT1udWxsPT1lP3ZvaWQgMDplLm5hbWUpJiZ2b2lkIDAhPT11P3U6IlJlZnJlc2ggdG9rZW4gcmVxdWVzdCBmYWlsZWQuIixudWxsIT09KGw9bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKSYmdm9pZCAwIT09bD9sOiJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gcmVmcmVzaCB0aGUgYWNjZXNzIHRva2VuIGZvbGxvd2luZyBhIDQwMSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIuIil9aWYoZSl0cnl7Y29uc3QgZT15aWVsZCB0LnJlcXVlc3Qobik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShlKX1jYXRjaChlKXtyZXR1cm4gciYmKCJmdW5jdGlvbiI9PXR5cGVvZiBpJiYoeWllbGQgaShlKSksImZ1bmN0aW9uIj09dHlwZW9mIG8mJm8oKSksUHJvbWlzZS5yZWplY3QoZSl9fXJldHVybiByJiYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJih5aWVsZCBpKGEpKSwiZnVuY3Rpb24iPT10eXBlb2YgbyYmbygpKSxQcm9taXNlLnJlamVjdChhKX0pKSkpOlByb21pc2UucmVqZWN0KG5ldyBjKCJTUEEtQVVUSF9IRUxQRVItSFItSVYwMiIsIlJlcXVlc3QgdG8gdGhlIHByb3ZpZGVkIGVuZHBvaW50IGlzIHByb2hpYml0ZWQuIiwiUmVxdWVzdHMgY2FuIG9ubHkgYmUgc2VudCB0byByZXNvdXJjZSBzZXJ2ZXJzIHNwZWNpZmllZCBieSB0aGUgYHJlc291cmNlU2VydmVyVVJMc2AgYXR0cmlidXRlIHdoaWxlIGluaXRpYWxpemluZyB0aGUgU0RLLiBUaGUgc3BlY2lmaWVkIGVuZHBvaW50IGluIHRoaXMgcmVxdWVzdCBjYW5ub3QgYmUgZm91bmQgYW1vbmcgdGhlIGByZXNvdXJjZVNlcnZlclVSTHNgIikpfSkpfWh0dHBSZXF1ZXN0QWxsKHQsbixyLGksbyl7dmFyIHMsYSx1O3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7bGV0IGw9ITA7Y29uc3QgZD15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpO2Zvcihjb25zdCBlIG9mIHQpe2xldCB0PSExO2Zvcihjb25zdCBuIG9mWy4uLm51bGwhPT0oYT1udWxsPT09KHM9eWllbGQgZCl8fHZvaWQgMD09PXM/dm9pZCAwOnMucmVzb3VyY2VTZXJ2ZXJVUkxzKSYmdm9pZCAwIT09YT9hOltdLGQuYmFzZVVybF0paWYobiYmKG51bGw9PT0odT1lLnVybCl8fHZvaWQgMD09PXU/dm9pZCAwOnUuc3RhcnRzV2l0aChuKSkpe3Q9ITA7YnJlYWt9aWYoIXQpe2w9ITE7YnJlYWt9fWNvbnN0IGg9W107aWYobClyZXR1cm4gdC5mb3JFYWNoKChlPT57aC5wdXNoKG4ucmVxdWVzdChlKSl9KSksKG51bGw9PW4/dm9pZCAwOm4uYWxsKSYmbi5hbGwoaCkudGhlbigoZT0+UHJvbWlzZS5yZXNvbHZlKGUpKSkuY2F0Y2goKHQ9PmUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt2YXIgcyxhLHU7aWYoNDAxPT09KG51bGw9PT0ocz1udWxsPT10P3ZvaWQgMDp0LnJlc3BvbnNlKXx8dm9pZCAwPT09cz92b2lkIDA6cy5zdGF0dXMpfHwhKG51bGw9PXQ/dm9pZCAwOnQucmVzcG9uc2UpKXtsZXQgczt0cnl7cz15aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5yZWZyZXNoQWNjZXNzVG9rZW4oKX1jYXRjaChlKXt0aHJvdyByJiYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJih5aWVsZCBpKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0KSx7Y29kZTpifSkpKSwiZnVuY3Rpb24iPT10eXBlb2YgbyYmbygpKSxuZXcgYygiU1BBLUFVVEhfSEVMUEVSLUhSQS1TRTAxIixudWxsIT09KGE9bnVsbD09ZT92b2lkIDA6ZS5uYW1lKSYmdm9pZCAwIT09YT9hOiJSZWZyZXNoIHRva2VuIHJlcXVlc3QgZmFpbGVkLiIsbnVsbCE9PSh1PW51bGw9PWU/dm9pZCAwOmUubWVzc2FnZSkmJnZvaWQgMCE9PXU/dToiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiBmb2xsb3dpbmcgYSA0MDEgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyLiIpfWlmKHMpcmV0dXJuIG4uYWxsJiZuLmFsbChoKS50aGVuKChlPT5Qcm9taXNlLnJlc29sdmUoZSkpKS5jYXRjaCgodD0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiByJiYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJih5aWVsZCBpKHQpKSwiZnVuY3Rpb24iPT10eXBlb2YgbyYmbygpKSxQcm9taXNlLnJlamVjdCh0KX0pKSkpfXJldHVybiByJiYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJih5aWVsZCBpKHQpKSwiZnVuY3Rpb24iPT10eXBlb2YgbyYmbygpKSxQcm9taXNlLnJlamVjdCh0KX0pKSkpO3Rocm93IG5ldyBjKCJTUEEtQVVUSF9IRUxQRVItSFJBLUlWMDIiLCJSZXF1ZXN0IHRvIHRoZSBwcm92aWRlZCBlbmRwb2ludCBpcyBwcm9oaWJpdGVkLiIsIlJlcXVlc3RzIGNhbiBvbmx5IGJlIHNlbnQgdG8gcmVzb3VyY2Ugc2VydmVycyBzcGVjaWZpZWQgYnkgdGhlIGByZXNvdXJjZVNlcnZlclVSTHNgIGF0dHJpYnV0ZSB3aGlsZSBpbml0aWFsaXppbmcgdGhlIFNESy4gVGhlIHNwZWNpZmllZCBlbmRwb2ludCBpbiB0aGlzIHJlcXVlc3QgY2Fubm90IGJlIGZvdW5kIGFtb25nIHRoZSBgcmVzb3VyY2VTZXJ2ZXJVUkxzYCIpfSkpfXJlcXVlc3RBY2Nlc3NUb2tlbih0LG4scixpLG8scyl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBhPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRDb25maWdEYXRhKCk7aWYoYS5zdG9yYWdlPT09RS5Ccm93c2VyTWVtb3J5JiZhLmVuYWJsZVBLQ0UmJm4pe2NvbnN0IGU9Ui5nZXRQS0NFKHUuZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShuKSk7eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuc2V0UEtDRUNvZGUodS5leHRyYWN0UEtDRUtleUZyb21TdGF0ZVBhcmFtKG4pLGUpfWVsc2UgYS5zdG9yYWdlPT09RS5XZWJXb3JrZXImJmkmJih5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5zZXRQS0NFQ29kZShpLG51bGwhPW8/bzoiIikpO3JldHVybiB0P3RoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LnJlcXVlc3RBY2Nlc3NUb2tlbih0LG51bGwhPW4/bjoiIixudWxsIT1vP286IiIsdm9pZCAwLHMpLnRoZW4oKCgpPT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGEuc3RvcmFnZSE9PUUuV2ViV29ya2VyPyhSLnNldFNpZ25PdXRVUkwoeWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0U2lnbk91dFVSTCgpLGEuY2xpZW50SUQsdGhpcy5faW5zdGFuY2VJRCksdGhpcy5fc3BhSGVscGVyJiYodGhpcy5fc3BhSGVscGVyLmNsZWFyUmVmcmVzaFRva2VuVGltZW91dCgpLHRoaXMuX3NwYUhlbHBlci5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KHRoaXMpKSxyJiYiZnVuY3Rpb24iPT10eXBlb2YgciYmYS5lbmFibGVPSURDU2Vzc2lvbk1hbmFnZW1lbnQmJnIoKSk6dGhpcy5fc3BhSGVscGVyJiZ0aGlzLl9zcGFIZWxwZXIucmVmcmVzaEFjY2Vzc1Rva2VuQXV0b21hdGljYWxseSh0aGlzKSx0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRCYXNpY1VzZXJJbmZvKCl9KSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKTpQcm9taXNlLnJlamVjdChuZXcgYygiU1BBLUFVVEhfSEVMUEVSLVJBVDEtTkYwMSIsIk5vIGF1dGhvcml6YXRpb24gY29kZS4iLCJObyBhdXRob3JpemF0aW9uIGNvZGUgd2FzIGZvdW5kLiIpKX0pKX10cnlTaWduSW5TaWxlbnRseSh0LG4scixpLG8pe3ZhciBzO3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoUi5pc0luaXRpYWxpemVkU2lsZW50U2lnbkluKCkpcmV0dXJuIHlpZWxkIHIucmVjZWl2ZVByb21wdE5vbmVSZXNwb25zZSgpLFByb21pc2UucmVzb2x2ZSh7YWxsb3dlZFNjb3BlczoiIixkaXNwbGF5TmFtZToiIixlbWFpbDoiIixzZXNzaW9uU3RhdGU6IiIsc3ViOiIiLHRlbmFudERvbWFpbjoiIix1c2VybmFtZToiIn0pO2NvbnN0IGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJwSUZyYW1lIiksYz1udWxsPT09KHM9bnVsbD09YT92b2lkIDA6YS5jb250ZW50RG9jdW1lbnQpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmdldEVsZW1lbnRCeUlkKCJwcm9tcHROb25lSUZyYW1lIik7dHJ5e2NvbnN0IGU9eWllbGQgdChpKTtjLnNyYz1lfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX1yZXR1cm4gbmV3IFByb21pc2UoKCh0LHIpPT57Y29uc3QgaT1zZXRUaW1lb3V0KCgoKT0+e3QoITEpfSksMWU0KSxzPWE9PmUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt2YXIgZSxjLHUsbDtjb25zdCBkPWEuZGF0YTsiY2hlY2tfc2Vzc2lvbl9zaWduZWRfb3V0Ij09KG51bGw9PWQ/dm9pZCAwOmQudHlwZSkmJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIscyksY2xlYXJUaW1lb3V0KGkpLHQoITEpKSwiY2hlY2tfc2Vzc2lvbl9zaWduZWRfaW4iPT0obnVsbD09ZD92b2lkIDA6ZC50eXBlKSYmKG51bGw9PT0oZT1udWxsPT1kP3ZvaWQgMDpkLmRhdGEpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmNvZGUpJiZuKG51bGw9PT0oYz1udWxsPT1kP3ZvaWQgMDpkLmRhdGEpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLmNvZGUsbnVsbD09PSh1PW51bGw9PWQ/dm9pZCAwOmQuZGF0YSl8fHZvaWQgMD09PXU/dm9pZCAwOnUuc2Vzc2lvblN0YXRlLG51bGw9PT0obD1udWxsPT1kP3ZvaWQgMDpkLmRhdGEpfHx2b2lkIDA9PT1sP3ZvaWQgMDpsLnN0YXRlLG8pLnRoZW4oKGU9Pnt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIscyksdChlKX0pKS5jYXRjaCgoZT0+e3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixzKSxyKGUpfSkpLmZpbmFsbHkoKCgpPT57Y2xlYXJUaW1lb3V0KGkpfSkpfSkpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixzKX0pKX0pKX1oYW5kbGVTaWduSW4odCxuLHIpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpO2lmKHlpZWxkIHQoKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHthbGxvd2VkU2NvcGVzOiIiLGRpc3BsYXlOYW1lOiIiLGVtYWlsOiIiLHNlc3Npb25TdGF0ZToiIixzdWI6IiIsdGVuYW50RG9tYWluOiIiLHVzZXJuYW1lOiIifSk7aWYoZS5zdG9yYWdlIT09RS5XZWJXb3JrZXImJih5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5pc0F1dGhlbnRpY2F0ZWQoKSkpcmV0dXJuIHRoaXMuX3NwYUhlbHBlci5jbGVhclJlZnJlc2hUb2tlblRpbWVvdXQoKSx0aGlzLl9zcGFIZWxwZXIucmVmcmVzaEFjY2Vzc1Rva2VuQXV0b21hdGljYWxseSh0aGlzKSxlLmVuYWJsZU9JRENTZXNzaW9uTWFuYWdlbWVudCYmbigpLFByb21pc2UucmVzb2x2ZSh5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRCYXNpY1VzZXJJbmZvKCkpO2NvbnN0IGk9bmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZikuc2VhcmNoUGFyYW1zLmdldCh3KSxvPW5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoXyk7aWYoaSl7Y29uc3QgZT1uZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTt0aHJvdyBlLnNlYXJjaFBhcmFtcy5kZWxldGUodyksZS5zZWFyY2hQYXJhbXMuZGVsZXRlKF8pLGhpc3RvcnkucHVzaFN0YXRlKG51bGwsZG9jdW1lbnQudGl0bGUsZS50b1N0cmluZygpKSxuZXcgYygiU1BBLUFVVEhfSEVMUEVSLVNJLVNFMDEiLGksbnVsbCE9bz9vOiIiKX1pZihlLnN0b3JhZ2U9PT1FLldlYldvcmtlciYmcil7Y29uc3QgZT15aWVsZCByKCk7aWYoZSlyZXR1cm4gZX19KSl9YXR0YWNoVG9rZW5Ub1JlcXVlc3RDb25maWcodCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPU9iamVjdC5hc3NpZ24oe2F0dGFjaFRva2VuOiEwfSx0KTtlLmF0dGFjaFRva2VuJiYoZS5zaG91bGRBdHRhY2hJRFBBY2Nlc3NUb2tlbj90LmhlYWRlcnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQuaGVhZGVycykse0F1dGhvcml6YXRpb246IkJlYXJlciAiLmNvbmNhdCh5aWVsZCB0aGlzLmdldElEUEFjY2Vzc1Rva2VuKCkpfSk6dC5oZWFkZXJzPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0LmhlYWRlcnMpLHtBdXRob3JpemF0aW9uOiJCZWFyZXIgIi5jb25jYXQoeWllbGQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpKX0pKX0pKX1nZXRCYXNpY1VzZXJJbmZvKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0QmFzaWNVc2VySW5mbygpfSkpfWdldERlY29kZWRJRFRva2VuKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0RGVjb2RlZElEVG9rZW4oKX0pKX1nZXREZWNvZGVkSURQSURUb2tlbigpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldERlY29kZWRJRFRva2VuKCl9KSl9Z2V0Q3J5cHRvSGVscGVyKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0Q3J5cHRvSGVscGVyKCl9KSl9Z2V0SURUb2tlbigpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldElEVG9rZW4oKX0pKX1nZXRPSURDU2VydmljZUVuZHBvaW50cygpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldE9JRENTZXJ2aWNlRW5kcG9pbnRzKCl9KSl9Z2V0QWNjZXNzVG9rZW4oKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRBY2Nlc3NUb2tlbigpfSkpfWdldElEUEFjY2Vzc1Rva2VuKCl7dmFyIHQ7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gbnVsbD09PSh0PXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YSgpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5hY2Nlc3NfdG9rZW59KSl9Z2V0RGF0YUxheWVyKCl7cmV0dXJuIHRoaXMuX2RhdGFMYXllcn1pc0F1dGhlbnRpY2F0ZWQoKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5pc0F1dGhlbnRpY2F0ZWQoKX0pKX19Y2xhc3MgQXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudD1lLHRoaXMuX2RhdGFMYXllcj10aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXREYXRhTGF5ZXIoKX1yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KHQpe3ZhciBuLHI7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighKG51bGwhPT0ocj1udWxsPT09KG49eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldENvbmZpZ0RhdGEoKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4ucGVyaW9kaWNUb2tlblJlZnJlc2gpJiZ2b2lkIDAhPT1yJiZyKSlyZXR1cm47Y29uc3Qgbz15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoKTtpZihvLnJlZnJlc2hfdG9rZW4pe2NvbnN0IG49cGFyc2VJbnQoby5leHBpcmVzX2luKSxyPXNldFRpbWVvdXQoKCgpPT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdC5yZWZyZXNoQWNjZXNzVG9rZW4oKX0pKSksMWUzKihuPD0xMD9uOm4tMTApKTt5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcihpLEpTT04uc3RyaW5naWZ5KHIpKX19KSl9Z2V0UmVmcmVzaFRpbWVvdXRUaW1lcigpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGkpKT9KU09OLnBhcnNlKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGkpKTotMX0pKX1jbGVhclJlZnJlc2hUb2tlblRpbWVvdXQodCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZih0KXJldHVybiB2b2lkIGNsZWFyVGltZW91dCh0KTtjb25zdCBlPXlpZWxkIHRoaXMuZ2V0UmVmcmVzaFRpbWVvdXRUaW1lcigpOy0xIT09ZSYmY2xlYXJUaW1lb3V0KGUpfSkpfX12YXIgQz0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIEQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHQiKT9lLmRlZmF1bHQ6ZX1mdW5jdGlvbiBQKGUpe2lmKGUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbixyLmdldD9yOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlW25dfX0pfSkpLHR9dmFyIE8sST17ZXhwb3J0czp7fX0sVT1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19LEw9VSxIPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsTT0oTz1PYmplY3QuY3JlYXRlKG51bGwpLGZ1bmN0aW9uKGUpe3ZhciB0PUguY2FsbChlKTtyZXR1cm4gT1t0XXx8KE9bdF09dC5zbGljZSg4LC0xKS50b0xvd2VyQ2FzZSgpKX0pO2Z1bmN0aW9uIGooZSl7cmV0dXJuIGU9ZS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKHQpe3JldHVybiBNKHQpPT09ZX19ZnVuY3Rpb24gTihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKX1mdW5jdGlvbiB4KGUpe3JldHVybiB2b2lkIDA9PT1lfXZhciBxPWooIkFycmF5QnVmZmVyIik7ZnVuY3Rpb24gQihlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGV9ZnVuY3Rpb24gRihlKXtyZXR1cm4gbnVsbCE9PWUmJiJvYmplY3QiPT10eXBlb2YgZX1mdW5jdGlvbiBLKGUpe2lmKCJvYmplY3QiIT09TShlKSlyZXR1cm4hMTt2YXIgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT10fHx0PT09T2JqZWN0LnByb3RvdHlwZX12YXIgSj1qKCJEYXRlIiksVz1qKCJGaWxlIiksej1qKCJCbG9iIiksVj1qKCJGaWxlTGlzdCIpO2Z1bmN0aW9uIFkoZSl7cmV0dXJuIltvYmplY3QgRnVuY3Rpb25dIj09PUguY2FsbChlKX12YXIgRz1qKCJVUkxTZWFyY2hQYXJhbXMiKTtmdW5jdGlvbiBYKGUsdCl7aWYobnVsbCE9ZSlpZigib2JqZWN0IiE9dHlwZW9mIGUmJihlPVtlXSksTihlKSlmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspdC5jYWxsKG51bGwsZVtuXSxuLGUpO2Vsc2UgZm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuY2FsbChudWxsLGVbaV0saSxlKX12YXIgJCxaPSgkPSJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhBcnJheSYmT2JqZWN0LmdldFByb3RvdHlwZU9mKFVpbnQ4QXJyYXkpLGZ1bmN0aW9uKGUpe3JldHVybiAkJiZlIGluc3RhbmNlb2YgJH0pO3ZhciBRLGVlPWooIkhUTUxGb3JtRWxlbWVudCIpLHRlPShRPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksZnVuY3Rpb24oZSx0KXtyZXR1cm4gUS5jYWxsKGUsdCl9KSxuZT17aXNBcnJheTpOLGlzQXJyYXlCdWZmZXI6cSxpc0J1ZmZlcjpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUmJiF4KGUpJiZudWxsIT09ZS5jb25zdHJ1Y3RvciYmIXgoZS5jb25zdHJ1Y3RvcikmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yLmlzQnVmZmVyJiZlLmNvbnN0cnVjdG9yLmlzQnVmZmVyKGUpfSxpc0Zvcm1EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSJbb2JqZWN0IEZvcm1EYXRhXSI7cmV0dXJuIGUmJigiZnVuY3Rpb24iPT10eXBlb2YgRm9ybURhdGEmJmUgaW5zdGFuY2VvZiBGb3JtRGF0YXx8SC5jYWxsKGUpPT09dHx8WShlLnRvU3RyaW5nKSYmZS50b1N0cmluZygpPT09dCl9LGlzQXJyYXlCdWZmZXJWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgQXJyYXlCdWZmZXImJkFycmF5QnVmZmVyLmlzVmlldz9BcnJheUJ1ZmZlci5pc1ZpZXcoZSk6ZSYmZS5idWZmZXImJnEoZS5idWZmZXIpfSxpc1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV9LGlzTnVtYmVyOkIsaXNPYmplY3Q6Rixpc1BsYWluT2JqZWN0OkssaXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4gZSYmMD09PU9iamVjdC5rZXlzKGUpLmxlbmd0aCYmT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpPT09T2JqZWN0LnByb3RvdHlwZX0saXNVbmRlZmluZWQ6eCxpc0RhdGU6Sixpc0ZpbGU6Vyxpc0Jsb2I6eixpc0Z1bmN0aW9uOlksaXNTdHJlYW06ZnVuY3Rpb24oZSl7cmV0dXJuIEYoZSkmJlkoZS5waXBlKX0saXNVUkxTZWFyY2hQYXJhbXM6Ryxpc1N0YW5kYXJkQnJvd3NlckVudjpmdW5jdGlvbigpe3ZhciBlO3JldHVybigidW5kZWZpbmVkIj09dHlwZW9mIG5hdmlnYXRvcnx8IlJlYWN0TmF0aXZlIiE9PShlPW5hdmlnYXRvci5wcm9kdWN0KSYmIk5hdGl2ZVNjcmlwdCIhPT1lJiYiTlMiIT09ZSkmJigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCl9LGZvckVhY2g6WCxtZXJnZTpmdW5jdGlvbiBlKCl7dmFyIHQ9e307ZnVuY3Rpb24gbihuLHIpe0sodFtyXSkmJksobik/dFtyXT1lKHRbcl0sbik6SyhuKT90W3JdPWUoe30sbik6TihuKT90W3JdPW4uc2xpY2UoKTp0W3JdPW59Zm9yKHZhciByPTAsaT1hcmd1bWVudHMubGVuZ3RoO3I8aTtyKyspWChhcmd1bWVudHNbcl0sbik7cmV0dXJuIHR9LGV4dGVuZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFgodCwoZnVuY3Rpb24odCxyKXtlW3JdPW4mJiJmdW5jdGlvbiI9PXR5cGVvZiB0P0wodCxuKTp0fSkpLGV9LHRyaW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbT9lLnRyaW0oKTplLnJlcGxhY2UoL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLCIiKX0sc3RyaXBCT006ZnVuY3Rpb24oZSl7cmV0dXJuIDY1Mjc5PT09ZS5jaGFyQ29kZUF0KDApJiYoZT1lLnNsaWNlKDEpKSxlfSxpbmhlcml0czpmdW5jdGlvbihlLHQsbixyKXtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlLHIpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsbiYmT2JqZWN0LmFzc2lnbihlLnByb3RvdHlwZSxuKX0sdG9GbGF0T2JqZWN0OmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8scyxhPXt9O2lmKHQ9dHx8e30sbnVsbD09ZSlyZXR1cm4gdDtkb3tmb3Iobz0oaT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKSkubGVuZ3RoO28tLSA+MDspcz1pW29dLHImJiFyKHMsZSx0KXx8YVtzXXx8KHRbc109ZVtzXSxhW3NdPSEwKTtlPSExIT09biYmT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpfXdoaWxlKGUmJighbnx8bihlLHQpKSYmZSE9PU9iamVjdC5wcm90b3R5cGUpO3JldHVybiB0fSxraW5kT2Y6TSxraW5kT2ZUZXN0OmosZW5kc1dpdGg6ZnVuY3Rpb24oZSx0LG4pe2U9U3RyaW5nKGUpLCh2b2lkIDA9PT1ufHxuPmUubGVuZ3RoKSYmKG49ZS5sZW5ndGgpLG4tPXQubGVuZ3RoO3ZhciByPWUuaW5kZXhPZih0LG4pO3JldHVybi0xIT09ciYmcj09PW59LHRvQXJyYXk6ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIG51bGw7aWYoTihlKSlyZXR1cm4gZTt2YXIgdD1lLmxlbmd0aDtpZighQih0KSlyZXR1cm4gbnVsbDtmb3IodmFyIG49bmV3IEFycmF5KHQpO3QtLSA+MDspblt0XT1lW3RdO3JldHVybiBufSxpc1R5cGVkQXJyYXk6Wixpc0ZpbGVMaXN0OlYsZm9yRWFjaEVudHJ5OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLHI9KGUmJmVbU3ltYm9sLml0ZXJhdG9yXSkuY2FsbChlKTsobj1yLm5leHQoKSkmJiFuLmRvbmU7KXt2YXIgaT1uLnZhbHVlO3QuY2FsbChlLGlbMF0saVsxXSl9fSxtYXRjaEFsbDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyPVtdO251bGwhPT0obj1lLmV4ZWModCkpOylyLnB1c2gobik7cmV0dXJuIHJ9LGlzSFRNTEZvcm06ZWUsaGFzT3duUHJvcGVydHk6dGV9LHJlPSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30saWU9W10sb2U9W10sc2U9InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5P1VpbnQ4QXJyYXk6QXJyYXksYWU9ITE7ZnVuY3Rpb24gY2UoKXthZT0hMDtmb3IodmFyIGU9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLHQ9MCxuPWUubGVuZ3RoO3Q8bjsrK3QpaWVbdF09ZVt0XSxvZVtlLmNoYXJDb2RlQXQodCldPXQ7b2VbIi0iLmNoYXJDb2RlQXQoMCldPTYyLG9lWyJfIi5jaGFyQ29kZUF0KDApXT02M31mdW5jdGlvbiB1ZShlLHQsbil7Zm9yKHZhciByLGksbz1bXSxzPXQ7czxuO3MrPTMpcj0oZVtzXTw8MTYpKyhlW3MrMV08PDgpK2VbcysyXSxvLnB1c2goaWVbKGk9cik+PjE4JjYzXStpZVtpPj4xMiY2M10raWVbaT4+NiY2M10raWVbNjMmaV0pO3JldHVybiBvLmpvaW4oIiIpfWZ1bmN0aW9uIGxlKGUpe3ZhciB0O2FlfHxjZSgpO2Zvcih2YXIgbj1lLmxlbmd0aCxyPW4lMyxpPSIiLG89W10scz0xNjM4MyxhPTAsYz1uLXI7YTxjO2ErPXMpby5wdXNoKHVlKGUsYSxhK3M+Yz9jOmErcykpO3JldHVybiAxPT09cj8odD1lW24tMV0saSs9aWVbdD4+Ml0saSs9aWVbdDw8NCY2M10saSs9Ij09Iik6Mj09PXImJih0PShlW24tMl08PDgpK2Vbbi0xXSxpKz1pZVt0Pj4xMF0saSs9aWVbdD4+NCY2M10saSs9aWVbdDw8MiY2M10saSs9Ij0iKSxvLnB1c2goaSksby5qb2luKCIiKX1mdW5jdGlvbiBkZShlLHQsbixyLGkpe3ZhciBvLHMsYT04Kmktci0xLGM9KDE8PGEpLTEsdT1jPj4xLGw9LTcsZD1uP2ktMTowLGg9bj8tMToxLGY9ZVt0K2RdO2ZvcihkKz1oLG89ZiYoMTw8LWwpLTEsZj4+PS1sLGwrPWE7bD4wO289MjU2Km8rZVt0K2RdLGQrPWgsbC09OCk7Zm9yKHM9byYoMTw8LWwpLTEsbz4+PS1sLGwrPXI7bD4wO3M9MjU2KnMrZVt0K2RdLGQrPWgsbC09OCk7aWYoMD09PW8pbz0xLXU7ZWxzZXtpZihvPT09YylyZXR1cm4gcz9OYU46MS8wKihmPy0xOjEpO3MrPU1hdGgucG93KDIsciksby09dX1yZXR1cm4oZj8tMToxKSpzKk1hdGgucG93KDIsby1yKX1mdW5jdGlvbiBoZShlLHQsbixyLGksbyl7dmFyIHMsYSxjLHU9OCpvLWktMSxsPSgxPDx1KS0xLGQ9bD4+MSxoPTIzPT09aT9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjAsZj1yPzA6by0xLHA9cj8xOi0xLGc9dDwwfHwwPT09dCYmMS90PDA/MTowO2Zvcih0PU1hdGguYWJzKHQpLGlzTmFOKHQpfHx0PT09MS8wPyhhPWlzTmFOKHQpPzE6MCxzPWwpOihzPU1hdGguZmxvb3IoTWF0aC5sb2codCkvTWF0aC5MTjIpLHQqKGM9TWF0aC5wb3coMiwtcykpPDEmJihzLS0sYyo9MiksKHQrPXMrZD49MT9oL2M6aCpNYXRoLnBvdygyLDEtZCkpKmM+PTImJihzKyssYy89MikscytkPj1sPyhhPTAscz1sKTpzK2Q+PTE/KGE9KHQqYy0xKSpNYXRoLnBvdygyLGkpLHMrPWQpOihhPXQqTWF0aC5wb3coMixkLTEpKk1hdGgucG93KDIsaSkscz0wKSk7aT49ODtlW24rZl09MjU1JmEsZis9cCxhLz0yNTYsaS09OCk7Zm9yKHM9czw8aXxhLHUrPWk7dT4wO2VbbitmXT0yNTUmcyxmKz1wLHMvPTI1Nix1LT04KTtlW24rZi1wXXw9MTI4Kmd9dmFyIGZlPXt9LnRvU3RyaW5nLHBlPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PWZlLmNhbGwoZSl9O21lLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dm9pZCAwPT09cmUuVFlQRURfQVJSQVlfU1VQUE9SVHx8cmUuVFlQRURfQVJSQVlfU1VQUE9SVDt2YXIgZ2U9dmUoKTtmdW5jdGlvbiB2ZSgpe3JldHVybiBtZS5UWVBFRF9BUlJBWV9TVVBQT1JUPzIxNDc0ODM2NDc6MTA3Mzc0MTgyM31mdW5jdGlvbiB5ZShlLHQpe2lmKHZlKCk8dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgiKTtyZXR1cm4gbWUuVFlQRURfQVJSQVlfU1VQUE9SVD8oZT1uZXcgVWludDhBcnJheSh0KSkuX19wcm90b19fPW1lLnByb3RvdHlwZToobnVsbD09PWUmJihlPW5ldyBtZSh0KSksZS5sZW5ndGg9dCksZX1mdW5jdGlvbiBtZShlLHQsbil7aWYoIShtZS5UWVBFRF9BUlJBWV9TVVBQT1JUfHx0aGlzIGluc3RhbmNlb2YgbWUpKXJldHVybiBuZXcgbWUoZSx0LG4pO2lmKCJudW1iZXIiPT10eXBlb2YgZSl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcigiSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmciKTtyZXR1cm4gU2UodGhpcyxlKX1yZXR1cm4gd2UodGhpcyxlLHQsbil9ZnVuY3Rpb24gd2UoZSx0LG4scil7aWYoIm51bWJlciI9PXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/ZnVuY3Rpb24oZSx0LG4scil7aWYodC5ieXRlTGVuZ3RoLG48MHx8dC5ieXRlTGVuZ3RoPG4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidvZmZzZXQnIGlzIG91dCBvZiBib3VuZHMiKTtpZih0LmJ5dGVMZW5ndGg8bisocnx8MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidsZW5ndGgnIGlzIG91dCBvZiBib3VuZHMiKTt0PXZvaWQgMD09PW4mJnZvaWQgMD09PXI/bmV3IFVpbnQ4QXJyYXkodCk6dm9pZCAwPT09cj9uZXcgVWludDhBcnJheSh0LG4pOm5ldyBVaW50OEFycmF5KHQsbixyKTttZS5UWVBFRF9BUlJBWV9TVVBQT1JUPyhlPXQpLl9fcHJvdG9fXz1tZS5wcm90b3R5cGU6ZT1iZShlLHQpO3JldHVybiBlfShlLHQsbixyKToic3RyaW5nIj09dHlwZW9mIHQ/ZnVuY3Rpb24oZSx0LG4peyJzdHJpbmciPT10eXBlb2YgbiYmIiIhPT1ufHwobj0idXRmOCIpO2lmKCFtZS5pc0VuY29kaW5nKG4pKXRocm93IG5ldyBUeXBlRXJyb3IoJyJlbmNvZGluZyIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpO3ZhciByPTB8UmUodCxuKSxpPShlPXllKGUscikpLndyaXRlKHQsbik7aSE9PXImJihlPWUuc2xpY2UoMCxpKSk7cmV0dXJuIGV9KGUsdCxuKTpmdW5jdGlvbihlLHQpe2lmKGtlKHQpKXt2YXIgbj0wfEVlKHQubGVuZ3RoKTtyZXR1cm4gMD09PShlPXllKGUsbikpLmxlbmd0aHx8dC5jb3B5KGUsMCwwLG4pLGV9aWYodCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8Imxlbmd0aCJpbiB0KXJldHVybiJudW1iZXIiIT10eXBlb2YgdC5sZW5ndGh8fChyPXQubGVuZ3RoKSE9cj95ZShlLDApOmJlKGUsdCk7aWYoIkJ1ZmZlciI9PT10LnR5cGUmJnBlKHQuZGF0YSkpcmV0dXJuIGJlKGUsdC5kYXRhKX12YXIgcjt0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuIil9KGUsdCl9ZnVuY3Rpb24gX2UoZSl7aWYoIm51bWJlciIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJyk7aWYoZTwwKXRocm93IG5ldyBSYW5nZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKX1mdW5jdGlvbiBTZShlLHQpe2lmKF9lKHQpLGU9eWUoZSx0PDA/MDowfEVlKHQpKSwhbWUuVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIG49MDtuPHQ7KytuKWVbbl09MDtyZXR1cm4gZX1mdW5jdGlvbiBiZShlLHQpe3ZhciBuPXQubGVuZ3RoPDA/MDowfEVlKHQubGVuZ3RoKTtlPXllKGUsbik7Zm9yKHZhciByPTA7cjxuO3IrPTEpZVtyXT0yNTUmdFtyXTtyZXR1cm4gZX1mdW5jdGlvbiBFZShlKXtpZihlPj12ZSgpKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4Iit2ZSgpLnRvU3RyaW5nKDE2KSsiIGJ5dGVzIik7cmV0dXJuIDB8ZX1mdW5jdGlvbiBrZShlKXtyZXR1cm4hKG51bGw9PWV8fCFlLl9pc0J1ZmZlcil9ZnVuY3Rpb24gUmUoZSx0KXtpZihrZShlKSlyZXR1cm4gZS5sZW5ndGg7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyYmKEFycmF5QnVmZmVyLmlzVmlldyhlKXx8ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSlyZXR1cm4gZS5ieXRlTGVuZ3RoOyJzdHJpbmciIT10eXBlb2YgZSYmKGU9IiIrZSk7dmFyIG49ZS5sZW5ndGg7aWYoMD09PW4pcmV0dXJuIDA7Zm9yKHZhciByPSExOzspc3dpdGNoKHQpe2Nhc2UiYXNjaWkiOmNhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6cmV0dXJuIG47Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpjYXNlIHZvaWQgMDpyZXR1cm4gWmUoZSkubGVuZ3RoO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gMipuO2Nhc2UiaGV4IjpyZXR1cm4gbj4+PjE7Y2FzZSJiYXNlNjQiOnJldHVybiBRZShlKS5sZW5ndGg7ZGVmYXVsdDppZihyKXJldHVybiBaZShlKS5sZW5ndGg7dD0oIiIrdCkudG9Mb3dlckNhc2UoKSxyPSEwfX1mdW5jdGlvbiBUZShlLHQsbil7dmFyIHI9ITE7aWYoKHZvaWQgMD09PXR8fHQ8MCkmJih0PTApLHQ+dGhpcy5sZW5ndGgpcmV0dXJuIiI7aWYoKHZvaWQgMD09PW58fG4+dGhpcy5sZW5ndGgpJiYobj10aGlzLmxlbmd0aCksbjw9MClyZXR1cm4iIjtpZigobj4+Pj0wKTw9KHQ+Pj49MCkpcmV0dXJuIiI7Zm9yKGV8fChlPSJ1dGY4Iik7Oylzd2l0Y2goZSl7Y2FzZSJoZXgiOnJldHVybiBCZSh0aGlzLHQsbik7Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpyZXR1cm4gamUodGhpcyx0LG4pO2Nhc2UiYXNjaWkiOnJldHVybiB4ZSh0aGlzLHQsbik7Y2FzZSJsYXRpbjEiOmNhc2UiYmluYXJ5IjpyZXR1cm4gcWUodGhpcyx0LG4pO2Nhc2UiYmFzZTY0IjpyZXR1cm4gTWUodGhpcyx0LG4pO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gRmUodGhpcyx0LG4pO2RlZmF1bHQ6aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK2UpO2U9KGUrIiIpLnRvTG93ZXJDYXNlKCkscj0hMH19ZnVuY3Rpb24gQWUoZSx0LG4pe3ZhciByPWVbdF07ZVt0XT1lW25dLGVbbl09cn1mdW5jdGlvbiBDZShlLHQsbixyLGkpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4tMTtpZigic3RyaW5nIj09dHlwZW9mIG4/KHI9bixuPTApOm4+MjE0NzQ4MzY0Nz9uPTIxNDc0ODM2NDc6bjwtMjE0NzQ4MzY0OCYmKG49LTIxNDc0ODM2NDgpLG49K24saXNOYU4obikmJihuPWk/MDplLmxlbmd0aC0xKSxuPDAmJihuPWUubGVuZ3RoK24pLG4+PWUubGVuZ3RoKXtpZihpKXJldHVybi0xO249ZS5sZW5ndGgtMX1lbHNlIGlmKG48MCl7aWYoIWkpcmV0dXJuLTE7bj0wfWlmKCJzdHJpbmciPT10eXBlb2YgdCYmKHQ9bWUuZnJvbSh0LHIpKSxrZSh0KSlyZXR1cm4gMD09PXQubGVuZ3RoPy0xOkRlKGUsdCxuLHIsaSk7aWYoIm51bWJlciI9PXR5cGVvZiB0KXJldHVybiB0Jj0yNTUsbWUuVFlQRURfQVJSQVlfU1VQUE9SVCYmImZ1bmN0aW9uIj09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/aT9VaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSx0LG4pOlVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoZSx0LG4pOkRlKGUsW3RdLG4scixpKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXIiKX1mdW5jdGlvbiBEZShlLHQsbixyLGkpe3ZhciBvLHM9MSxhPWUubGVuZ3RoLGM9dC5sZW5ndGg7aWYodm9pZCAwIT09ciYmKCJ1Y3MyIj09PShyPVN0cmluZyhyKS50b0xvd2VyQ2FzZSgpKXx8InVjcy0yIj09PXJ8fCJ1dGYxNmxlIj09PXJ8fCJ1dGYtMTZsZSI9PT1yKSl7aWYoZS5sZW5ndGg8Mnx8dC5sZW5ndGg8MilyZXR1cm4tMTtzPTIsYS89MixjLz0yLG4vPTJ9ZnVuY3Rpb24gdShlLHQpe3JldHVybiAxPT09cz9lW3RdOmUucmVhZFVJbnQxNkJFKHQqcyl9aWYoaSl7dmFyIGw9LTE7Zm9yKG89bjtvPGE7bysrKWlmKHUoZSxvKT09PXUodCwtMT09PWw/MDpvLWwpKXtpZigtMT09PWwmJihsPW8pLG8tbCsxPT09YylyZXR1cm4gbCpzfWVsc2UtMSE9PWwmJihvLT1vLWwpLGw9LTF9ZWxzZSBmb3IobitjPmEmJihuPWEtYyksbz1uO28+PTA7by0tKXtmb3IodmFyIGQ9ITAsaD0wO2g8YztoKyspaWYodShlLG8raCkhPT11KHQsaCkpe2Q9ITE7YnJlYWt9aWYoZClyZXR1cm4gb31yZXR1cm4tMX1mdW5jdGlvbiBQZShlLHQsbixyKXtuPU51bWJlcihuKXx8MDt2YXIgaT1lLmxlbmd0aC1uO3I/KHI9TnVtYmVyKHIpKT5pJiYocj1pKTpyPWk7dmFyIG89dC5sZW5ndGg7aWYobyUyIT0wKXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgaGV4IHN0cmluZyIpO3I+by8yJiYocj1vLzIpO2Zvcih2YXIgcz0wO3M8cjsrK3Mpe3ZhciBhPXBhcnNlSW50KHQuc3Vic3RyKDIqcywyKSwxNik7aWYoaXNOYU4oYSkpcmV0dXJuIHM7ZVtuK3NdPWF9cmV0dXJuIHN9ZnVuY3Rpb24gT2UoZSx0LG4scil7cmV0dXJuIGV0KFplKHQsZS5sZW5ndGgtbiksZSxuLHIpfWZ1bmN0aW9uIEllKGUsdCxuLHIpe3JldHVybiBldChmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0wO248ZS5sZW5ndGg7KytuKXQucHVzaCgyNTUmZS5jaGFyQ29kZUF0KG4pKTtyZXR1cm4gdH0odCksZSxuLHIpfWZ1bmN0aW9uIFVlKGUsdCxuLHIpe3JldHVybiBJZShlLHQsbixyKX1mdW5jdGlvbiBMZShlLHQsbixyKXtyZXR1cm4gZXQoUWUodCksZSxuLHIpfWZ1bmN0aW9uIEhlKGUsdCxuLHIpe3JldHVybiBldChmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGksbz1bXSxzPTA7czxlLmxlbmd0aCYmISgodC09Mik8MCk7KytzKXI9KG49ZS5jaGFyQ29kZUF0KHMpKT4+OCxpPW4lMjU2LG8ucHVzaChpKSxvLnB1c2gocik7cmV0dXJuIG99KHQsZS5sZW5ndGgtbiksZSxuLHIpfWZ1bmN0aW9uIE1lKGUsdCxuKXtyZXR1cm4gMD09PXQmJm49PT1lLmxlbmd0aD9sZShlKTpsZShlLnNsaWNlKHQsbikpfWZ1bmN0aW9uIGplKGUsdCxuKXtuPU1hdGgubWluKGUubGVuZ3RoLG4pO2Zvcih2YXIgcj1bXSxpPXQ7aTxuOyl7dmFyIG8scyxhLGMsdT1lW2ldLGw9bnVsbCxkPXU+MjM5PzQ6dT4yMjM/Mzp1PjE5MT8yOjE7aWYoaStkPD1uKXN3aXRjaChkKXtjYXNlIDE6dTwxMjgmJihsPXUpO2JyZWFrO2Nhc2UgMjoxMjg9PSgxOTImKG89ZVtpKzFdKSkmJihjPSgzMSZ1KTw8Nnw2MyZvKT4xMjcmJihsPWMpO2JyZWFrO2Nhc2UgMzpvPWVbaSsxXSxzPWVbaSsyXSwxMjg9PSgxOTImbykmJjEyOD09KDE5MiZzKSYmKGM9KDE1JnUpPDwxMnwoNjMmbyk8PDZ8NjMmcyk+MjA0NyYmKGM8NTUyOTZ8fGM+NTczNDMpJiYobD1jKTticmVhaztjYXNlIDQ6bz1lW2krMV0scz1lW2krMl0sYT1lW2krM10sMTI4PT0oMTkyJm8pJiYxMjg9PSgxOTImcykmJjEyOD09KDE5MiZhKSYmKGM9KDE1JnUpPDwxOHwoNjMmbyk8PDEyfCg2MyZzKTw8Nnw2MyZhKT42NTUzNSYmYzwxMTE0MTEyJiYobD1jKX1udWxsPT09bD8obD02NTUzMyxkPTEpOmw+NjU1MzUmJihsLT02NTUzNixyLnB1c2gobD4+PjEwJjEwMjN8NTUyOTYpLGw9NTYzMjB8MTAyMyZsKSxyLnB1c2gobCksaSs9ZH1yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7aWYodDw9TmUpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGUpO3ZhciBuPSIiLHI9MDtmb3IoO3I8dDspbis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZS5zbGljZShyLHIrPU5lKSk7cmV0dXJuIG59KHIpfW1lLnBvb2xTaXplPTgxOTIsbWUuX2F1Z21lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19fPW1lLnByb3RvdHlwZSxlfSxtZS5mcm9tPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gd2UobnVsbCxlLHQsbil9LG1lLlRZUEVEX0FSUkFZX1NVUFBPUlQmJihtZS5wcm90b3R5cGUuX19wcm90b19fPVVpbnQ4QXJyYXkucHJvdG90eXBlLG1lLl9fcHJvdG9fXz1VaW50OEFycmF5KSxtZS5hbGxvYz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBfZSh0KSx0PD0wP3llKGUsdCk6dm9pZCAwIT09bj8ic3RyaW5nIj09dHlwZW9mIHI/eWUoZSx0KS5maWxsKG4scik6eWUoZSx0KS5maWxsKG4pOnllKGUsdCl9KG51bGwsZSx0LG4pfSxtZS5hbGxvY1Vuc2FmZT1mdW5jdGlvbihlKXtyZXR1cm4gU2UobnVsbCxlKX0sbWUuYWxsb2NVbnNhZmVTbG93PWZ1bmN0aW9uKGUpe3JldHVybiBTZShudWxsLGUpfSxtZS5pc0J1ZmZlcj10dCxtZS5jb21wYXJlPWZ1bmN0aW9uKGUsdCl7aWYoIWtlKGUpfHwha2UodCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycyIpO2lmKGU9PT10KXJldHVybiAwO2Zvcih2YXIgbj1lLmxlbmd0aCxyPXQubGVuZ3RoLGk9MCxvPU1hdGgubWluKG4scik7aTxvOysraSlpZihlW2ldIT09dFtpXSl7bj1lW2ldLHI9dFtpXTticmVha31yZXR1cm4gbjxyPy0xOnI8bj8xOjB9LG1lLmlzRW5jb2Rpbmc9ZnVuY3Rpb24oZSl7c3dpdGNoKFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpKXtjYXNlImhleCI6Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpjYXNlImFzY2lpIjpjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOmNhc2UiYmFzZTY0IjpjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LG1lLmNvbmNhdD1mdW5jdGlvbihlLHQpe2lmKCFwZShlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7aWYoMD09PWUubGVuZ3RoKXJldHVybiBtZS5hbGxvYygwKTt2YXIgbjtpZih2b2lkIDA9PT10KWZvcih0PTAsbj0wO248ZS5sZW5ndGg7KytuKXQrPWVbbl0ubGVuZ3RoO3ZhciByPW1lLmFsbG9jVW5zYWZlKHQpLGk9MDtmb3Iobj0wO248ZS5sZW5ndGg7KytuKXt2YXIgbz1lW25dO2lmKCFrZShvKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7by5jb3B5KHIsaSksaSs9by5sZW5ndGh9cmV0dXJuIHJ9LG1lLmJ5dGVMZW5ndGg9UmUsbWUucHJvdG90eXBlLl9pc0J1ZmZlcj0hMCxtZS5wcm90b3R5cGUuc3dhcDE2PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7aWYoZSUyIT0wKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cyIpO2Zvcih2YXIgdD0wO3Q8ZTt0Kz0yKUFlKHRoaXMsdCx0KzEpO3JldHVybiB0aGlzfSxtZS5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7aWYoZSU0IT0wKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cyIpO2Zvcih2YXIgdD0wO3Q8ZTt0Kz00KUFlKHRoaXMsdCx0KzMpLEFlKHRoaXMsdCsxLHQrMik7cmV0dXJuIHRoaXN9LG1lLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTghPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzIik7Zm9yKHZhciB0PTA7dDxlO3QrPTgpQWUodGhpcyx0LHQrNyksQWUodGhpcyx0KzEsdCs2KSxBZSh0aGlzLHQrMix0KzUpLEFlKHRoaXMsdCszLHQrNCk7cmV0dXJuIHRoaXN9LG1lLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBlPTB8dGhpcy5sZW5ndGg7cmV0dXJuIDA9PT1lPyIiOjA9PT1hcmd1bWVudHMubGVuZ3RoP2plKHRoaXMsMCxlKTpUZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG1lLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oZSl7aWYoIWtlKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTtyZXR1cm4gdGhpcz09PWV8fDA9PT1tZS5jb21wYXJlKHRoaXMsZSl9LG1lLnByb3RvdHlwZS5pbnNwZWN0PWZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMubGVuZ3RoPjAmJihlPXRoaXMudG9TdHJpbmcoImhleCIsMCw1MCkubWF0Y2goLy57Mn0vZykuam9pbigiICIpLHRoaXMubGVuZ3RoPjUwJiYoZSs9IiAuLi4gIikpLCI8QnVmZmVyICIrZSsiPiJ9LG1lLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKGUsdCxuLHIsaSl7aWYoIWtlKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTtpZih2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1uJiYobj1lP2UubGVuZ3RoOjApLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PWkmJihpPXRoaXMubGVuZ3RoKSx0PDB8fG4+ZS5sZW5ndGh8fHI8MHx8aT50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib3V0IG9mIHJhbmdlIGluZGV4Iik7aWYocj49aSYmdD49bilyZXR1cm4gMDtpZihyPj1pKXJldHVybi0xO2lmKHQ+PW4pcmV0dXJuIDE7aWYodGhpcz09PWUpcmV0dXJuIDA7Zm9yKHZhciBvPShpPj4+PTApLShyPj4+PTApLHM9KG4+Pj49MCktKHQ+Pj49MCksYT1NYXRoLm1pbihvLHMpLGM9dGhpcy5zbGljZShyLGkpLHU9ZS5zbGljZSh0LG4pLGw9MDtsPGE7KytsKWlmKGNbbF0hPT11W2xdKXtvPWNbbF0scz11W2xdO2JyZWFrfXJldHVybiBvPHM/LTE6czxvPzE6MH0sbWUucHJvdG90eXBlLmluY2x1ZGVzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4tMSE9PXRoaXMuaW5kZXhPZihlLHQsbil9LG1lLnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gQ2UodGhpcyxlLHQsbiwhMCl9LG1lLnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIENlKHRoaXMsZSx0LG4sITEpfSxtZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0LG4scil7aWYodm9pZCAwPT09dClyPSJ1dGY4IixuPXRoaXMubGVuZ3RoLHQ9MDtlbHNlIGlmKHZvaWQgMD09PW4mJiJzdHJpbmciPT10eXBlb2YgdClyPXQsbj10aGlzLmxlbmd0aCx0PTA7ZWxzZXtpZighaXNGaW5pdGUodCkpdGhyb3cgbmV3IEVycm9yKCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCIpO3R8PTAsaXNGaW5pdGUobik/KG58PTAsdm9pZCAwPT09ciYmKHI9InV0ZjgiKSk6KHI9bixuPXZvaWQgMCl9dmFyIGk9dGhpcy5sZW5ndGgtdDtpZigodm9pZCAwPT09bnx8bj5pKSYmKG49aSksZS5sZW5ndGg+MCYmKG48MHx8dDwwKXx8dD50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMiKTtyfHwocj0idXRmOCIpO2Zvcih2YXIgbz0hMTs7KXN3aXRjaChyKXtjYXNlImhleCI6cmV0dXJuIFBlKHRoaXMsZSx0LG4pO2Nhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6cmV0dXJuIE9lKHRoaXMsZSx0LG4pO2Nhc2UiYXNjaWkiOnJldHVybiBJZSh0aGlzLGUsdCxuKTtjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiBVZSh0aGlzLGUsdCxuKTtjYXNlImJhc2U2NCI6cmV0dXJuIExlKHRoaXMsZSx0LG4pO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gSGUodGhpcyxlLHQsbik7ZGVmYXVsdDppZihvKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrcik7cj0oIiIrcikudG9Mb3dlckNhc2UoKSxvPSEwfX0sbWUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJCdWZmZXIiLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX07dmFyIE5lPTQwOTY7ZnVuY3Rpb24geGUoZSx0LG4pe3ZhciByPSIiO249TWF0aC5taW4oZS5sZW5ndGgsbik7Zm9yKHZhciBpPXQ7aTxuOysraSlyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDEyNyZlW2ldKTtyZXR1cm4gcn1mdW5jdGlvbiBxZShlLHQsbil7dmFyIHI9IiI7bj1NYXRoLm1pbihlLmxlbmd0aCxuKTtmb3IodmFyIGk9dDtpPG47KytpKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUoZVtpXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQmUoZSx0LG4pe3ZhciByPWUubGVuZ3RoOyghdHx8dDwwKSYmKHQ9MCksKCFufHxuPDB8fG4+cikmJihuPXIpO2Zvcih2YXIgaT0iIixvPXQ7bzxuOysrbylpKz0kZShlW29dKTtyZXR1cm4gaX1mdW5jdGlvbiBGZShlLHQsbil7Zm9yKHZhciByPWUuc2xpY2UodCxuKSxpPSIiLG89MDtvPHIubGVuZ3RoO28rPTIpaSs9U3RyaW5nLmZyb21DaGFyQ29kZShyW29dKzI1NipyW28rMV0pO3JldHVybiBpfWZ1bmN0aW9uIEtlKGUsdCxuKXtpZihlJTEhPTB8fGU8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib2Zmc2V0IGlzIG5vdCB1aW50Iik7aWYoZSt0Pm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgiKX1mdW5jdGlvbiBKZShlLHQsbixyLGksbyl7aWYoIWtlKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZih0Pml8fHQ8byl0aHJvdyBuZXcgUmFuZ2VFcnJvcignInZhbHVlIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJyk7aWYobityPmUubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKX1mdW5jdGlvbiBXZShlLHQsbixyKXt0PDAmJih0PTY1NTM1K3QrMSk7Zm9yKHZhciBpPTAsbz1NYXRoLm1pbihlLmxlbmd0aC1uLDIpO2k8bzsrK2kpZVtuK2ldPSh0JjI1NTw8OCoocj9pOjEtaSkpPj4+OCoocj9pOjEtaSl9ZnVuY3Rpb24gemUoZSx0LG4scil7dDwwJiYodD00Mjk0OTY3Mjk1K3QrMSk7Zm9yKHZhciBpPTAsbz1NYXRoLm1pbihlLmxlbmd0aC1uLDQpO2k8bzsrK2kpZVtuK2ldPXQ+Pj44KihyP2k6My1pKSYyNTV9ZnVuY3Rpb24gVmUoZSx0LG4scixpLG8pe2lmKG4rcj5lLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7aWYobjwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKX1mdW5jdGlvbiBZZShlLHQsbixyLGkpe3JldHVybiBpfHxWZShlLDAsbiw0KSxoZShlLHQsbixyLDIzLDQpLG4rNH1mdW5jdGlvbiBHZShlLHQsbixyLGkpe3JldHVybiBpfHxWZShlLDAsbiw4KSxoZShlLHQsbixyLDUyLDgpLG4rOH1tZS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPXRoaXMubGVuZ3RoO2lmKChlPX5+ZSk8MD8oZSs9cik8MCYmKGU9MCk6ZT5yJiYoZT1yKSwodD12b2lkIDA9PT10P3I6fn50KTwwPyh0Kz1yKTwwJiYodD0wKTp0PnImJih0PXIpLHQ8ZSYmKHQ9ZSksbWUuVFlQRURfQVJSQVlfU1VQUE9SVCkobj10aGlzLnN1YmFycmF5KGUsdCkpLl9fcHJvdG9fXz1tZS5wcm90b3R5cGU7ZWxzZXt2YXIgaT10LWU7bj1uZXcgbWUoaSx2b2lkIDApO2Zvcih2YXIgbz0wO288aTsrK28pbltvXT10aGlzW28rZV19cmV0dXJuIG59LG1lLnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uKGUsdCxuKXtlfD0wLHR8PTAsbnx8S2UoZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9dGhpc1tlXSxpPTEsbz0wOysrbzx0JiYoaSo9MjU2KTspcis9dGhpc1tlK29dKmk7cmV0dXJuIHJ9LG1lLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKGUsdCxuKXtlfD0wLHR8PTAsbnx8S2UoZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9dGhpc1tlKy0tdF0saT0xO3Q+MCYmKGkqPTI1Nik7KXIrPXRoaXNbZSstLXRdKmk7cmV0dXJuIHJ9LG1lLnByb3RvdHlwZS5yZWFkVUludDg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8S2UoZSwxLHRoaXMubGVuZ3RoKSx0aGlzW2VdfSxtZS5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fEtlKGUsMix0aGlzLmxlbmd0aCksdGhpc1tlXXx0aGlzW2UrMV08PDh9LG1lLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8S2UoZSwyLHRoaXMubGVuZ3RoKSx0aGlzW2VdPDw4fHRoaXNbZSsxXX0sbWUucHJvdG90eXBlLnJlYWRVSW50MzJMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxLZShlLDQsdGhpcy5sZW5ndGgpLCh0aGlzW2VdfHRoaXNbZSsxXTw8OHx0aGlzW2UrMl08PDE2KSsxNjc3NzIxNip0aGlzW2UrM119LG1lLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8S2UoZSw0LHRoaXMubGVuZ3RoKSwxNjc3NzIxNip0aGlzW2VdKyh0aGlzW2UrMV08PDE2fHRoaXNbZSsyXTw8OHx0aGlzW2UrM10pfSxtZS5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKGUsdCxuKXtlfD0wLHR8PTAsbnx8S2UoZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9dGhpc1tlXSxpPTEsbz0wOysrbzx0JiYoaSo9MjU2KTspcis9dGhpc1tlK29dKmk7cmV0dXJuIHI+PShpKj0xMjgpJiYoci09TWF0aC5wb3coMiw4KnQpKSxyfSxtZS5wcm90b3R5cGUucmVhZEludEJFPWZ1bmN0aW9uKGUsdCxuKXtlfD0wLHR8PTAsbnx8S2UoZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9dCxpPTEsbz10aGlzW2UrLS1yXTtyPjAmJihpKj0yNTYpOylvKz10aGlzW2UrLS1yXSppO3JldHVybiBvPj0oaSo9MTI4KSYmKG8tPU1hdGgucG93KDIsOCp0KSksb30sbWUucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fEtlKGUsMSx0aGlzLmxlbmd0aCksMTI4JnRoaXNbZV0/LTEqKDI1NS10aGlzW2VdKzEpOnRoaXNbZV19LG1lLnByb3RvdHlwZS5yZWFkSW50MTZMRT1mdW5jdGlvbihlLHQpe3R8fEtlKGUsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1tlXXx0aGlzW2UrMV08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LG1lLnByb3RvdHlwZS5yZWFkSW50MTZCRT1mdW5jdGlvbihlLHQpe3R8fEtlKGUsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1tlKzFdfHRoaXNbZV08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LG1lLnByb3RvdHlwZS5yZWFkSW50MzJMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxLZShlLDQsdGhpcy5sZW5ndGgpLHRoaXNbZV18dGhpc1tlKzFdPDw4fHRoaXNbZSsyXTw8MTZ8dGhpc1tlKzNdPDwyNH0sbWUucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fEtlKGUsNCx0aGlzLmxlbmd0aCksdGhpc1tlXTw8MjR8dGhpc1tlKzFdPDwxNnx0aGlzW2UrMl08PDh8dGhpc1tlKzNdfSxtZS5wcm90b3R5cGUucmVhZEZsb2F0TEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8S2UoZSw0LHRoaXMubGVuZ3RoKSxkZSh0aGlzLGUsITAsMjMsNCl9LG1lLnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxLZShlLDQsdGhpcy5sZW5ndGgpLGRlKHRoaXMsZSwhMSwyMyw0KX0sbWUucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxLZShlLDgsdGhpcy5sZW5ndGgpLGRlKHRoaXMsZSwhMCw1Miw4KX0sbWUucHJvdG90eXBlLnJlYWREb3VibGVCRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxLZShlLDgsdGhpcy5sZW5ndGgpLGRlKHRoaXMsZSwhMSw1Miw4KX0sbWUucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKGUsdCxuLHIpeyhlPStlLHR8PTAsbnw9MCxyKXx8SmUodGhpcyxlLHQsbixNYXRoLnBvdygyLDgqbiktMSwwKTt2YXIgaT0xLG89MDtmb3IodGhpc1t0XT0yNTUmZTsrK288biYmKGkqPTI1Nik7KXRoaXNbdCtvXT1lL2kmMjU1O3JldHVybiB0K259LG1lLnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbihlLHQsbixyKXsoZT0rZSx0fD0wLG58PTAscil8fEplKHRoaXMsZSx0LG4sTWF0aC5wb3coMiw4Km4pLTEsMCk7dmFyIGk9bi0xLG89MTtmb3IodGhpc1t0K2ldPTI1NSZlOy0taT49MCYmKG8qPTI1Nik7KXRoaXNbdCtpXT1lL28mMjU1O3JldHVybiB0K259LG1lLnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT0rZSx0fD0wLG58fEplKHRoaXMsZSx0LDEsMjU1LDApLG1lLlRZUEVEX0FSUkFZX1NVUFBPUlR8fChlPU1hdGguZmxvb3IoZSkpLHRoaXNbdF09MjU1JmUsdCsxfSxtZS5wcm90b3R5cGUud3JpdGVVSW50MTZMRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxKZSh0aGlzLGUsdCwyLDY1NTM1LDApLG1lLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09MjU1JmUsdGhpc1t0KzFdPWU+Pj44KTpXZSh0aGlzLGUsdCwhMCksdCsyfSxtZS5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxKZSh0aGlzLGUsdCwyLDY1NTM1LDApLG1lLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09ZT4+PjgsdGhpc1t0KzFdPTI1NSZlKTpXZSh0aGlzLGUsdCwhMSksdCsyfSxtZS5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxKZSh0aGlzLGUsdCw0LDQyOTQ5NjcyOTUsMCksbWUuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0KzNdPWU+Pj4yNCx0aGlzW3QrMl09ZT4+PjE2LHRoaXNbdCsxXT1lPj4+OCx0aGlzW3RdPTI1NSZlKTp6ZSh0aGlzLGUsdCwhMCksdCs0fSxtZS5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxKZSh0aGlzLGUsdCw0LDQyOTQ5NjcyOTUsMCksbWUuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT1lPj4+MjQsdGhpc1t0KzFdPWU+Pj4xNix0aGlzW3QrMl09ZT4+PjgsdGhpc1t0KzNdPTI1NSZlKTp6ZSh0aGlzLGUsdCwhMSksdCs0fSxtZS5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbihlLHQsbixyKXtpZihlPStlLHR8PTAsIXIpe3ZhciBpPU1hdGgucG93KDIsOCpuLTEpO0plKHRoaXMsZSx0LG4saS0xLC1pKX12YXIgbz0wLHM9MSxhPTA7Zm9yKHRoaXNbdF09MjU1JmU7KytvPG4mJihzKj0yNTYpOyllPDAmJjA9PT1hJiYwIT09dGhpc1t0K28tMV0mJihhPTEpLHRoaXNbdCtvXT0oZS9zPj4wKS1hJjI1NTtyZXR1cm4gdCtufSxtZS5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbihlLHQsbixyKXtpZihlPStlLHR8PTAsIXIpe3ZhciBpPU1hdGgucG93KDIsOCpuLTEpO0plKHRoaXMsZSx0LG4saS0xLC1pKX12YXIgbz1uLTEscz0xLGE9MDtmb3IodGhpc1t0K29dPTI1NSZlOy0tbz49MCYmKHMqPTI1Nik7KWU8MCYmMD09PWEmJjAhPT10aGlzW3QrbysxXSYmKGE9MSksdGhpc1t0K29dPShlL3M+PjApLWEmMjU1O3JldHVybiB0K259LG1lLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8SmUodGhpcyxlLHQsMSwxMjcsLTEyOCksbWUuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGU9TWF0aC5mbG9vcihlKSksZTwwJiYoZT0yNTUrZSsxKSx0aGlzW3RdPTI1NSZlLHQrMX0sbWUucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxKZSh0aGlzLGUsdCwyLDMyNzY3LC0zMjc2OCksbWUuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT0yNTUmZSx0aGlzW3QrMV09ZT4+PjgpOldlKHRoaXMsZSx0LCEwKSx0KzJ9LG1lLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8SmUodGhpcyxlLHQsMiwzMjc2NywtMzI3NjgpLG1lLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09ZT4+PjgsdGhpc1t0KzFdPTI1NSZlKTpXZSh0aGlzLGUsdCwhMSksdCsyfSxtZS5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT0rZSx0fD0wLG58fEplKHRoaXMsZSx0LDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksbWUuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT0yNTUmZSx0aGlzW3QrMV09ZT4+PjgsdGhpc1t0KzJdPWU+Pj4xNix0aGlzW3QrM109ZT4+PjI0KTp6ZSh0aGlzLGUsdCwhMCksdCs0fSxtZS5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT0rZSx0fD0wLG58fEplKHRoaXMsZSx0LDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksZTwwJiYoZT00Mjk0OTY3Mjk1K2UrMSksbWUuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT1lPj4+MjQsdGhpc1t0KzFdPWU+Pj4xNix0aGlzW3QrMl09ZT4+PjgsdGhpc1t0KzNdPTI1NSZlKTp6ZSh0aGlzLGUsdCwhMSksdCs0fSxtZS5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gWWUodGhpcyxlLHQsITAsbil9LG1lLnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBZZSh0aGlzLGUsdCwhMSxuKX0sbWUucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBHZSh0aGlzLGUsdCwhMCxuKX0sbWUucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBHZSh0aGlzLGUsdCwhMSxuKX0sbWUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSx0LG4scil7aWYobnx8KG49MCkscnx8MD09PXJ8fChyPXRoaXMubGVuZ3RoKSx0Pj1lLmxlbmd0aCYmKHQ9ZS5sZW5ndGgpLHR8fCh0PTApLHI+MCYmcjxuJiYocj1uKSxyPT09bilyZXR1cm4gMDtpZigwPT09ZS5sZW5ndGh8fDA9PT10aGlzLmxlbmd0aClyZXR1cm4gMDtpZih0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMiKTtpZihuPDB8fG4+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzIik7aWYocjwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcyIpO3I+dGhpcy5sZW5ndGgmJihyPXRoaXMubGVuZ3RoKSxlLmxlbmd0aC10PHItbiYmKHI9ZS5sZW5ndGgtdCtuKTt2YXIgaSxvPXItbjtpZih0aGlzPT09ZSYmbjx0JiZ0PHIpZm9yKGk9by0xO2k+PTA7LS1pKWVbaSt0XT10aGlzW2krbl07ZWxzZSBpZihvPDFlM3x8IW1lLlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKGk9MDtpPG87KytpKWVbaSt0XT10aGlzW2krbl07ZWxzZSBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChlLHRoaXMuc3ViYXJyYXkobixuK28pLHQpO3JldHVybiBvfSxtZS5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbihlLHQsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIGUpe2lmKCJzdHJpbmciPT10eXBlb2YgdD8ocj10LHQ9MCxuPXRoaXMubGVuZ3RoKToic3RyaW5nIj09dHlwZW9mIG4mJihyPW4sbj10aGlzLmxlbmd0aCksMT09PWUubGVuZ3RoKXt2YXIgaT1lLmNoYXJDb2RlQXQoMCk7aTwyNTYmJihlPWkpfWlmKHZvaWQgMCE9PXImJiJzdHJpbmciIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nIik7aWYoInN0cmluZyI9PXR5cGVvZiByJiYhbWUuaXNFbmNvZGluZyhyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK3IpfWVsc2UibnVtYmVyIj09dHlwZW9mIGUmJihlJj0yNTUpO2lmKHQ8MHx8dGhpcy5sZW5ndGg8dHx8dGhpcy5sZW5ndGg8bil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiT3V0IG9mIHJhbmdlIGluZGV4Iik7aWYobjw9dClyZXR1cm4gdGhpczt2YXIgbztpZih0Pj4+PTAsbj12b2lkIDA9PT1uP3RoaXMubGVuZ3RoOm4+Pj4wLGV8fChlPTApLCJudW1iZXIiPT10eXBlb2YgZSlmb3Iobz10O288bjsrK28pdGhpc1tvXT1lO2Vsc2V7dmFyIHM9a2UoZSk/ZTpaZShuZXcgbWUoZSxyKS50b1N0cmluZygpKSxhPXMubGVuZ3RoO2ZvcihvPTA7bzxuLXQ7KytvKXRoaXNbbyt0XT1zW28lYV19cmV0dXJuIHRoaXN9O3ZhciBYZT0vW14rXC8wLTlBLVphLXotX10vZztmdW5jdGlvbiAkZShlKXtyZXR1cm4gZTwxNj8iMCIrZS50b1N0cmluZygxNik6ZS50b1N0cmluZygxNil9ZnVuY3Rpb24gWmUoZSx0KXt2YXIgbjt0PXR8fDEvMDtmb3IodmFyIHI9ZS5sZW5ndGgsaT1udWxsLG89W10scz0wO3M8cjsrK3Mpe2lmKChuPWUuY2hhckNvZGVBdChzKSk+NTUyOTUmJm48NTczNDQpe2lmKCFpKXtpZihuPjU2MzE5KXsodC09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aWYocysxPT09cil7KHQtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWk9bjtjb250aW51ZX1pZihuPDU2MzIwKXsodC09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSksaT1uO2NvbnRpbnVlfW49NjU1MzYrKGktNTUyOTY8PDEwfG4tNTYzMjApfWVsc2UgaSYmKHQtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2lmKGk9bnVsbCxuPDEyOCl7aWYoKHQtPTEpPDApYnJlYWs7by5wdXNoKG4pfWVsc2UgaWYobjwyMDQ4KXtpZigodC09Mik8MClicmVhaztvLnB1c2gobj4+NnwxOTIsNjMmbnwxMjgpfWVsc2UgaWYobjw2NTUzNil7aWYoKHQtPTMpPDApYnJlYWs7by5wdXNoKG4+PjEyfDIyNCxuPj42JjYzfDEyOCw2MyZufDEyOCl9ZWxzZXtpZighKG48MTExNDExMikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGNvZGUgcG9pbnQiKTtpZigodC09NCk8MClicmVhaztvLnB1c2gobj4+MTh8MjQwLG4+PjEyJjYzfDEyOCxuPj42JjYzfDEyOCw2MyZufDEyOCl9fXJldHVybiBvfWZ1bmN0aW9uIFFlKGUpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLHM7YWV8fGNlKCk7dmFyIGE9ZS5sZW5ndGg7aWYoYSU0PjApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Iik7bz0iPSI9PT1lW2EtMl0/MjoiPSI9PT1lW2EtMV0/MTowLHM9bmV3IHNlKDMqYS80LW8pLHI9bz4wP2EtNDphO3ZhciBjPTA7Zm9yKHQ9MCxuPTA7dDxyO3QrPTQsbis9MylpPW9lW2UuY2hhckNvZGVBdCh0KV08PDE4fG9lW2UuY2hhckNvZGVBdCh0KzEpXTw8MTJ8b2VbZS5jaGFyQ29kZUF0KHQrMildPDw2fG9lW2UuY2hhckNvZGVBdCh0KzMpXSxzW2MrK109aT4+MTYmMjU1LHNbYysrXT1pPj44JjI1NSxzW2MrK109MjU1Jmk7cmV0dXJuIDI9PT1vPyhpPW9lW2UuY2hhckNvZGVBdCh0KV08PDJ8b2VbZS5jaGFyQ29kZUF0KHQrMSldPj40LHNbYysrXT0yNTUmaSk6MT09PW8mJihpPW9lW2UuY2hhckNvZGVBdCh0KV08PDEwfG9lW2UuY2hhckNvZGVBdCh0KzEpXTw8NHxvZVtlLmNoYXJDb2RlQXQodCsyKV0+PjIsc1tjKytdPWk+PjgmMjU1LHNbYysrXT0yNTUmaSksc30oZnVuY3Rpb24oZSl7aWYoKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbT9lLnRyaW0oKTplLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX0oZSkucmVwbGFjZShYZSwiIikpLmxlbmd0aDwyKXJldHVybiIiO2Zvcig7ZS5sZW5ndGglNCE9MDspZSs9Ij0iO3JldHVybiBlfShlKSl9ZnVuY3Rpb24gZXQoZSx0LG4scil7Zm9yKHZhciBpPTA7aTxyJiYhKGkrbj49dC5sZW5ndGh8fGk+PWUubGVuZ3RoKTsrK2kpdFtpK25dPWVbaV07cmV0dXJuIGl9ZnVuY3Rpb24gdHQoZSl7cmV0dXJuIG51bGwhPWUmJighIWUuX2lzQnVmZmVyfHxudChlKXx8ZnVuY3Rpb24oZSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGUucmVhZEZsb2F0TEUmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnNsaWNlJiZudChlLnNsaWNlKDAsMCkpfShlKSl9ZnVuY3Rpb24gbnQoZSl7cmV0dXJuISFlLmNvbnN0cnVjdG9yJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5jb25zdHJ1Y3Rvci5pc0J1ZmZlciYmZS5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihlKX12YXIgcnQ9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsQnVmZmVyOm1lLElOU1BFQ1RfTUFYX0JZVEVTOjUwLFNsb3dCdWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuK2UhPWUmJihlPTApLG1lLmFsbG9jKCtlKX0saXNCdWZmZXI6dHQsa01heExlbmd0aDpnZX0pLGl0PW5lO2Z1bmN0aW9uIG90KGUsdCxuLHIsaSl7RXJyb3IuY2FsbCh0aGlzKSxFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHRoaXMuY29uc3RydWN0b3IpOnRoaXMuc3RhY2s9KG5ldyBFcnJvcikuc3RhY2ssdGhpcy5tZXNzYWdlPWUsdGhpcy5uYW1lPSJBeGlvc0Vycm9yIix0JiYodGhpcy5jb2RlPXQpLG4mJih0aGlzLmNvbmZpZz1uKSxyJiYodGhpcy5yZXF1ZXN0PXIpLGkmJih0aGlzLnJlc3BvbnNlPWkpfWl0LmluaGVyaXRzKG90LEVycm9yLHt0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm57bWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixudW1iZXI6dGhpcy5udW1iZXIsZmlsZU5hbWU6dGhpcy5maWxlTmFtZSxsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW5OdW1iZXI6dGhpcy5jb2x1bW5OdW1iZXIsc3RhY2s6dGhpcy5zdGFjayxjb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGUsc3RhdHVzOnRoaXMucmVzcG9uc2UmJnRoaXMucmVzcG9uc2Uuc3RhdHVzP3RoaXMucmVzcG9uc2Uuc3RhdHVzOm51bGx9fX0pO3ZhciBzdD1vdC5wcm90b3R5cGUsYXQ9e307WyJFUlJfQkFEX09QVElPTl9WQUxVRSIsIkVSUl9CQURfT1BUSU9OIiwiRUNPTk5BQk9SVEVEIiwiRVRJTUVET1VUIiwiRVJSX05FVFdPUksiLCJFUlJfRlJfVE9PX01BTllfUkVESVJFQ1RTIiwiRVJSX0RFUFJFQ0FURUQiLCJFUlJfQkFEX1JFU1BPTlNFIiwiRVJSX0JBRF9SRVFVRVNUIiwiRVJSX0NBTkNFTEVEIiwiRVJSX05PVF9TVVBQT1JUIiwiRVJSX0lOVkFMSURfVVJMIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7YXRbZV09e3ZhbHVlOmV9fSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG90LGF0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoc3QsImlzQXhpb3NFcnJvciIse3ZhbHVlOiEwfSksb3QuZnJvbT1mdW5jdGlvbihlLHQsbixyLGksbyl7dmFyIHM9T2JqZWN0LmNyZWF0ZShzdCk7cmV0dXJuIGl0LnRvRmxhdE9iamVjdChlLHMsKGZ1bmN0aW9uKGUpe3JldHVybiBlIT09RXJyb3IucHJvdG90eXBlfSkpLG90LmNhbGwocyxlLm1lc3NhZ2UsdCxuLHIsaSkscy5jYXVzZT1lLHMubmFtZT1lLm5hbWUsbyYmT2JqZWN0LmFzc2lnbihzLG8pLHN9O3ZhciBjdD1vdCx1dD0ib2JqZWN0Ij09dHlwZW9mIHNlbGY/c2VsZi5Gb3JtRGF0YTp3aW5kb3cuRm9ybURhdGEsbHQ9bmUsZHQ9Y3QsaHQ9dXQ7ZnVuY3Rpb24gZnQoZSl7cmV0dXJuIGx0LmlzUGxhaW5PYmplY3QoZSl8fGx0LmlzQXJyYXkoZSl9ZnVuY3Rpb24gcHQoZSl7cmV0dXJuIGx0LmVuZHNXaXRoKGUsIltdIik/ZS5zbGljZSgwLC0yKTplfWZ1bmN0aW9uIGd0KGUsdCxuKXtyZXR1cm4gZT9lLmNvbmNhdCh0KS5tYXAoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9cHQoZSksIW4mJnQ/IlsiK2UrIl0iOmV9KSkuam9pbihuPyIuIjoiIik6dH12YXIgdnQ9bHQudG9GbGF0T2JqZWN0KGx0LHt9LG51bGwsKGZ1bmN0aW9uKGUpe3JldHVybi9eaXNbQS1aXS8udGVzdChlKX0pKTt2YXIgeXQ9ZnVuY3Rpb24oZSx0LG4pe2lmKCFsdC5pc09iamVjdChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJ0YXJnZXQgbXVzdCBiZSBhbiBvYmplY3QiKTt0PXR8fG5ldyhodHx8Rm9ybURhdGEpO3ZhciByLGk9KG49bHQudG9GbGF0T2JqZWN0KG4se21ldGFUb2tlbnM6ITAsZG90czohMSxpbmRleGVzOiExfSwhMSwoZnVuY3Rpb24oZSx0KXtyZXR1cm4hbHQuaXNVbmRlZmluZWQodFtlXSl9KSkpLm1ldGFUb2tlbnMsbz1uLnZpc2l0b3J8fGwscz1uLmRvdHMsYT1uLmluZGV4ZXMsYz0obi5CbG9ifHwidW5kZWZpbmVkIiE9dHlwZW9mIEJsb2ImJkJsb2IpJiYoKHI9dCkmJmx0LmlzRnVuY3Rpb24oci5hcHBlbmQpJiYiRm9ybURhdGEiPT09cltTeW1ib2wudG9TdHJpbmdUYWddJiZyW1N5bWJvbC5pdGVyYXRvcl0pO2lmKCFsdC5pc0Z1bmN0aW9uKG8pKXRocm93IG5ldyBUeXBlRXJyb3IoInZpc2l0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uIik7ZnVuY3Rpb24gdShlKXtpZihudWxsPT09ZSlyZXR1cm4iIjtpZihsdC5pc0RhdGUoZSkpcmV0dXJuIGUudG9JU09TdHJpbmcoKTtpZighYyYmbHQuaXNCbG9iKGUpKXRocm93IG5ldyBkdCgiQmxvYiBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgYSBCdWZmZXIgaW5zdGVhZC4iKTtyZXR1cm4gbHQuaXNBcnJheUJ1ZmZlcihlKXx8bHQuaXNUeXBlZEFycmF5KGUpP2MmJiJmdW5jdGlvbiI9PXR5cGVvZiBCbG9iP25ldyBCbG9iKFtlXSk6bWUuZnJvbShlKTplfWZ1bmN0aW9uIGwoZSxuLHIpe3ZhciBvPWU7aWYoZSYmIXImJiJvYmplY3QiPT10eXBlb2YgZSlpZihsdC5lbmRzV2l0aChuLCJ7fSIpKW49aT9uOm4uc2xpY2UoMCwtMiksZT1KU09OLnN0cmluZ2lmeShlKTtlbHNlIGlmKGx0LmlzQXJyYXkoZSkmJmZ1bmN0aW9uKGUpe3JldHVybiBsdC5pc0FycmF5KGUpJiYhZS5zb21lKGZ0KX0oZSl8fGx0LmlzRmlsZUxpc3QoZSl8fGx0LmVuZHNXaXRoKG4sIltdIikmJihvPWx0LnRvQXJyYXkoZSkpKXJldHVybiBuPXB0KG4pLG8uZm9yRWFjaCgoZnVuY3Rpb24oZSxyKXshbHQuaXNVbmRlZmluZWQoZSkmJm51bGwhPT1lJiZ0LmFwcGVuZCghMD09PWE/Z3QoW25dLHIscyk6bnVsbD09PWE/bjpuKyJbXSIsdShlKSl9KSksITE7cmV0dXJuISFmdChlKXx8KHQuYXBwZW5kKGd0KHIsbixzKSx1KGUpKSwhMSl9dmFyIGQ9W10saD1PYmplY3QuYXNzaWduKHZ0LHtkZWZhdWx0VmlzaXRvcjpsLGNvbnZlcnRWYWx1ZTp1LGlzVmlzaXRhYmxlOmZ0fSk7aWYoIWx0LmlzT2JqZWN0KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoImRhdGEgbXVzdCBiZSBhbiBvYmplY3QiKTtyZXR1cm4gZnVuY3Rpb24gZShuLHIpe2lmKCFsdC5pc1VuZGVmaW5lZChuKSl7aWYoLTEhPT1kLmluZGV4T2YobikpdGhyb3cgRXJyb3IoIkNpcmN1bGFyIHJlZmVyZW5jZSBkZXRlY3RlZCBpbiAiK3Iuam9pbigiLiIpKTtkLnB1c2gobiksbHQuZm9yRWFjaChuLChmdW5jdGlvbihuLGkpeyEwPT09KCEobHQuaXNVbmRlZmluZWQobil8fG51bGw9PT1uKSYmby5jYWxsKHQsbixsdC5pc1N0cmluZyhpKT9pLnRyaW0oKTppLHIsaCkpJiZlKG4scj9yLmNvbmNhdChpKTpbaV0pfSkpLGQucG9wKCl9fShlKSx0fSxtdD15dDtmdW5jdGlvbiB3dChlKXt2YXIgdD17IiEiOiIlMjEiLCInIjoiJTI3IiwiKCI6IiUyOCIsIikiOiIlMjkiLCJ+IjoiJTdFIiwiJTIwIjoiKyIsIiUwMCI6IlwwIn07cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKC9bISdcKFwpfl18JTIwfCUwMC9nLChmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pKX1mdW5jdGlvbiBfdChlLHQpe3RoaXMuX3BhaXJzPVtdLGUmJm10KGUsdGhpcyx0KX12YXIgU3Q9X3QucHJvdG90eXBlO1N0LmFwcGVuZD1mdW5jdGlvbihlLHQpe3RoaXMuX3BhaXJzLnB1c2goW2UsdF0pfSxTdC50b1N0cmluZz1mdW5jdGlvbihlKXt2YXIgdD1lP2Z1bmN0aW9uKHQpe3JldHVybiBlLmNhbGwodGhpcyx0LHd0KX06d3Q7cmV0dXJuIHRoaXMuX3BhaXJzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQoZVswXSkrIj0iK3QoZVsxXSl9KSwiIikuam9pbigiJiIpfTt2YXIgYnQ9X3QsRXQ9bmUsa3Q9YnQ7ZnVuY3Rpb24gUnQoZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKC8lM0EvZ2ksIjoiKS5yZXBsYWNlKC8lMjQvZywiJCIpLnJlcGxhY2UoLyUyQy9naSwiLCIpLnJlcGxhY2UoLyUyMC9nLCIrIikucmVwbGFjZSgvJTVCL2dpLCJbIikucmVwbGFjZSgvJTVEL2dpLCJdIil9dmFyIFR0PWZ1bmN0aW9uKGUsdCxuKXtpZighdClyZXR1cm4gZTt2YXIgcj1lLmluZGV4T2YoIiMiKTstMSE9PXImJihlPWUuc2xpY2UoMCxyKSk7dmFyIGksbz1uJiZuLmVuY29kZXx8UnQscz1uJiZuLnNlcmlhbGl6ZTtyZXR1cm4oaT1zP3ModCxuKTpFdC5pc1VSTFNlYXJjaFBhcmFtcyh0KT90LnRvU3RyaW5nKCk6bmV3IGt0KHQsbikudG9TdHJpbmcobykpJiYoZSs9KC0xPT09ZS5pbmRleE9mKCI/Iik/Ij8iOiImIikraSksZX0sQXQ9bmU7ZnVuY3Rpb24gQ3QoKXt0aGlzLmhhbmRsZXJzPVtdfUN0LnByb3RvdHlwZS51c2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLmhhbmRsZXJzLnB1c2goe2Z1bGZpbGxlZDplLHJlamVjdGVkOnQsc3luY2hyb25vdXM6ISFuJiZuLnN5bmNocm9ub3VzLHJ1bldoZW46bj9uLnJ1bldoZW46bnVsbH0pLHRoaXMuaGFuZGxlcnMubGVuZ3RoLTF9LEN0LnByb3RvdHlwZS5lamVjdD1mdW5jdGlvbihlKXt0aGlzLmhhbmRsZXJzW2VdJiYodGhpcy5oYW5kbGVyc1tlXT1udWxsKX0sQ3QucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVycyYmKHRoaXMuaGFuZGxlcnM9W10pfSxDdC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlKXtBdC5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsKGZ1bmN0aW9uKHQpe251bGwhPT10JiZlKHQpfSkpfTt2YXIgRHQ9Q3Q7ZnVuY3Rpb24gUHQoKXt0aHJvdyBuZXcgRXJyb3IoInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQiKX1mdW5jdGlvbiBPdCgpe3Rocm93IG5ldyBFcnJvcigiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9dmFyIEl0PVB0LFV0PU90O2Z1bmN0aW9uIEx0KGUpe2lmKEl0PT09c2V0VGltZW91dClyZXR1cm4gc2V0VGltZW91dChlLDApO2lmKChJdD09PVB0fHwhSXQpJiZzZXRUaW1lb3V0KXJldHVybiBJdD1zZXRUaW1lb3V0LHNldFRpbWVvdXQoZSwwKTt0cnl7cmV0dXJuIEl0KGUsMCl9Y2F0Y2godCl7dHJ5e3JldHVybiBJdC5jYWxsKG51bGwsZSwwKX1jYXRjaCh0KXtyZXR1cm4gSXQuY2FsbCh0aGlzLGUsMCl9fX0iZnVuY3Rpb24iPT10eXBlb2YgcmUuc2V0VGltZW91dCYmKEl0PXNldFRpbWVvdXQpLCJmdW5jdGlvbiI9PXR5cGVvZiByZS5jbGVhclRpbWVvdXQmJihVdD1jbGVhclRpbWVvdXQpO3ZhciBIdCxNdD1bXSxqdD0hMSxOdD0tMTtmdW5jdGlvbiB4dCgpe2p0JiZIdCYmKGp0PSExLEh0Lmxlbmd0aD9NdD1IdC5jb25jYXQoTXQpOk50PS0xLE10Lmxlbmd0aCYmcXQoKSl9ZnVuY3Rpb24gcXQoKXtpZighanQpe3ZhciBlPUx0KHh0KTtqdD0hMDtmb3IodmFyIHQ9TXQubGVuZ3RoO3Q7KXtmb3IoSHQ9TXQsTXQ9W107KytOdDx0OylIdCYmSHRbTnRdLnJ1bigpO050PS0xLHQ9TXQubGVuZ3RofUh0PW51bGwsanQ9ITEsZnVuY3Rpb24oZSl7aWYoVXQ9PT1jbGVhclRpbWVvdXQpcmV0dXJuIGNsZWFyVGltZW91dChlKTtpZigoVXQ9PT1PdHx8IVV0KSYmY2xlYXJUaW1lb3V0KXJldHVybiBVdD1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KGUpO3RyeXtVdChlKX1jYXRjaCh0KXt0cnl7cmV0dXJuIFV0LmNhbGwobnVsbCxlKX1jYXRjaCh0KXtyZXR1cm4gVXQuY2FsbCh0aGlzLGUpfX19KGUpfX1mdW5jdGlvbiBCdChlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fUJ0LnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfTtmdW5jdGlvbiBGdCgpe312YXIgS3Q9RnQsSnQ9RnQsV3Q9RnQsenQ9RnQsVnQ9RnQsWXQ9RnQsR3Q9RnQ7dmFyIFh0PXJlLnBlcmZvcm1hbmNlfHx7fSwkdD1YdC5ub3d8fFh0Lm1vek5vd3x8WHQubXNOb3d8fFh0Lm9Ob3d8fFh0LndlYmtpdE5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07dmFyIFp0PW5ldyBEYXRlO3ZhciBRdD17bmV4dFRpY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTtNdC5wdXNoKG5ldyBCdChlLHQpKSwxIT09TXQubGVuZ3RofHxqdHx8THQocXQpfSx0aXRsZToiYnJvd3NlciIsYnJvd3NlcjohMCxlbnY6e30sYXJndjpbXSx2ZXJzaW9uOiIiLHZlcnNpb25zOnt9LG9uOkt0LGFkZExpc3RlbmVyOkp0LG9uY2U6V3Qsb2ZmOnp0LHJlbW92ZUxpc3RlbmVyOlZ0LHJlbW92ZUFsbExpc3RlbmVyczpZdCxlbWl0Okd0LGJpbmRpbmc6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpfSxjd2Q6ZnVuY3Rpb24oKXtyZXR1cm4iLyJ9LGNoZGlyOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkIil9LHVtYXNrOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGhydGltZTpmdW5jdGlvbihlKXt2YXIgdD0uMDAxKiR0LmNhbGwoWHQpLG49TWF0aC5mbG9vcih0KSxyPU1hdGguZmxvb3IodCUxKjFlOSk7cmV0dXJuIGUmJihuLT1lWzBdLChyLT1lWzFdKTwwJiYobi0tLHIrPTFlOSkpLFtuLHJdfSxwbGF0Zm9ybToiYnJvd3NlciIscmVsZWFzZTp7fSxjb25maWc6e30sdXB0aW1lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlLVp0KS8xZTN9fSxlbj1RdCx0bj1uZSxubj1mdW5jdGlvbihlLHQpe3RuLmZvckVhY2goZSwoZnVuY3Rpb24obixyKXtyIT09dCYmci50b1VwcGVyQ2FzZSgpPT09dC50b1VwcGVyQ2FzZSgpJiYoZVt0XT1uLGRlbGV0ZSBlW3JdKX0pKX0scm49e3NpbGVudEpTT05QYXJzaW5nOiEwLGZvcmNlZEpTT05QYXJzaW5nOiEwLGNsYXJpZnlUaW1lb3V0RXJyb3I6ITF9LG9uPXtpc0Jyb3dzZXI6ITAsY2xhc3Nlczp7VVJMU2VhcmNoUGFyYW1zOiJ1bmRlZmluZWQiIT10eXBlb2YgVVJMU2VhcmNoUGFyYW1zP1VSTFNlYXJjaFBhcmFtczpidCxGb3JtRGF0YTpGb3JtRGF0YSxCbG9iOkJsb2J9LHByb3RvY29sczpbImh0dHAiLCJodHRwcyIsImZpbGUiLCJibG9iIiwidXJsIiwiZGF0YSJdfSxzbj1uZSxhbj15dCxjbj1vbix1bj1uZTt2YXIgbG49ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLG4scixpKXt2YXIgbz1lW2krK107aWYoIl9fcHJvdG9fXyI9PT1vKXJldHVybiEwO3ZhciBzPU51bWJlci5pc0Zpbml0ZSgrbyksYT1pPj1lLmxlbmd0aDtyZXR1cm4gbz0hbyYmdW4uaXNBcnJheShyKT9yLmxlbmd0aDpvLGE/KHVuLmhhc093blByb3BlcnR5KHIsbyk/cltvXT1bcltvXSxuXTpyW29dPW4sIXMpOihyW29dJiZ1bi5pc09iamVjdChyW29dKXx8KHJbb109W10pLHQoZSxuLHJbb10saSkmJnVuLmlzQXJyYXkocltvXSkmJihyW29dPWZ1bmN0aW9uKGUpe3ZhciB0LG4scj17fSxpPU9iamVjdC5rZXlzKGUpLG89aS5sZW5ndGg7Zm9yKHQ9MDt0PG87dCsrKXJbbj1pW3RdXT1lW25dO3JldHVybiByfShyW29dKSksIXMpfWlmKHVuLmlzRm9ybURhdGEoZSkmJnVuLmlzRnVuY3Rpb24oZS5lbnRyaWVzKSl7dmFyIG49e307cmV0dXJuIHVuLmZvckVhY2hFbnRyeShlLChmdW5jdGlvbihlLHIpe3QoZnVuY3Rpb24oZSl7cmV0dXJuIHVuLm1hdGNoQWxsKC9cdyt8XFsoXHcqKV0vZyxlKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiJbXSI9PT1lWzBdPyIiOmVbMV18fGVbMF19KSl9KGUpLHIsbiwwKX0pKSxufXJldHVybiBudWxsfSxkbj1jdCxobj1uZSxmbj1obi5pc1N0YW5kYXJkQnJvd3NlckVudigpP3t3cml0ZTpmdW5jdGlvbihlLHQsbixyLGksbyl7dmFyIHM9W107cy5wdXNoKGUrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KSksaG4uaXNOdW1iZXIobikmJnMucHVzaCgiZXhwaXJlcz0iK25ldyBEYXRlKG4pLnRvR01UU3RyaW5nKCkpLGhuLmlzU3RyaW5nKHIpJiZzLnB1c2goInBhdGg9IityKSxobi5pc1N0cmluZyhpKSYmcy5wdXNoKCJkb21haW49IitpKSwhMD09PW8mJnMucHVzaCgic2VjdXJlIiksZG9jdW1lbnQuY29va2llPXMuam9pbigiOyAiKX0scmVhZDpmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgiKF58O1xccyopKCIrZSsiKT0oW147XSopIikpO3JldHVybiB0P2RlY29kZVVSSUNvbXBvbmVudCh0WzNdKTpudWxsfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dGhpcy53cml0ZShlLCIiLERhdGUubm93KCktODY0ZTUpfX06e3dyaXRlOmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHJlbW92ZTpmdW5jdGlvbigpe319LHBuPWZ1bmN0aW9uKGUpe3JldHVybi9eKFthLXpdW2EtelxkK1wtLl0qOik/XC9cLy9pLnRlc3QoZSl9LGduPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/ZS5yZXBsYWNlKC9cLz9cLyQvLCIiKSsiLyIrdC5yZXBsYWNlKC9eXC8rLywiIik6ZX0sdm49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPSFwbih0KTtyZXR1cm4gZSYmKHJ8fCExPT09bik/Z24oZSx0KTp0fSx5bj1uZSxtbj1bImFnZSIsImF1dGhvcml6YXRpb24iLCJjb250ZW50LWxlbmd0aCIsImNvbnRlbnQtdHlwZSIsImV0YWciLCJleHBpcmVzIiwiZnJvbSIsImhvc3QiLCJpZi1tb2RpZmllZC1zaW5jZSIsImlmLXVubW9kaWZpZWQtc2luY2UiLCJsYXN0LW1vZGlmaWVkIiwibG9jYXRpb24iLCJtYXgtZm9yd2FyZHMiLCJwcm94eS1hdXRob3JpemF0aW9uIiwicmVmZXJlciIsInJldHJ5LWFmdGVyIiwidXNlci1hZ2VudCJdLHduPW5lLF9uPXduLmlzU3RhbmRhcmRCcm93c2VyRW52KCk/ZnVuY3Rpb24oKXt2YXIgZSx0PS8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7ZnVuY3Rpb24gcihlKXt2YXIgcj1lO3JldHVybiB0JiYobi5zZXRBdHRyaWJ1dGUoImhyZWYiLHIpLHI9bi5ocmVmKSxuLnNldEF0dHJpYnV0ZSgiaHJlZiIscikse2hyZWY6bi5ocmVmLHByb3RvY29sOm4ucHJvdG9jb2w/bi5wcm90b2NvbC5yZXBsYWNlKC86JC8sIiIpOiIiLGhvc3Q6bi5ob3N0LHNlYXJjaDpuLnNlYXJjaD9uLnNlYXJjaC5yZXBsYWNlKC9eXD8vLCIiKToiIixoYXNoOm4uaGFzaD9uLmhhc2gucmVwbGFjZSgvXiMvLCIiKToiIixob3N0bmFtZTpuLmhvc3RuYW1lLHBvcnQ6bi5wb3J0LHBhdGhuYW1lOiIvIj09PW4ucGF0aG5hbWUuY2hhckF0KDApP24ucGF0aG5hbWU6Ii8iK24ucGF0aG5hbWV9fXJldHVybiBlPXIod2luZG93LmxvY2F0aW9uLmhyZWYpLGZ1bmN0aW9uKHQpe3ZhciBuPXduLmlzU3RyaW5nKHQpP3IodCk6dDtyZXR1cm4gbi5wcm90b2NvbD09PWUucHJvdG9jb2wmJm4uaG9zdD09PWUuaG9zdH19KCk6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sU249Y3Q7ZnVuY3Rpb24gYm4oZSx0LG4pe1NuLmNhbGwodGhpcyxudWxsPT1lPyJjYW5jZWxlZCI6ZSxTbi5FUlJfQ0FOQ0VMRUQsdCxuKSx0aGlzLm5hbWU9IkNhbmNlbGVkRXJyb3IifW5lLmluaGVyaXRzKGJuLFNuLHtfX0NBTkNFTF9fOiEwfSk7dmFyIEVuPWJuLGtuPW5lLFJuPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztuLnN0YXR1cyYmciYmIXIobi5zdGF0dXMpP3QobmV3IGRuKCJSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICIrbi5zdGF0dXMsW2RuLkVSUl9CQURfUkVRVUVTVCxkbi5FUlJfQkFEX1JFU1BPTlNFXVtNYXRoLmZsb29yKG4uc3RhdHVzLzEwMCktNF0sbi5jb25maWcsbi5yZXF1ZXN0LG4pKTplKG4pfSxUbj1mbixBbj1UdCxDbj12bixEbj1mdW5jdGlvbihlKXt2YXIgdCxuLHIsaT17fTtyZXR1cm4gZT8oeW4uZm9yRWFjaChlLnNwbGl0KCJcbiIpLChmdW5jdGlvbihlKXtpZihyPWUuaW5kZXhPZigiOiIpLHQ9eW4udHJpbShlLnNsaWNlKDAscikpLnRvTG93ZXJDYXNlKCksbj15bi50cmltKGUuc2xpY2UocisxKSksdCl7aWYoaVt0XSYmbW4uaW5kZXhPZih0KT49MClyZXR1cm47aVt0XT0ic2V0LWNvb2tpZSI9PT10PyhpW3RdP2lbdF06W10pLmNvbmNhdChbbl0pOmlbdF0/aVt0XSsiLCAiK246bn19KSksaSk6aX0sUG49X24sT249cm4sSW49Y3QsVW49RW4sTG49ZnVuY3Rpb24oZSl7dmFyIHQ9L14oWy0rXHddezEsMjV9KSg6P1wvXC98OikvLmV4ZWMoZSk7cmV0dXJuIHQmJnRbMV18fCIifSxIbj1vbixNbj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7dmFyIHIsaT1lLmRhdGEsbz1lLmhlYWRlcnMscz1lLnJlc3BvbnNlVHlwZSxhPWUud2l0aFhTUkZUb2tlbjtmdW5jdGlvbiBjKCl7ZS5jYW5jZWxUb2tlbiYmZS5jYW5jZWxUb2tlbi51bnN1YnNjcmliZShyKSxlLnNpZ25hbCYmZS5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYWJvcnQiLHIpfWtuLmlzRm9ybURhdGEoaSkmJmtuLmlzU3RhbmRhcmRCcm93c2VyRW52KCkmJmRlbGV0ZSBvWyJDb250ZW50LVR5cGUiXTt2YXIgdT1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoZS5hdXRoKXt2YXIgbD1lLmF1dGgudXNlcm5hbWV8fCIiLGQ9ZS5hdXRoLnBhc3N3b3JkP3VuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChlLmF1dGgucGFzc3dvcmQpKToiIjtvLkF1dGhvcml6YXRpb249IkJhc2ljICIrYnRvYShsKyI6IitkKX12YXIgaD1DbihlLmJhc2VVUkwsZS51cmwsZS5hbGxvd0Fic29sdXRlVXJscyk7ZnVuY3Rpb24gZigpe2lmKHUpe3ZhciByPSJnZXRBbGxSZXNwb25zZUhlYWRlcnMiaW4gdT9Ebih1LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTpudWxsLGk9e2RhdGE6cyYmInRleHQiIT09cyYmImpzb24iIT09cz91LnJlc3BvbnNlOnUucmVzcG9uc2VUZXh0LHN0YXR1czp1LnN0YXR1cyxzdGF0dXNUZXh0OnUuc3RhdHVzVGV4dCxoZWFkZXJzOnIsY29uZmlnOmUscmVxdWVzdDp1fTtSbigoZnVuY3Rpb24oZSl7dChlKSxjKCl9KSwoZnVuY3Rpb24oZSl7bihlKSxjKCl9KSxpKSx1PW51bGx9fWlmKHUub3BlbihlLm1ldGhvZC50b1VwcGVyQ2FzZSgpLEFuKGgsZS5wYXJhbXMsZS5wYXJhbXNTZXJpYWxpemVyKSwhMCksdS50aW1lb3V0PWUudGltZW91dCwib25sb2FkZW5kImluIHU/dS5vbmxvYWRlbmQ9Zjp1Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3UmJjQ9PT11LnJlYWR5U3RhdGUmJigwIT09dS5zdGF0dXN8fHUucmVzcG9uc2VVUkwmJjA9PT11LnJlc3BvbnNlVVJMLmluZGV4T2YoImZpbGU6IikpJiZzZXRUaW1lb3V0KGYpfSx1Lm9uYWJvcnQ9ZnVuY3Rpb24oKXt1JiYobihuZXcgSW4oIlJlcXVlc3QgYWJvcnRlZCIsSW4uRUNPTk5BQk9SVEVELGUsdSkpLHU9bnVsbCl9LHUub25lcnJvcj1mdW5jdGlvbigpe24obmV3IEluKCJOZXR3b3JrIEVycm9yIixJbi5FUlJfTkVUV09SSyxlLHUpKSx1PW51bGx9LHUub250aW1lb3V0PWZ1bmN0aW9uKCl7dmFyIHQ9ZS50aW1lb3V0PyJ0aW1lb3V0IG9mICIrZS50aW1lb3V0KyJtcyBleGNlZWRlZCI6InRpbWVvdXQgZXhjZWVkZWQiLHI9ZS50cmFuc2l0aW9uYWx8fE9uO2UudGltZW91dEVycm9yTWVzc2FnZSYmKHQ9ZS50aW1lb3V0RXJyb3JNZXNzYWdlKSxuKG5ldyBJbih0LHIuY2xhcmlmeVRpbWVvdXRFcnJvcj9Jbi5FVElNRURPVVQ6SW4uRUNPTk5BQk9SVEVELGUsdSkpLHU9bnVsbH0sa24uaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSYmKGEmJmtuLmlzRnVuY3Rpb24oYSkmJihhPWEoZSkpLGF8fCExIT09YSYmUG4oaCkpKXt2YXIgcD1lLnhzcmZIZWFkZXJOYW1lJiZlLnhzcmZDb29raWVOYW1lJiZUbi5yZWFkKGUueHNyZkNvb2tpZU5hbWUpO3AmJihvW2UueHNyZkhlYWRlck5hbWVdPXApfSJzZXRSZXF1ZXN0SGVhZGVyImluIHUmJmtuLmZvckVhY2gobywoZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT1pJiYiY29udGVudC10eXBlIj09PXQudG9Mb3dlckNhc2UoKT9kZWxldGUgb1t0XTp1LnNldFJlcXVlc3RIZWFkZXIodCxlKX0pKSxrbi5pc1VuZGVmaW5lZChlLndpdGhDcmVkZW50aWFscyl8fCh1LndpdGhDcmVkZW50aWFscz0hIWUud2l0aENyZWRlbnRpYWxzKSxzJiYianNvbiIhPT1zJiYodS5yZXNwb25zZVR5cGU9ZS5yZXNwb25zZVR5cGUpLCJmdW5jdGlvbiI9PXR5cGVvZiBlLm9uRG93bmxvYWRQcm9ncmVzcyYmdS5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsZS5vbkRvd25sb2FkUHJvZ3Jlc3MpLCJmdW5jdGlvbiI9PXR5cGVvZiBlLm9uVXBsb2FkUHJvZ3Jlc3MmJnUudXBsb2FkJiZ1LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsZS5vblVwbG9hZFByb2dyZXNzKSwoZS5jYW5jZWxUb2tlbnx8ZS5zaWduYWwpJiYocj1mdW5jdGlvbih0KXt1JiYobighdHx8dC50eXBlP25ldyBVbihudWxsLGUsdSk6dCksdS5hYm9ydCgpLHU9bnVsbCl9LGUuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4uc3Vic2NyaWJlKHIpLGUuc2lnbmFsJiYoZS5zaWduYWwuYWJvcnRlZD9yKCk6ZS5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLHIpKSksaXx8ITE9PT1pfHwwPT09aXx8IiI9PT1pfHwoaT1udWxsKTt2YXIgZz1MbihoKTtnJiYtMT09PUhuLnByb3RvY29scy5pbmRleE9mKGcpP24obmV3IEluKCJVbnN1cHBvcnRlZCBwcm90b2NvbCAiK2crIjoiLEluLkVSUl9CQURfUkVRVUVTVCxlKSk6dS5zZW5kKGkpfSkpfSxqbj1uZSxObj1ubix4bj1jdCxxbj15dCxCbj1mdW5jdGlvbihlLHQpe3JldHVybiBhbihlLG5ldyBjbi5jbGFzc2VzLlVSTFNlYXJjaFBhcmFtcyxPYmplY3QuYXNzaWduKHt2aXNpdG9yOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBjbi5pc05vZGUmJnNuLmlzQnVmZmVyKGUpPyh0aGlzLmFwcGVuZCh0LGUudG9TdHJpbmcoImJhc2U2NCIpKSwhMSk6ci5kZWZhdWx0VmlzaXRvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSx0KSl9LEZuPW9uLEtuPWxuLEpuPXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn07ZnVuY3Rpb24gV24oZSx0KXsham4uaXNVbmRlZmluZWQoZSkmJmpuLmlzVW5kZWZpbmVkKGVbIkNvbnRlbnQtVHlwZSJdKSYmKGVbIkNvbnRlbnQtVHlwZSJdPXQpfXZhciB6bixWbj17dHJhbnNpdGlvbmFsOnJuLGFkYXB0ZXI6KCgidW5kZWZpbmVkIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0fHx2b2lkIDAhPT1lbiYmIltvYmplY3QgcHJvY2Vzc10iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVuKSkmJih6bj1Nbiksem4pLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGUsdCl7Tm4odCwiQWNjZXB0IiksTm4odCwiQ29udGVudC1UeXBlIik7dmFyIG4scj10JiZ0WyJDb250ZW50LVR5cGUiXXx8IiIsaT1yLmluZGV4T2YoImFwcGxpY2F0aW9uL2pzb24iKT4tMSxvPWpuLmlzT2JqZWN0KGUpO2lmKG8mJmpuLmlzSFRNTEZvcm0oZSkmJihlPW5ldyBGb3JtRGF0YShlKSksam4uaXNGb3JtRGF0YShlKSlyZXR1cm4gaT9KU09OLnN0cmluZ2lmeShLbihlKSk6ZTtpZihqbi5pc0FycmF5QnVmZmVyKGUpfHxqbi5pc0J1ZmZlcihlKXx8am4uaXNTdHJlYW0oZSl8fGpuLmlzRmlsZShlKXx8am4uaXNCbG9iKGUpKXJldHVybiBlO2lmKGpuLmlzQXJyYXlCdWZmZXJWaWV3KGUpKXJldHVybiBlLmJ1ZmZlcjtpZihqbi5pc1VSTFNlYXJjaFBhcmFtcyhlKSlyZXR1cm4gV24odCwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgiKSxlLnRvU3RyaW5nKCk7aWYobyl7aWYoLTEhPT1yLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpKXJldHVybiBCbihlLHRoaXMuZm9ybVNlcmlhbGl6ZXIpLnRvU3RyaW5nKCk7aWYoKG49am4uaXNGaWxlTGlzdChlKSl8fHIuaW5kZXhPZigibXVsdGlwYXJ0L2Zvcm0tZGF0YSIpPi0xKXt2YXIgcz10aGlzLmVudiYmdGhpcy5lbnYuRm9ybURhdGE7cmV0dXJuIHFuKG4/eyJmaWxlc1tdIjplfTplLHMmJm5ldyBzLHRoaXMuZm9ybVNlcmlhbGl6ZXIpfX1yZXR1cm4gb3x8aT8oV24odCwiYXBwbGljYXRpb24vanNvbiIpLGZ1bmN0aW9uKGUsdCxuKXtpZihqbi5pc1N0cmluZyhlKSl0cnl7cmV0dXJuKHR8fEpTT04ucGFyc2UpKGUpLGpuLnRyaW0oZSl9Y2F0Y2goZSl7aWYoIlN5bnRheEVycm9yIiE9PWUubmFtZSl0aHJvdyBlfXJldHVybihufHxKU09OLnN0cmluZ2lmeSkoZSl9KGUpKTplfV0sdHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uKGUpe3ZhciB0PXRoaXMudHJhbnNpdGlvbmFsfHxWbi50cmFuc2l0aW9uYWwsbj10JiZ0LmZvcmNlZEpTT05QYXJzaW5nLHI9Impzb24iPT09dGhpcy5yZXNwb25zZVR5cGU7aWYoZSYmam4uaXNTdHJpbmcoZSkmJihuJiYhdGhpcy5yZXNwb25zZVR5cGV8fHIpKXt2YXIgaT0hKHQmJnQuc2lsZW50SlNPTlBhcnNpbmcpJiZyO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShlKX1jYXRjaChlKXtpZihpKXtpZigiU3ludGF4RXJyb3IiPT09ZS5uYW1lKXRocm93IHhuLmZyb20oZSx4bi5FUlJfQkFEX1JFU1BPTlNFLHRoaXMsbnVsbCx0aGlzLnJlc3BvbnNlKTt0aHJvdyBlfX19cmV0dXJuIGV9XSx0aW1lb3V0OjAseHNyZkNvb2tpZU5hbWU6IlhTUkYtVE9LRU4iLHhzcmZIZWFkZXJOYW1lOiJYLVhTUkYtVE9LRU4iLG1heENvbnRlbnRMZW5ndGg6LTEsbWF4Qm9keUxlbmd0aDotMSxlbnY6e0Zvcm1EYXRhOkZuLmNsYXNzZXMuRm9ybURhdGEsQmxvYjpGbi5jbGFzc2VzLkJsb2J9LHZhbGlkYXRlU3RhdHVzOmZ1bmN0aW9uKGUpe3JldHVybiBlPj0yMDAmJmU8MzAwfSxoZWFkZXJzOntjb21tb246e0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qIn19fTtqbi5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCJdLChmdW5jdGlvbihlKXtWbi5oZWFkZXJzW2VdPXt9fSkpLGpuLmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSwoZnVuY3Rpb24oZSl7Vm4uaGVhZGVyc1tlXT1qbi5tZXJnZShKbil9KSk7dmFyIFluPVZuLEduPW5lLFhuPVluLCRuPWZ1bmN0aW9uKGUpe3JldHVybiEoIWV8fCFlLl9fQ0FOQ0VMX18pfSxabj1uZSxRbj1mdW5jdGlvbihlLHQsbixyKXt2YXIgaT10aGlzfHxYbjtyZXR1cm4gR24uZm9yRWFjaChyLChmdW5jdGlvbihyKXtlPXIuY2FsbChpLGUsdCxuKX0pKSxlfSxlcj0kbix0cj1Zbixucj1Fbixycj1ubjtmdW5jdGlvbiBpcihlKXtpZihlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKSxlLnNpZ25hbCYmZS5zaWduYWwuYWJvcnRlZCl0aHJvdyBuZXcgbnJ9dmFyIG9yPW5lLHNyPWZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgbj17fTtmdW5jdGlvbiByKGUsdCl7cmV0dXJuIG9yLmlzUGxhaW5PYmplY3QoZSkmJm9yLmlzUGxhaW5PYmplY3QodCk/b3IubWVyZ2UoZSx0KTpvci5pc0VtcHR5T2JqZWN0KHQpP29yLm1lcmdlKHt9LGUpOm9yLmlzUGxhaW5PYmplY3QodCk/b3IubWVyZ2Uoe30sdCk6b3IuaXNBcnJheSh0KT90LnNsaWNlKCk6dH1mdW5jdGlvbiBpKG4pe3JldHVybiBvci5pc1VuZGVmaW5lZCh0W25dKT9vci5pc1VuZGVmaW5lZChlW25dKT92b2lkIDA6cih2b2lkIDAsZVtuXSk6cihlW25dLHRbbl0pfWZ1bmN0aW9uIG8oZSl7aWYoIW9yLmlzVW5kZWZpbmVkKHRbZV0pKXJldHVybiByKHZvaWQgMCx0W2VdKX1mdW5jdGlvbiBzKG4pe3JldHVybiBvci5pc1VuZGVmaW5lZCh0W25dKT9vci5pc1VuZGVmaW5lZChlW25dKT92b2lkIDA6cih2b2lkIDAsZVtuXSk6cih2b2lkIDAsdFtuXSl9ZnVuY3Rpb24gYShuKXtyZXR1cm4gbiBpbiB0P3IoZVtuXSx0W25dKTpuIGluIGU/cih2b2lkIDAsZVtuXSk6dm9pZCAwfXZhciBjPXt1cmw6byxtZXRob2Q6byxkYXRhOm8sYmFzZVVSTDpzLHRyYW5zZm9ybVJlcXVlc3Q6cyx0cmFuc2Zvcm1SZXNwb25zZTpzLHBhcmFtc1NlcmlhbGl6ZXI6cyx0aW1lb3V0OnMsdGltZW91dE1lc3NhZ2U6cyx3aXRoQ3JlZGVudGlhbHM6cyx3aXRoWFNSRlRva2VuOnMsYWRhcHRlcjpzLHJlc3BvbnNlVHlwZTpzLHhzcmZDb29raWVOYW1lOnMseHNyZkhlYWRlck5hbWU6cyxvblVwbG9hZFByb2dyZXNzOnMsb25Eb3dubG9hZFByb2dyZXNzOnMsZGVjb21wcmVzczpzLG1heENvbnRlbnRMZW5ndGg6cyxtYXhCb2R5TGVuZ3RoOnMsYmVmb3JlUmVkaXJlY3Q6cyx0cmFuc3BvcnQ6cyxodHRwQWdlbnQ6cyxodHRwc0FnZW50OnMsY2FuY2VsVG9rZW46cyxzb2NrZXRQYXRoOnMscmVzcG9uc2VFbmNvZGluZzpzLHZhbGlkYXRlU3RhdHVzOmF9O3JldHVybiBvci5mb3JFYWNoKE9iamVjdC5rZXlzKGUpLmNvbmNhdChPYmplY3Qua2V5cyh0KSksKGZ1bmN0aW9uKGUpe3ZhciB0PWNbZV18fGkscj10KGUpO29yLmlzVW5kZWZpbmVkKHIpJiZ0IT09YXx8KG5bZV09cil9KSksbn0sYXI9IjAuMzAuMCIsY3I9YXIsdXI9Y3QsbHI9e307WyJvYmplY3QiLCJib29sZWFuIiwibnVtYmVyIiwiZnVuY3Rpb24iLCJzdHJpbmciLCJzeW1ib2wiXS5mb3JFYWNoKChmdW5jdGlvbihlLHQpe2xyW2VdPWZ1bmN0aW9uKG4pe3JldHVybiB0eXBlb2Ygbj09PWV8fCJhIisodDwxPyJuICI6IiAiKStlfX0pKTt2YXIgZHI9e307bHIudHJhbnNpdGlvbmFsPWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7cmV0dXJuIltBeGlvcyB2IitjcisiXSBUcmFuc2l0aW9uYWwgb3B0aW9uICciK2UrIiciK3QrKG4/Ii4gIituOiIiKX1yZXR1cm4gZnVuY3Rpb24obixpLG8pe2lmKCExPT09ZSl0aHJvdyBuZXcgdXIocihpLCIgaGFzIGJlZW4gcmVtb3ZlZCIrKHQ/IiBpbiAiK3Q6IiIpKSx1ci5FUlJfREVQUkVDQVRFRCk7cmV0dXJuIHQmJiFkcltpXSYmKGRyW2ldPSEwLGNvbnNvbGUud2FybihyKGksIiBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHYiK3QrIiBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSIpKSksIWV8fGUobixpLG8pfX07dmFyIGhyPXthc3NlcnRPcHRpb25zOmZ1bmN0aW9uKGUsdCxuKXtpZigib2JqZWN0IiE9dHlwZW9mIGUpdGhyb3cgbmV3IHVyKCJvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0Iix1ci5FUlJfQkFEX09QVElPTl9WQUxVRSk7Zm9yKHZhciByPU9iamVjdC5rZXlzKGUpLGk9ci5sZW5ndGg7aS0tID4wOyl7dmFyIG89cltpXSxzPXRbb107aWYocyl7dmFyIGE9ZVtvXSxjPXZvaWQgMD09PWF8fHMoYSxvLGUpO2lmKCEwIT09Yyl0aHJvdyBuZXcgdXIoIm9wdGlvbiAiK28rIiBtdXN0IGJlICIrYyx1ci5FUlJfQkFEX09QVElPTl9WQUxVRSl9ZWxzZSBpZighMCE9PW4pdGhyb3cgbmV3IHVyKCJVbmtub3duIG9wdGlvbiAiK28sdXIuRVJSX0JBRF9PUFRJT04pfX0sdmFsaWRhdG9yczpscn0sZnI9bmUscHI9VHQsZ3I9RHQsdnI9ZnVuY3Rpb24oZSl7cmV0dXJuIGlyKGUpLGUuaGVhZGVycz1lLmhlYWRlcnN8fHt9LGUuZGF0YT1Rbi5jYWxsKGUsZS5kYXRhLGUuaGVhZGVycyxudWxsLGUudHJhbnNmb3JtUmVxdWVzdCkscnIoZS5oZWFkZXJzLCJBY2NlcHQiKSxycihlLmhlYWRlcnMsIkNvbnRlbnQtVHlwZSIpLGUuaGVhZGVycz1abi5tZXJnZShlLmhlYWRlcnMuY29tbW9ufHx7fSxlLmhlYWRlcnNbZS5tZXRob2RdfHx7fSxlLmhlYWRlcnMpLFpuLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwicG9zdCIsInB1dCIsInBhdGNoIiwiY29tbW9uIl0sKGZ1bmN0aW9uKHQpe2RlbGV0ZSBlLmhlYWRlcnNbdF19KSksKGUuYWRhcHRlcnx8dHIuYWRhcHRlcikoZSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGlyKGUpLHQuZGF0YT1Rbi5jYWxsKGUsdC5kYXRhLHQuaGVhZGVycyx0LnN0YXR1cyxlLnRyYW5zZm9ybVJlc3BvbnNlKSx0fSksKGZ1bmN0aW9uKHQpe3JldHVybiBlcih0KXx8KGlyKGUpLHQmJnQucmVzcG9uc2UmJih0LnJlc3BvbnNlLmRhdGE9UW4uY2FsbChlLHQucmVzcG9uc2UuZGF0YSx0LnJlc3BvbnNlLmhlYWRlcnMsdC5yZXNwb25zZS5zdGF0dXMsZS50cmFuc2Zvcm1SZXNwb25zZSkpKSxQcm9taXNlLnJlamVjdCh0KX0pKX0seXI9c3IsbXI9dm4sd3I9aHIsX3I9d3IudmFsaWRhdG9ycztmdW5jdGlvbiBTcihlKXt0aGlzLmRlZmF1bHRzPWUsdGhpcy5pbnRlcmNlcHRvcnM9e3JlcXVlc3Q6bmV3IGdyLHJlc3BvbnNlOm5ldyBncn19U3IucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXsic3RyaW5nIj09dHlwZW9mIGU/KHQ9dHx8e30pLnVybD1lOnQ9ZXx8e30sKHQ9eXIodGhpcy5kZWZhdWx0cyx0KSkubWV0aG9kP3QubWV0aG9kPXQubWV0aG9kLnRvTG93ZXJDYXNlKCk6dGhpcy5kZWZhdWx0cy5tZXRob2Q/dC5tZXRob2Q9dGhpcy5kZWZhdWx0cy5tZXRob2QudG9Mb3dlckNhc2UoKTp0Lm1ldGhvZD0iZ2V0Ijt2YXIgbj10LnRyYW5zaXRpb25hbDt2b2lkIDAhPT1uJiZ3ci5hc3NlcnRPcHRpb25zKG4se3NpbGVudEpTT05QYXJzaW5nOl9yLnRyYW5zaXRpb25hbChfci5ib29sZWFuKSxmb3JjZWRKU09OUGFyc2luZzpfci50cmFuc2l0aW9uYWwoX3IuYm9vbGVhbiksY2xhcmlmeVRpbWVvdXRFcnJvcjpfci50cmFuc2l0aW9uYWwoX3IuYm9vbGVhbil9LCExKTt2YXIgcj10LnBhcmFtc1NlcmlhbGl6ZXI7bnVsbCE9ciYmKGZyLmlzRnVuY3Rpb24ocik/dC5wYXJhbXNTZXJpYWxpemVyPXtzZXJpYWxpemU6cn06d3IuYXNzZXJ0T3B0aW9ucyhyLHtlbmNvZGU6X3IuZnVuY3Rpb24sc2VyaWFsaXplOl9yLmZ1bmN0aW9ufSwhMCkpO3ZhciBpPVtdLG89ITA7dGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKChmdW5jdGlvbihlKXsiZnVuY3Rpb24iPT10eXBlb2YgZS5ydW5XaGVuJiYhMT09PWUucnVuV2hlbih0KXx8KG89byYmZS5zeW5jaHJvbm91cyxpLnVuc2hpZnQoZS5mdWxmaWxsZWQsZS5yZWplY3RlZCkpfSkpO3ZhciBzLGE9W107aWYodGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7YS5wdXNoKGUuZnVsZmlsbGVkLGUucmVqZWN0ZWQpfSkpLCFvKXt2YXIgYz1bdnIsdm9pZCAwXTtmb3IoQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoYyxpKSxjPWMuY29uY2F0KGEpLHM9UHJvbWlzZS5yZXNvbHZlKHQpO2MubGVuZ3RoOylzPXMudGhlbihjLnNoaWZ0KCksYy5zaGlmdCgpKTtyZXR1cm4gc31mb3IodmFyIHU9dDtpLmxlbmd0aDspe3ZhciBsPWkuc2hpZnQoKSxkPWkuc2hpZnQoKTt0cnl7dT1sKHUpfWNhdGNoKGUpe2QoZSk7YnJlYWt9fXRyeXtzPXZyKHUpfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX1mb3IoO2EubGVuZ3RoOylzPXMudGhlbihhLnNoaWZ0KCksYS5zaGlmdCgpKTtyZXR1cm4gc30sU3IucHJvdG90eXBlLmdldFVyaT1mdW5jdGlvbihlKXtlPXlyKHRoaXMuZGVmYXVsdHMsZSk7dmFyIHQ9bXIoZS5iYXNlVVJMLGUudXJsLGUuYWxsb3dBYnNvbHV0ZVVybHMpO3JldHVybiBwcih0LGUucGFyYW1zLGUucGFyYW1zU2VyaWFsaXplcil9LGZyLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwib3B0aW9ucyJdLChmdW5jdGlvbihlKXtTci5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KHlyKG58fHt9LHttZXRob2Q6ZSx1cmw6dCxkYXRhOihufHx7fSkuZGF0YX0pKX19KSksZnIuZm9yRWFjaChbInBvc3QiLCJwdXQiLCJwYXRjaCJdLChmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3JldHVybiBmdW5jdGlvbihuLHIsaSl7cmV0dXJuIHRoaXMucmVxdWVzdCh5cihpfHx7fSx7bWV0aG9kOmUsaGVhZGVyczp0P3siQ29udGVudC1UeXBlIjoibXVsdGlwYXJ0L2Zvcm0tZGF0YSJ9Ont9LHVybDpuLGRhdGE6cn0pKX19U3IucHJvdG90eXBlW2VdPXQoKSxTci5wcm90b3R5cGVbZSsiRm9ybSJdPXQoITApfSkpO3ZhciBicj1TcixFcj1FbjtmdW5jdGlvbiBrcihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uIik7dmFyIHQ7dGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKChmdW5jdGlvbihlKXt0PWV9KSk7dmFyIG49dGhpczt0aGlzLnByb21pc2UudGhlbigoZnVuY3Rpb24oZSl7aWYobi5fbGlzdGVuZXJzKXtmb3IodmFyIHQ9bi5fbGlzdGVuZXJzLmxlbmd0aDt0LS0gPjA7KW4uX2xpc3RlbmVyc1t0XShlKTtuLl9saXN0ZW5lcnM9bnVsbH19KSksdGhpcy5wcm9taXNlLnRoZW49ZnVuY3Rpb24oZSl7dmFyIHQscj1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7bi5zdWJzY3JpYmUoZSksdD1lfSkpLnRoZW4oZSk7cmV0dXJuIHIuY2FuY2VsPWZ1bmN0aW9uKCl7bi51bnN1YnNjcmliZSh0KX0scn0sZSgoZnVuY3Rpb24oZSxyLGkpe24ucmVhc29ufHwobi5yZWFzb249bmV3IEVyKGUscixpKSx0KG4ucmVhc29uKSl9KSl9a3IucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLnJlYXNvbil0aHJvdyB0aGlzLnJlYXNvbn0sa3IucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihlKXt0aGlzLnJlYXNvbj9lKHRoaXMucmVhc29uKTp0aGlzLl9saXN0ZW5lcnM/dGhpcy5fbGlzdGVuZXJzLnB1c2goZSk6dGhpcy5fbGlzdGVuZXJzPVtlXX0sa3IucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2xpc3RlbmVycyl7dmFyIHQ9dGhpcy5fbGlzdGVuZXJzLmluZGV4T2YoZSk7LTEhPT10JiZ0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKHQsMSl9fSxrci5zb3VyY2U9ZnVuY3Rpb24oKXt2YXIgZSx0PW5ldyBrcigoZnVuY3Rpb24odCl7ZT10fSkpO3JldHVybnt0b2tlbjp0LGNhbmNlbDplfX07dmFyIFJyPWtyLFRyPW5lLEFyPW5lLENyPVUsRHI9YnIsUHI9c3IsT3I9bG47dmFyIElyPWZ1bmN0aW9uIGUodCl7dmFyIG49bmV3IERyKHQpLHI9Q3IoRHIucHJvdG90eXBlLnJlcXVlc3Qsbik7cmV0dXJuIEFyLmV4dGVuZChyLERyLnByb3RvdHlwZSxuKSxBci5leHRlbmQocixuKSxyLmNyZWF0ZT1mdW5jdGlvbihuKXtyZXR1cm4gZShQcih0LG4pKX0scn0oWW4pO0lyLkF4aW9zPURyLElyLkNhbmNlbGVkRXJyb3I9RW4sSXIuQ2FuY2VsVG9rZW49UnIsSXIuaXNDYW5jZWw9JG4sSXIuVkVSU0lPTj1hcixJci50b0Zvcm1EYXRhPXl0LElyLkF4aW9zRXJyb3I9Y3QsSXIuQ2FuY2VsPUlyLkNhbmNlbGVkRXJyb3IsSXIuYWxsPWZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLmFsbChlKX0sSXIuc3ByZWFkPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5hcHBseShudWxsLHQpfX0sSXIuaXNBeGlvc0Vycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBUci5pc09iamVjdChlKSYmITA9PT1lLmlzQXhpb3NFcnJvcn0sSXIuZm9ybVRvSlNPTj1mdW5jdGlvbihlKXtyZXR1cm4gT3IoQXIuaXNIVE1MRm9ybShlKT9uZXcgRm9ybURhdGEoZSk6ZSl9LEkuZXhwb3J0cz1JcixJLmV4cG9ydHMuZGVmYXVsdD1Jcjt2YXIgVXIsTHI9SS5leHBvcnRzO2xldCBIcj1Vcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuYXR0YWNoVG9rZW49KCk9PlByb21pc2UucmVzb2x2ZSgpLHRoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2s9KCk9Pm51bGwsdGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrPSgpPT5udWxsLHRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2s9KCk9Pm51bGwsdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2s9KCk9Pm51bGwsdGhpcy5pbml0PXRoaXMuaW5pdC5iaW5kKHRoaXMpLHRoaXMuc2V0SHR0cFJlcXVlc3RFcnJvckNhbGxiYWNrPXRoaXMuc2V0SHR0cFJlcXVlc3RFcnJvckNhbGxiYWNrLmJpbmQodGhpcyksdGhpcy5zZXRIdHRwUmVxdWVzdEZpbmlzaENhbGxiYWNrPXRoaXMuc2V0SHR0cFJlcXVlc3RGaW5pc2hDYWxsYmFjay5iaW5kKHRoaXMpLHRoaXMuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrPXRoaXMuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrLmJpbmQodGhpcyksdGhpcy5zZXRIdHRwUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaz10aGlzLnNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrLmJpbmQodGhpcyl9c3RhdGljIGdldEluc3RhbmNlKCl7cmV0dXJuIHRoaXMuYXhpb3NJbnN0YW5jZXx8KHRoaXMuYXhpb3NJbnN0YW5jZT1Mci5jcmVhdGUoe3dpdGhDcmVkZW50aWFsczohMH0pLHRoaXMuY2xpZW50SW5zdGFuY2V8fCh0aGlzLmNsaWVudEluc3RhbmNlPW5ldyBVciksdGhpcy5heGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZSgodD0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLmNsaWVudEluc3RhbmNlLnJlcXVlc3RIYW5kbGVyKHQpfSkpKSksdGhpcy5heGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoKGU9PnRoaXMuY2xpZW50SW5zdGFuY2Uuc3VjY2Vzc0hhbmRsZXIoZSkpLChlPT50aGlzLmNsaWVudEluc3RhbmNlLmVycm9ySGFuZGxlcihlKSkpLHRoaXMuYXhpb3NJbnN0YW5jZS5hbGw9THIuYWxsLHRoaXMuYXhpb3NJbnN0YW5jZS5zcHJlYWQ9THIuc3ByZWFkLHRoaXMuYXhpb3NJbnN0YW5jZS5pbml0PXRoaXMuY2xpZW50SW5zdGFuY2UuaW5pdCx0aGlzLmF4aW9zSW5zdGFuY2UuZW5hYmxlSGFuZGxlcj10aGlzLmNsaWVudEluc3RhbmNlLmVuYWJsZUhhbmRsZXIsdGhpcy5heGlvc0luc3RhbmNlLmRpc2FibGVIYW5kbGVyPXRoaXMuY2xpZW50SW5zdGFuY2UuZGlzYWJsZUhhbmRsZXIsdGhpcy5heGlvc0luc3RhbmNlLmRpc2FibGVIYW5kbGVyV2l0aFRpbWVvdXQ9dGhpcy5jbGllbnRJbnN0YW5jZS5kaXNhYmxlSGFuZGxlcldpdGhUaW1lb3V0LHRoaXMuYXhpb3NJbnN0YW5jZS5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2s9dGhpcy5jbGllbnRJbnN0YW5jZS5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2ssdGhpcy5heGlvc0luc3RhbmNlLnNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrPXRoaXMuY2xpZW50SW5zdGFuY2Uuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2ssdGhpcy5heGlvc0luc3RhbmNlLnNldEh0dHBSZXF1ZXN0RXJyb3JDYWxsYmFjaz10aGlzLmNsaWVudEluc3RhbmNlLnNldEh0dHBSZXF1ZXN0RXJyb3JDYWxsYmFjayx0aGlzLmF4aW9zSW5zdGFuY2Uuc2V0SHR0cFJlcXVlc3RGaW5pc2hDYWxsYmFjaz10aGlzLmNsaWVudEluc3RhbmNlLnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2spLHRoaXMuYXhpb3NJbnN0YW5jZX1yZXF1ZXN0SGFuZGxlcih0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHlpZWxkIHRoaXMuYXR0YWNoVG9rZW4odCksbnVsbD09dD92b2lkIDA6dC5zaG91bGRFbmNvZGVUb0Zvcm1EYXRhKXtjb25zdCBlPW51bGw9PXQ/dm9pZCAwOnQuZGF0YSxuPW5ldyBGb3JtRGF0YTtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKCh0PT57bi5hcHBlbmQodCxlW3RdKX0pKSx0LmRhdGE9bn1yZXR1cm4gdC5zdGFydFRpbWVJbk1zPShuZXcgRGF0ZSkuZ2V0VGltZSgpLFVyLmlzSGFuZGxlckVuYWJsZWQmJnRoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlcXVlc3RTdGFydENhbGxiYWNrJiZ0aGlzLnJlcXVlc3RTdGFydENhbGxiYWNrKHQpLHR9KSl9ZXJyb3JIYW5kbGVyKGUpe3Rocm93IFVyLmlzSGFuZGxlckVuYWJsZWQmJih0aGlzLnJlcXVlc3RFcnJvckNhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjayYmdGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjayhlKSx0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjayYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrJiZ0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjaygpKSxlfXN1Y2Nlc3NIYW5kbGVyKGUpe3JldHVybiBVci5pc0hhbmRsZXJFbmFibGVkJiYodGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrJiZ0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2soZSksdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjayYmdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2soKSksZX1pbml0KCl7bGV0IHQ9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXSxuPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwO3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7VXIuaXNIYW5kbGVyRW5hYmxlZD10LHRoaXMuYXR0YWNoVG9rZW49bn0pKX1lbmFibGVIYW5kbGVyKCl7VXIuaXNIYW5kbGVyRW5hYmxlZD0hMH1kaXNhYmxlSGFuZGxlcigpe1VyLmlzSGFuZGxlckVuYWJsZWQ9ITF9ZGlzYWJsZUhhbmRsZXJXaXRoVGltZW91dCgpe2xldCBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpVci5ERUZBVUxUX0hBTkRMRVJfRElTQUJMRV9USU1FT1VUO1VyLmlzSGFuZGxlckVuYWJsZWQ9ITEsc2V0VGltZW91dCgoKCk9PntVci5pc0hhbmRsZXJFbmFibGVkPSEwfSksZSl9c2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrKGUpe3RoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2s9ZX1zZXRIdHRwUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjayhlKXt0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2s9ZX1zZXRIdHRwUmVxdWVzdEVycm9yQ2FsbGJhY2soZSl7dGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjaz1lfXNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2soZSl7dGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2s9ZX19O0hyLkRFRkFVTFRfSEFORExFUl9ESVNBQkxFX1RJTUVPVVQ9MWUzLEhyPVVyPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1yP3I9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOnI7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG4scik7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkoaT1lW2FdKSYmKHM9KG88Mz9pKHMpOm8+Mz9pKHQsbixzKTppKHQsbikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHMpLHN9KFtlPT57fV0sSHIpO2NsYXNzIE1ye2NvbnN0cnVjdG9yKCl7dGhpcy5fZGF0YT1uZXcgTWFwfXNldERhdGEodCxuKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX2RhdGEuc2V0KHQsbil9KSl9Z2V0RGF0YSh0KXt2YXIgbixyO3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIG51bGwhPT0ocj1udWxsPT09KG49dGhpcy5fZGF0YSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZ2V0KHQpKSYmdm9pZCAwIT09cj9yOiJ7fSJ9KSl9cmVtb3ZlRGF0YSh0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX2RhdGEuZGVsZXRlKHQpfSkpfX12YXIganI9e2V4cG9ydHM6e319LE5yPXt9LHhyPXt9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh4ciwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSkseHIuZGVmYXVsdD1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aCxuPXQlNDtpZighbilyZXR1cm4gZTt2YXIgcj10LGk9NC1uLG89dCtpLHM9bWUuYWxsb2Mobyk7Zm9yKHMud3JpdGUoZSk7aS0tOylzLndyaXRlKCI9IixyKyspO3JldHVybiBzLnRvU3RyaW5nKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOciwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHFyPXhyO2Z1bmN0aW9uIEJyKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PSJ1dGY4IiksbWUuaXNCdWZmZXIoZSk/S3IoZS50b1N0cmluZygiYmFzZTY0IikpOktyKG1lLmZyb20oZSx0KS50b1N0cmluZygiYmFzZTY0IikpfWZ1bmN0aW9uIEZyKGUpe3JldHVybiBlPWUudG9TdHJpbmcoKSxxci5kZWZhdWx0KGUpLnJlcGxhY2UoL1wtL2csIisiKS5yZXBsYWNlKC9fL2csIi8iKX1mdW5jdGlvbiBLcihlKXtyZXR1cm4gZS5yZXBsYWNlKC89L2csIiIpLnJlcGxhY2UoL1wrL2csIi0iKS5yZXBsYWNlKC9cLy9nLCJfIil9dmFyIEpyLFdyPUJyO1dyLmVuY29kZT1CcixXci5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9InV0ZjgiKSxtZS5mcm9tKEZyKGUpLCJiYXNlNjQiKS50b1N0cmluZyh0KX0sV3IudG9CYXNlNjQ9RnIsV3IuZnJvbUJhc2U2ND1LcixXci50b0J1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4gbWUuZnJvbShGcihlKSwiYmFzZTY0Iil9LE5yLmRlZmF1bHQ9V3IsKEpyPWpyKS5leHBvcnRzPU5yLmRlZmF1bHQsSnIuZXhwb3J0cy5kZWZhdWx0PUpyLmV4cG9ydHM7dmFyIHpyPWpyLmV4cG9ydHMsVnI9e2V4cG9ydHM6e319OyFmdW5jdGlvbihlKXshZnVuY3Rpb24odCxuKXt2YXIgcj17fTshZnVuY3Rpb24oZSl7ZS5fX2VzTW9kdWxlPSEwLGUuZGlnZXN0TGVuZ3RoPTMyLGUuYmxvY2tTaXplPTY0O3ZhciB0PW5ldyBVaW50MzJBcnJheShbMTExNjM1MjQwOCwxODk5NDQ3NDQxLDMwNDkzMjM0NzEsMzkyMTAwOTU3Myw5NjE5ODcxNjMsMTUwODk3MDk5MywyNDUzNjM1NzQ4LDI4NzA3NjMyMjEsMzYyNDM4MTA4MCwzMTA1OTg0MDEsNjA3MjI1Mjc4LDE0MjY4ODE5ODcsMTkyNTA3ODM4OCwyMTYyMDc4MjA2LDI2MTQ4ODgxMDMsMzI0ODIyMjU4MCwzODM1MzkwNDAxLDQwMjIyMjQ3NzQsMjY0MzQ3MDc4LDYwNDgwNzYyOCw3NzAyNTU5ODMsMTI0OTE1MDEyMiwxNTU1MDgxNjkyLDE5OTYwNjQ5ODYsMjU1NDIyMDg4MiwyODIxODM0MzQ5LDI5NTI5OTY4MDgsMzIxMDMxMzY3MSwzMzM2NTcxODkxLDM1ODQ1Mjg3MTEsMTEzOTI2OTkzLDMzODI0MTg5NSw2NjYzMDcyMDUsNzczNTI5OTEyLDEyOTQ3NTczNzIsMTM5NjE4MjI5MSwxNjk1MTgzNzAwLDE5ODY2NjEwNTEsMjE3NzAyNjM1MCwyNDU2OTU2MDM3LDI3MzA0ODU5MjEsMjgyMDMwMjQxMSwzMjU5NzMwODAwLDMzNDU3NjQ3NzEsMzUxNjA2NTgxNywzNjAwMzUyODA0LDQwOTQ1NzE5MDksMjc1NDIzMzQ0LDQzMDIyNzczNCw1MDY5NDg2MTYsNjU5MDYwNTU2LDg4Mzk5Nzg3Nyw5NTgxMzk1NzEsMTMyMjgyMjIxOCwxNTM3MDAyMDYzLDE3NDc4NzM3NzksMTk1NTU2MjIyMiwyMDI0MTA0ODE1LDIyMjc3MzA0NTIsMjM2MTg1MjQyNCwyNDI4NDM2NDc0LDI3NTY3MzQxODcsMzIwNDAzMTQ3OSwzMzI5MzI1Mjk4XSk7ZnVuY3Rpb24gbihlLG4scixpLG8pe2Zvcih2YXIgcyxhLGMsdSxsLGQsaCxmLHAsZyx2LHksbTtvPj02NDspe2ZvcihzPW5bMF0sYT1uWzFdLGM9blsyXSx1PW5bM10sbD1uWzRdLGQ9bls1XSxoPW5bNl0sZj1uWzddLGc9MDtnPDE2O2crKyl2PWkrNCpnLGVbZ109KDI1NSZyW3ZdKTw8MjR8KDI1NSZyW3YrMV0pPDwxNnwoMjU1JnJbdisyXSk8PDh8MjU1JnJbdiszXTtmb3IoZz0xNjtnPDY0O2crKyl5PSgocD1lW2ctMl0pPj4+MTd8cDw8MTUpXihwPj4+MTl8cDw8MTMpXnA+Pj4xMCxtPSgocD1lW2ctMTVdKT4+Pjd8cDw8MjUpXihwPj4+MTh8cDw8MTQpXnA+Pj4zLGVbZ109KHkrZVtnLTddfDApKyhtK2VbZy0xNl18MCk7Zm9yKGc9MDtnPDY0O2crKyl5PSgoKGw+Pj42fGw8PDI2KV4obD4+PjExfGw8PDIxKV4obD4+PjI1fGw8PDcpKSsobCZkXn5sJmgpfDApKyhmKyh0W2ddK2VbZ118MCl8MCl8MCxtPSgocz4+PjJ8czw8MzApXihzPj4+MTN8czw8MTkpXihzPj4+MjJ8czw8MTApKSsocyZhXnMmY15hJmMpfDAsZj1oLGg9ZCxkPWwsbD11K3l8MCx1PWMsYz1hLGE9cyxzPXkrbXwwO25bMF0rPXMsblsxXSs9YSxuWzJdKz1jLG5bM10rPXUsbls0XSs9bCxuWzVdKz1kLG5bNl0rPWgsbls3XSs9ZixpKz02NCxvLT02NH1yZXR1cm4gaX12YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmRpZ2VzdExlbmd0aD1lLmRpZ2VzdExlbmd0aCx0aGlzLmJsb2NrU2l6ZT1lLmJsb2NrU2l6ZSx0aGlzLnN0YXRlPW5ldyBJbnQzMkFycmF5KDgpLHRoaXMudGVtcD1uZXcgSW50MzJBcnJheSg2NCksdGhpcy5idWZmZXI9bmV3IFVpbnQ4QXJyYXkoMTI4KSx0aGlzLmJ1ZmZlckxlbmd0aD0wLHRoaXMuYnl0ZXNIYXNoZWQ9MCx0aGlzLmZpbmlzaGVkPSExLHRoaXMucmVzZXQoKX1yZXR1cm4gdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZVswXT0xNzc5MDMzNzAzLHRoaXMuc3RhdGVbMV09MzE0NDEzNDI3Nyx0aGlzLnN0YXRlWzJdPTEwMTM5MDQyNDIsdGhpcy5zdGF0ZVszXT0yNzczNDgwNzYyLHRoaXMuc3RhdGVbNF09MTM1OTg5MzExOSx0aGlzLnN0YXRlWzVdPTI2MDA4MjI5MjQsdGhpcy5zdGF0ZVs2XT01Mjg3MzQ2MzUsdGhpcy5zdGF0ZVs3XT0xNTQxNDU5MjI1LHRoaXMuYnVmZmVyTGVuZ3RoPTAsdGhpcy5ieXRlc0hhc2hlZD0wLHRoaXMuZmluaXNoZWQ9ITEsdGhpc30sdC5wcm90b3R5cGUuY2xlYW49ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuYnVmZmVyLmxlbmd0aDtlKyspdGhpcy5idWZmZXJbZV09MDtmb3IoZT0wO2U8dGhpcy50ZW1wLmxlbmd0aDtlKyspdGhpcy50ZW1wW2VdPTA7dGhpcy5yZXNldCgpfSx0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD1lLmxlbmd0aCksdGhpcy5maW5pc2hlZCl0aHJvdyBuZXcgRXJyb3IoIlNIQTI1NjogY2FuJ3QgdXBkYXRlIGJlY2F1c2UgaGFzaCB3YXMgZmluaXNoZWQuIik7dmFyIHI9MDtpZih0aGlzLmJ5dGVzSGFzaGVkKz10LHRoaXMuYnVmZmVyTGVuZ3RoPjApe2Zvcig7dGhpcy5idWZmZXJMZW5ndGg8NjQmJnQ+MDspdGhpcy5idWZmZXJbdGhpcy5idWZmZXJMZW5ndGgrK109ZVtyKytdLHQtLTs2ND09PXRoaXMuYnVmZmVyTGVuZ3RoJiYobih0aGlzLnRlbXAsdGhpcy5zdGF0ZSx0aGlzLmJ1ZmZlciwwLDY0KSx0aGlzLmJ1ZmZlckxlbmd0aD0wKX1mb3IodD49NjQmJihyPW4odGhpcy50ZW1wLHRoaXMuc3RhdGUsZSxyLHQpLHQlPTY0KTt0PjA7KXRoaXMuYnVmZmVyW3RoaXMuYnVmZmVyTGVuZ3RoKytdPWVbcisrXSx0LS07cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbihlKXtpZighdGhpcy5maW5pc2hlZCl7dmFyIHQ9dGhpcy5ieXRlc0hhc2hlZCxyPXRoaXMuYnVmZmVyTGVuZ3RoLGk9dC81MzY4NzA5MTJ8MCxvPXQ8PDMscz10JTY0PDU2PzY0OjEyODt0aGlzLmJ1ZmZlcltyXT0xMjg7Zm9yKHZhciBhPXIrMTthPHMtODthKyspdGhpcy5idWZmZXJbYV09MDt0aGlzLmJ1ZmZlcltzLThdPWk+Pj4yNCYyNTUsdGhpcy5idWZmZXJbcy03XT1pPj4+MTYmMjU1LHRoaXMuYnVmZmVyW3MtNl09aT4+PjgmMjU1LHRoaXMuYnVmZmVyW3MtNV09aT4+PjAmMjU1LHRoaXMuYnVmZmVyW3MtNF09bz4+PjI0JjI1NSx0aGlzLmJ1ZmZlcltzLTNdPW8+Pj4xNiYyNTUsdGhpcy5idWZmZXJbcy0yXT1vPj4+OCYyNTUsdGhpcy5idWZmZXJbcy0xXT1vPj4+MCYyNTUsbih0aGlzLnRlbXAsdGhpcy5zdGF0ZSx0aGlzLmJ1ZmZlciwwLHMpLHRoaXMuZmluaXNoZWQ9ITB9Zm9yKGE9MDthPDg7YSsrKWVbNCphKzBdPXRoaXMuc3RhdGVbYV0+Pj4yNCYyNTUsZVs0KmErMV09dGhpcy5zdGF0ZVthXT4+PjE2JjI1NSxlWzQqYSsyXT10aGlzLnN0YXRlW2FdPj4+OCYyNTUsZVs0KmErM109dGhpcy5zdGF0ZVthXT4+PjAmMjU1O3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5kaWdlc3Q9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgVWludDhBcnJheSh0aGlzLmRpZ2VzdExlbmd0aCk7cmV0dXJuIHRoaXMuZmluaXNoKGUpLGV9LHQucHJvdG90eXBlLl9zYXZlU3RhdGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDx0aGlzLnN0YXRlLmxlbmd0aDt0KyspZVt0XT10aGlzLnN0YXRlW3RdfSx0LnByb3RvdHlwZS5fcmVzdG9yZVN0YXRlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7bjx0aGlzLnN0YXRlLmxlbmd0aDtuKyspdGhpcy5zdGF0ZVtuXT1lW25dO3RoaXMuYnl0ZXNIYXNoZWQ9dCx0aGlzLmZpbmlzaGVkPSExLHRoaXMuYnVmZmVyTGVuZ3RoPTB9LHR9KCk7ZS5IYXNoPXI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuaW5uZXI9bmV3IHIsdGhpcy5vdXRlcj1uZXcgcix0aGlzLmJsb2NrU2l6ZT10aGlzLmlubmVyLmJsb2NrU2l6ZSx0aGlzLmRpZ2VzdExlbmd0aD10aGlzLmlubmVyLmRpZ2VzdExlbmd0aDt2YXIgdD1uZXcgVWludDhBcnJheSh0aGlzLmJsb2NrU2l6ZSk7aWYoZS5sZW5ndGg+dGhpcy5ibG9ja1NpemUpKG5ldyByKS51cGRhdGUoZSkuZmluaXNoKHQpLmNsZWFuKCk7ZWxzZSBmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0W25dPWVbbl07Zm9yKG49MDtuPHQubGVuZ3RoO24rKyl0W25dXj01NDt0aGlzLmlubmVyLnVwZGF0ZSh0KTtmb3Iobj0wO248dC5sZW5ndGg7bisrKXRbbl1ePTEwNjt0aGlzLm91dGVyLnVwZGF0ZSh0KSx0aGlzLmlzdGF0ZT1uZXcgVWludDMyQXJyYXkoOCksdGhpcy5vc3RhdGU9bmV3IFVpbnQzMkFycmF5KDgpLHRoaXMuaW5uZXIuX3NhdmVTdGF0ZSh0aGlzLmlzdGF0ZSksdGhpcy5vdXRlci5fc2F2ZVN0YXRlKHRoaXMub3N0YXRlKTtmb3Iobj0wO248dC5sZW5ndGg7bisrKXRbbl09MH1yZXR1cm4gZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbm5lci5fcmVzdG9yZVN0YXRlKHRoaXMuaXN0YXRlLHRoaXMuaW5uZXIuYmxvY2tTaXplKSx0aGlzLm91dGVyLl9yZXN0b3JlU3RhdGUodGhpcy5vc3RhdGUsdGhpcy5vdXRlci5ibG9ja1NpemUpLHRoaXN9LGUucHJvdG90eXBlLmNsZWFuPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmlzdGF0ZS5sZW5ndGg7ZSsrKXRoaXMub3N0YXRlW2VdPXRoaXMuaXN0YXRlW2VdPTA7dGhpcy5pbm5lci5jbGVhbigpLHRoaXMub3V0ZXIuY2xlYW4oKX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlubmVyLnVwZGF0ZShlKSx0aGlzfSxlLnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3V0ZXIuZmluaXNoZWQ/dGhpcy5vdXRlci5maW5pc2goZSk6KHRoaXMuaW5uZXIuZmluaXNoKGUpLHRoaXMub3V0ZXIudXBkYXRlKGUsdGhpcy5kaWdlc3RMZW5ndGgpLmZpbmlzaChlKSksdGhpc30sZS5wcm90b3R5cGUuZGlnZXN0PWZ1bmN0aW9uKCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5kaWdlc3RMZW5ndGgpO3JldHVybiB0aGlzLmZpbmlzaChlKSxlfSxlfSgpO2Z1bmN0aW9uIG8oZSl7dmFyIHQ9KG5ldyByKS51cGRhdGUoZSksbj10LmRpZ2VzdCgpO3JldHVybiB0LmNsZWFuKCksbn1mdW5jdGlvbiBzKGUsdCl7dmFyIG49bmV3IGkoZSkudXBkYXRlKHQpLHI9bi5kaWdlc3QoKTtyZXR1cm4gbi5jbGVhbigpLHJ9ZnVuY3Rpb24gYShlLHQsbixyKXt2YXIgaT1yWzBdO2lmKDA9PT1pKXRocm93IG5ldyBFcnJvcigiaGtkZjogY2Fubm90IGV4cGFuZCBtb3JlIik7dC5yZXNldCgpLGk+MSYmdC51cGRhdGUoZSksbiYmdC51cGRhdGUobiksdC51cGRhdGUociksdC5maW5pc2goZSksclswXSsrfWUuSE1BQz1pLGUuaGFzaD1vLGUuZGVmYXVsdD1vLGUuaG1hYz1zO3ZhciBjPW5ldyBVaW50OEFycmF5KGUuZGlnZXN0TGVuZ3RoKTtmdW5jdGlvbiB1KGUsdCxuLHIpe3ZvaWQgMD09PXQmJih0PWMpLHZvaWQgMD09PXImJihyPTMyKTtmb3IodmFyIG89bmV3IFVpbnQ4QXJyYXkoWzFdKSx1PXModCxlKSxsPW5ldyBpKHUpLGQ9bmV3IFVpbnQ4QXJyYXkobC5kaWdlc3RMZW5ndGgpLGg9ZC5sZW5ndGgsZj1uZXcgVWludDhBcnJheShyKSxwPTA7cDxyO3ArKyloPT09ZC5sZW5ndGgmJihhKGQsbCxuLG8pLGg9MCksZltwXT1kW2grK107cmV0dXJuIGwuY2xlYW4oKSxkLmZpbGwoMCksby5maWxsKDApLGZ9ZnVuY3Rpb24gbChlLHQsbixyKXtmb3IodmFyIG89bmV3IGkoZSkscz1vLmRpZ2VzdExlbmd0aCxhPW5ldyBVaW50OEFycmF5KDQpLGM9bmV3IFVpbnQ4QXJyYXkocyksdT1uZXcgVWludDhBcnJheShzKSxsPW5ldyBVaW50OEFycmF5KHIpLGQ9MDtkKnM8cjtkKyspe3ZhciBoPWQrMTthWzBdPWg+Pj4yNCYyNTUsYVsxXT1oPj4+MTYmMjU1LGFbMl09aD4+PjgmMjU1LGFbM109aD4+PjAmMjU1LG8ucmVzZXQoKSxvLnVwZGF0ZSh0KSxvLnVwZGF0ZShhKSxvLmZpbmlzaCh1KTtmb3IodmFyIGY9MDtmPHM7ZisrKWNbZl09dVtmXTtmb3IoZj0yO2Y8PW47ZisrKXtvLnJlc2V0KCksby51cGRhdGUodSkuZmluaXNoKHUpO2Zvcih2YXIgcD0wO3A8cztwKyspY1twXV49dVtwXX1mb3IoZj0wO2Y8cyYmZCpzK2Y8cjtmKyspbFtkKnMrZl09Y1tmXX1mb3IoZD0wO2Q8cztkKyspY1tkXT11W2RdPTA7Zm9yKGQ9MDtkPDQ7ZCsrKWFbZF09MDtyZXR1cm4gby5jbGVhbigpLGx9ZS5oa2RmPXUsZS5wYmtkZjI9bH0ocik7dmFyIGk9ci5kZWZhdWx0O2Zvcih2YXIgbyBpbiByKWlbb109cltvXTtlLmV4cG9ydHM9aX0oKX0oVnIpO3ZhciBZcj1EKFZyLmV4cG9ydHMpLEdyPWNyeXB0bztjb25zdCBYcj1lPT5lIGluc3RhbmNlb2YgQ3J5cHRvS2V5LCRyPW5ldyBUZXh0RW5jb2Rlcixacj1uZXcgVGV4dERlY29kZXI7Y29uc3QgUXI9ZT0+e2xldCB0PWU7dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJih0PVpyLmRlY29kZSh0KSksdD10LnJlcGxhY2UoLy0vZywiKyIpLnJlcGxhY2UoL18vZywiLyIpLnJlcGxhY2UoL1xzL2csIiIpO3RyeXtyZXR1cm4oZT0+e2NvbnN0IHQ9YXRvYihlKSxuPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoKTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKyluW2VdPXQuY2hhckNvZGVBdChlKTtyZXR1cm4gbn0pKHQpfWNhdGNoKGUpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBpbnB1dCB0byBiZSBkZWNvZGVkIGlzIG5vdCBjb3JyZWN0bHkgZW5jb2RlZC4iKX19O2NsYXNzIGVpIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7dmFyIHQ7c3VwZXIoZSksdGhpcy5jb2RlPSJFUlJfSk9TRV9HRU5FUklDIix0aGlzLm5hbWU9dGhpcy5jb25zdHJ1Y3Rvci5uYW1lLG51bGw9PT0odD1FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSl8fHZvaWQgMD09PXR8fHQuY2FsbChFcnJvcix0aGlzLHRoaXMuY29uc3RydWN0b3IpfXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSk9TRV9HRU5FUklDIn19Y2xhc3MgdGkgZXh0ZW5kcyBlaXtjb25zdHJ1Y3RvcihlKXtsZXQgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06InVuc3BlY2lmaWVkIixuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToidW5zcGVjaWZpZWQiO3N1cGVyKGUpLHRoaXMuY29kZT0iRVJSX0pXVF9DTEFJTV9WQUxJREFUSU9OX0ZBSUxFRCIsdGhpcy5jbGFpbT10LHRoaXMucmVhc29uPW59c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KV1RfQ0xBSU1fVkFMSURBVElPTl9GQUlMRUQifX1jbGFzcyBuaSBleHRlbmRzIGVpe2NvbnN0cnVjdG9yKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToidW5zcGVjaWZpZWQiLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOiJ1bnNwZWNpZmllZCI7c3VwZXIoZSksdGhpcy5jb2RlPSJFUlJfSldUX0VYUElSRUQiLHRoaXMuY2xhaW09dCx0aGlzLnJlYXNvbj1ufXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSldUX0VYUElSRUQifX1jbGFzcyByaSBleHRlbmRzIGVpe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KT1NFX0FMR19OT1RfQUxMT1dFRCJ9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KT1NFX0FMR19OT1RfQUxMT1dFRCJ9fWNsYXNzIGlpIGV4dGVuZHMgZWl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pPU0VfTk9UX1NVUFBPUlRFRCJ9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KT1NFX05PVF9TVVBQT1JURUQifX1jbGFzcyBvaSBleHRlbmRzIGVpe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KV1NfSU5WQUxJRCJ9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KV1NfSU5WQUxJRCJ9fWNsYXNzIHNpIGV4dGVuZHMgZWl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pXVF9JTlZBTElEIn1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pXVF9JTlZBTElEIn19Y2xhc3MgYWkgZXh0ZW5kcyBlaXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldLU19JTlZBTElEIn1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pXS1NfSU5WQUxJRCJ9fWNsYXNzIGNpIGV4dGVuZHMgZWl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pXS1NfTk9fTUFUQ0hJTkdfS0VZIix0aGlzLm1lc3NhZ2U9Im5vIGFwcGxpY2FibGUga2V5IGZvdW5kIGluIHRoZSBKU09OIFdlYiBLZXkgU2V0In1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pXS1NfTk9fTUFUQ0hJTkdfS0VZIn19Y2xhc3MgdWkgZXh0ZW5kcyBlaXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldLU19NVUxUSVBMRV9NQVRDSElOR19LRVlTIix0aGlzLm1lc3NhZ2U9Im11bHRpcGxlIG1hdGNoaW5nIGtleXMgZm91bmQgaW4gdGhlIEpTT04gV2ViIEtleSBTZXQifXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSldLU19NVUxUSVBMRV9NQVRDSElOR19LRVlTIn19Y2xhc3MgbGkgZXh0ZW5kcyBlaXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldTX1NJR05BVFVSRV9WRVJJRklDQVRJT05fRkFJTEVEIix0aGlzLm1lc3NhZ2U9InNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkIn1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pXU19TSUdOQVRVUkVfVkVSSUZJQ0FUSU9OX0ZBSUxFRCJ9fWZ1bmN0aW9uIGRpKCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIFdlYlNvY2tldFBhaXJ9ZnVuY3Rpb24gaGkoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiJhbGdvcml0aG0ubmFtZSI7cmV0dXJuIG5ldyBUeXBlRXJyb3IoIkNyeXB0b0tleSBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgb3BlcmF0aW9uLCBpdHMgIi5jb25jYXQodCwiIG11c3QgYmUgIikuY29uY2F0KGUpKX1mdW5jdGlvbiBmaShlLHQpe3JldHVybiBlLm5hbWU9PT10fWZ1bmN0aW9uIHBpKGUpe3JldHVybiBwYXJzZUludChlLm5hbWUuc2xpY2UoNCksMTApfWZ1bmN0aW9uIGdpKGUpe3N3aXRjaChlKXtjYXNlIkVTMjU2IjpyZXR1cm4iUC0yNTYiO2Nhc2UiRVMzODQiOnJldHVybiJQLTM4NCI7Y2FzZSJFUzUxMiI6cmV0dXJuIlAtNTIxIjtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigidW5yZWFjaGFibGUiKX19ZnVuY3Rpb24gdmkoZSx0KXtpZih0Lmxlbmd0aCYmIXQuc29tZSgodD0+ZS51c2FnZXMuaW5jbHVkZXModCkpKSl7bGV0IGU9IkNyeXB0b0tleSBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgb3BlcmF0aW9uLCBpdHMgdXNhZ2VzIG11c3QgaW5jbHVkZSAiO2lmKHQubGVuZ3RoPjIpe2NvbnN0IG49dC5wb3AoKTtlKz0ib25lIG9mICIuY29uY2F0KHQuam9pbigiLCAiKSwiLCBvciAiKS5jb25jYXQobiwiLiIpfWVsc2UgMj09PXQubGVuZ3RoP2UrPSJvbmUgb2YgIi5jb25jYXQodFswXSwiIG9yICIpLmNvbmNhdCh0WzFdLCIuIik6ZSs9IiIuY29uY2F0KHRbMF0sIi4iKTt0aHJvdyBuZXcgVHlwZUVycm9yKGUpfX12YXIgeWk9ZnVuY3Rpb24oZSl7bGV0IHQ9IktleSBtdXN0IGJlICI7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkobj4xP24tMTowKSxpPTE7aTxuO2krKylyW2ktMV09YXJndW1lbnRzW2ldO2lmKHIubGVuZ3RoPjIpe2NvbnN0IGU9ci5wb3AoKTt0Kz0ib25lIG9mIHR5cGUgIi5jb25jYXQoci5qb2luKCIsICIpLCIsIG9yICIpLmNvbmNhdChlLCIuIil9ZWxzZSAyPT09ci5sZW5ndGg/dCs9Im9uZSBvZiB0eXBlICIuY29uY2F0KHJbMF0sIiBvciAiKS5jb25jYXQoclsxXSwiLiIpOnQrPSJvZiB0eXBlICIuY29uY2F0KHJbMF0sIi4iKTtyZXR1cm4gbnVsbD09ZT90Kz0iIFJlY2VpdmVkICIuY29uY2F0KGUpOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLm5hbWU/dCs9IiBSZWNlaXZlZCBmdW5jdGlvbiAiLmNvbmNhdChlLm5hbWUpOiJvYmplY3QiPT10eXBlb2YgZSYmbnVsbCE9ZSYmZS5jb25zdHJ1Y3RvciYmZS5jb25zdHJ1Y3Rvci5uYW1lJiYodCs9IiBSZWNlaXZlZCBhbiBpbnN0YW5jZSBvZiAiLmNvbmNhdChlLmNvbnN0cnVjdG9yLm5hbWUpKSx0fSxtaT1lPT5YcihlKTtjb25zdCB3aT1bIkNyeXB0b0tleSJdO2Z1bmN0aW9uIF9pKGUpe2lmKCJvYmplY3QiIT10eXBlb2YodD1lKXx8bnVsbD09PXR8fCJbb2JqZWN0IE9iamVjdF0iIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKXJldHVybiExO3ZhciB0O2lmKG51bGw9PT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpcmV0dXJuITA7bGV0IG49ZTtmb3IoO251bGwhPT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobik7KW49T2JqZWN0LmdldFByb3RvdHlwZU9mKG4pO3JldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk9PT1ufWNvbnN0IFNpPWFzeW5jIGU9Pnt2YXIgdCxuO2NvbnN0e2FsZ29yaXRobTpyLGtleVVzYWdlczppfT1mdW5jdGlvbihlKXtsZXQgdCxuO3N3aXRjaChlLmt0eSl7Y2FzZSJvY3QiOnN3aXRjaChlLmFsZyl7Y2FzZSJIUzI1NiI6Y2FzZSJIUzM4NCI6Y2FzZSJIUzUxMiI6dD17bmFtZToiSE1BQyIsaGFzaDoiU0hBLSIuY29uY2F0KGUuYWxnLnNsaWNlKC0zKSl9LG49WyJzaWduIiwidmVyaWZ5Il07YnJlYWs7Y2FzZSJBMTI4Q0JDLUhTMjU2IjpjYXNlIkExOTJDQkMtSFMzODQiOmNhc2UiQTI1NkNCQy1IUzUxMiI6dGhyb3cgbmV3IGlpKCIiLmNvbmNhdChlLmFsZywiIGtleXMgY2Fubm90IGJlIGltcG9ydGVkIGFzIENyeXB0b0tleSBpbnN0YW5jZXMiKSk7Y2FzZSJBMTI4R0NNIjpjYXNlIkExOTJHQ00iOmNhc2UiQTI1NkdDTSI6Y2FzZSJBMTI4R0NNS1ciOmNhc2UiQTE5MkdDTUtXIjpjYXNlIkEyNTZHQ01LVyI6dD17bmFtZToiQUVTLUdDTSJ9LG49WyJlbmNyeXB0IiwiZGVjcnlwdCJdO2JyZWFrO2Nhc2UiQTEyOEtXIjpjYXNlIkExOTJLVyI6Y2FzZSJBMjU2S1ciOnQ9e25hbWU6IkFFUy1LVyJ9LG49WyJ3cmFwS2V5IiwidW53cmFwS2V5Il07YnJlYWs7Y2FzZSJQQkVTMi1IUzI1NitBMTI4S1ciOmNhc2UiUEJFUzItSFMzODQrQTE5MktXIjpjYXNlIlBCRVMyLUhTNTEyK0EyNTZLVyI6dD17bmFtZToiUEJLREYyIn0sbj1bImRlcml2ZUJpdHMiXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBpaSgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBKV0sgImFsZyIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyl9YnJlYWs7Y2FzZSJSU0EiOnN3aXRjaChlLmFsZyl7Y2FzZSJQUzI1NiI6Y2FzZSJQUzM4NCI6Y2FzZSJQUzUxMiI6dD17bmFtZToiUlNBLVBTUyIsaGFzaDoiU0hBLSIuY29uY2F0KGUuYWxnLnNsaWNlKC0zKSl9LG49ZS5kP1sic2lnbiJdOlsidmVyaWZ5Il07YnJlYWs7Y2FzZSJSUzI1NiI6Y2FzZSJSUzM4NCI6Y2FzZSJSUzUxMiI6dD17bmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUiLGhhc2g6IlNIQS0iLmNvbmNhdChlLmFsZy5zbGljZSgtMykpfSxuPWUuZD9bInNpZ24iXTpbInZlcmlmeSJdO2JyZWFrO2Nhc2UiUlNBLU9BRVAiOmNhc2UiUlNBLU9BRVAtMjU2IjpjYXNlIlJTQS1PQUVQLTM4NCI6Y2FzZSJSU0EtT0FFUC01MTIiOnQ9e25hbWU6IlJTQS1PQUVQIixoYXNoOiJTSEEtIi5jb25jYXQocGFyc2VJbnQoZS5hbGcuc2xpY2UoLTMpLDEwKXx8MSl9LG49ZS5kP1siZGVjcnlwdCIsInVud3JhcEtleSJdOlsiZW5jcnlwdCIsIndyYXBLZXkiXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBpaSgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBKV0sgImFsZyIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyl9YnJlYWs7Y2FzZSJFQyI6c3dpdGNoKGUuYWxnKXtjYXNlIkVTMjU2Ijp0PXtuYW1lOiJFQ0RTQSIsbmFtZWRDdXJ2ZToiUC0yNTYifSxuPWUuZD9bInNpZ24iXTpbInZlcmlmeSJdO2JyZWFrO2Nhc2UiRVMzODQiOnQ9e25hbWU6IkVDRFNBIixuYW1lZEN1cnZlOiJQLTM4NCJ9LG49ZS5kP1sic2lnbiJdOlsidmVyaWZ5Il07YnJlYWs7Y2FzZSJFUzUxMiI6dD17bmFtZToiRUNEU0EiLG5hbWVkQ3VydmU6IlAtNTIxIn0sbj1lLmQ/WyJzaWduIl06WyJ2ZXJpZnkiXTticmVhaztjYXNlIkVDREgtRVMiOmNhc2UiRUNESC1FUytBMTI4S1ciOmNhc2UiRUNESC1FUytBMTkyS1ciOmNhc2UiRUNESC1FUytBMjU2S1ciOnQ9e25hbWU6IkVDREgiLG5hbWVkQ3VydmU6ZS5jcnZ9LG49ZS5kP1siZGVyaXZlQml0cyJdOltdO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IGlpKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyAiYWxnIiAoQWxnb3JpdGhtKSBQYXJhbWV0ZXIgdmFsdWUnKX1icmVhaztjYXNlIGRpKCkmJiJPS1AiOmlmKCJFZERTQSIhPT1lLmFsZyl0aHJvdyBuZXcgaWkoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLICJhbGciIChBbGdvcml0aG0pIFBhcmFtZXRlciB2YWx1ZScpO2lmKCJFZDI1NTE5IiE9PWUuY3J2KXRocm93IG5ldyBpaSgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBKV0sgImNydiIgKFN1YnR5cGUgb2YgS2V5IFBhaXIpIFBhcmFtZXRlciB2YWx1ZScpO3Q9e25hbWU6Ik5PREUtRUQyNTUxOSIsbmFtZWRDdXJ2ZToiTk9ERS1FRDI1NTE5In0sbj1lLmQ/WyJzaWduIl06WyJ2ZXJpZnkiXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBpaSgnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBKV0sgImt0eSIgKEtleSBUeXBlKSBQYXJhbWV0ZXIgdmFsdWUnKX1yZXR1cm57YWxnb3JpdGhtOnQsa2V5VXNhZ2VzOm59fShlKSxvPVtyLG51bGwhPT0odD1lLmV4dCkmJnZvaWQgMCE9PXQmJnQsbnVsbCE9PShuPWUua2V5X29wcykmJnZvaWQgMCE9PW4/bjppXTtpZigiUEJLREYyIj09PXIubmFtZSlyZXR1cm4gR3Iuc3VidGxlLmltcG9ydEtleSgicmF3IixRcihlLmspLC4uLm8pO2NvbnN0IHM9ey4uLmV9O3JldHVybiBkZWxldGUgcy5hbGcsR3Iuc3VidGxlLmltcG9ydEtleSgiandrIixzLC4uLm8pfTtjb25zdCBiaT0oZSx0LG4pPT57ZS5zdGFydHNXaXRoKCJIUyIpfHwiZGlyIj09PWV8fGUuc3RhcnRzV2l0aCgiUEJFUzIiKXx8L15BXGR7M30oPzpHQ00pP0tXJC8udGVzdChlKT8oZT0+e2lmKCEoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKXtpZighbWkoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcih5aShlLC4uLndpLCJVaW50OEFycmF5IikpO2lmKCJzZWNyZXQiIT09ZS50eXBlKXRocm93IG5ldyBUeXBlRXJyb3IoIiIuY29uY2F0KHdpLmpvaW4oIiBvciAiKSwnIGluc3RhbmNlcyBmb3Igc3ltbWV0cmljIGFsZ29yaXRobXMgbXVzdCBiZSBvZiB0eXBlICJzZWNyZXQiJykpfX0pKHQpOigoZSx0KT0+e2lmKCFtaShlKSl0aHJvdyBuZXcgVHlwZUVycm9yKHlpKGUsLi4ud2kpKTtpZigic2VjcmV0Ij09PWUudHlwZSl0aHJvdyBuZXcgVHlwZUVycm9yKCIiLmNvbmNhdCh3aS5qb2luKCIgb3IgIiksJyBpbnN0YW5jZXMgZm9yIGFzeW1tZXRyaWMgYWxnb3JpdGhtcyBtdXN0IG5vdCBiZSBvZiB0eXBlICJzZWNyZXQiJykpO2lmKCJzaWduIj09PXQmJiJwdWJsaWMiPT09ZS50eXBlKXRocm93IG5ldyBUeXBlRXJyb3IoIiIuY29uY2F0KHdpLmpvaW4oIiBvciAiKSwnIGluc3RhbmNlcyBmb3IgYXN5bW1ldHJpYyBhbGdvcml0aG0gc2lnbmluZyBtdXN0IGJlIG9mIHR5cGUgInByaXZhdGUiJykpO2lmKCJkZWNyeXB0Ij09PXQmJiJwdWJsaWMiPT09ZS50eXBlKXRocm93IG5ldyBUeXBlRXJyb3IoIiIuY29uY2F0KHdpLmpvaW4oIiBvciAiKSwnIGluc3RhbmNlcyBmb3IgYXN5bW1ldHJpYyBhbGdvcml0aG0gZGVjcnlwdGlvbiBtdXN0IGJlIG9mIHR5cGUgInByaXZhdGUiJykpO2lmKGUuYWxnb3JpdGhtJiYidmVyaWZ5Ij09PXQmJiJwcml2YXRlIj09PWUudHlwZSl0aHJvdyBuZXcgVHlwZUVycm9yKCIiLmNvbmNhdCh3aS5qb2luKCIgb3IgIiksJyBpbnN0YW5jZXMgZm9yIGFzeW1tZXRyaWMgYWxnb3JpdGhtIHZlcmlmeWluZyBtdXN0IGJlIG9mIHR5cGUgInB1YmxpYyInKSk7aWYoZS5hbGdvcml0aG0mJiJlbmNyeXB0Ij09PXQmJiJwcml2YXRlIj09PWUudHlwZSl0aHJvdyBuZXcgVHlwZUVycm9yKCIiLmNvbmNhdCh3aS5qb2luKCIgb3IgIiksJyBpbnN0YW5jZXMgZm9yIGFzeW1tZXRyaWMgYWxnb3JpdGhtIGVuY3J5cHRpb24gbXVzdCBiZSBvZiB0eXBlICJwdWJsaWMiJykpfSkodCxuKX07ZnVuY3Rpb24gRWkoZSx0LG4pe2lmKFhyKHQpKXJldHVybiBmdW5jdGlvbihlLHQpe3N3aXRjaCh0KXtjYXNlIkhTMjU2IjpjYXNlIkhTMzg0IjpjYXNlIkhTNTEyIjp7aWYoIWZpKGUuYWxnb3JpdGhtLCJITUFDIikpdGhyb3cgaGkoIkhNQUMiKTtjb25zdCBuPXBhcnNlSW50KHQuc2xpY2UoMiksMTApO2lmKHBpKGUuYWxnb3JpdGhtLmhhc2gpIT09bil0aHJvdyBoaSgiU0hBLSIuY29uY2F0KG4pLCJhbGdvcml0aG0uaGFzaCIpO2JyZWFrfWNhc2UiUlMyNTYiOmNhc2UiUlMzODQiOmNhc2UiUlM1MTIiOntpZighZmkoZS5hbGdvcml0aG0sIlJTQVNTQS1QS0NTMS12MV81IikpdGhyb3cgaGkoIlJTQVNTQS1QS0NTMS12MV81Iik7Y29uc3Qgbj1wYXJzZUludCh0LnNsaWNlKDIpLDEwKTtpZihwaShlLmFsZ29yaXRobS5oYXNoKSE9PW4pdGhyb3cgaGkoIlNIQS0iLmNvbmNhdChuKSwiYWxnb3JpdGhtLmhhc2giKTticmVha31jYXNlIlBTMjU2IjpjYXNlIlBTMzg0IjpjYXNlIlBTNTEyIjp7aWYoIWZpKGUuYWxnb3JpdGhtLCJSU0EtUFNTIikpdGhyb3cgaGkoIlJTQS1QU1MiKTtjb25zdCBuPXBhcnNlSW50KHQuc2xpY2UoMiksMTApO2lmKHBpKGUuYWxnb3JpdGhtLmhhc2gpIT09bil0aHJvdyBoaSgiU0hBLSIuY29uY2F0KG4pLCJhbGdvcml0aG0uaGFzaCIpO2JyZWFrfWNhc2UgZGkoKSYmIkVkRFNBIjppZighZmkoZS5hbGdvcml0aG0sIk5PREUtRUQyNTUxOSIpKXRocm93IGhpKCJOT0RFLUVEMjU1MTkiKTticmVhaztjYXNlIkVTMjU2IjpjYXNlIkVTMzg0IjpjYXNlIkVTNTEyIjp7aWYoIWZpKGUuYWxnb3JpdGhtLCJFQ0RTQSIpKXRocm93IGhpKCJFQ0RTQSIpO2NvbnN0IG49Z2kodCk7aWYoZS5hbGdvcml0aG0ubmFtZWRDdXJ2ZSE9PW4pdGhyb3cgaGkobiwiYWxnb3JpdGhtLm5hbWVkQ3VydmUiKTticmVha31kZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoIkNyeXB0b0tleSBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgb3BlcmF0aW9uIil9Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkobj4yP24tMjowKSxpPTI7aTxuO2krKylyW2ktMl09YXJndW1lbnRzW2ldO3ZpKGUscil9KHQsZSxuKSx0O2lmKHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KXtpZighZS5zdGFydHNXaXRoKCJIUyIpKXRocm93IG5ldyBUeXBlRXJyb3IoeWkodCwuLi53aSkpO3JldHVybiBHci5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLHQse2hhc2g6IlNIQS0iLmNvbmNhdChlLnNsaWNlKC0zKSksbmFtZToiSE1BQyJ9LCExLFtuXSl9dGhyb3cgbmV3IFR5cGVFcnJvcih5aSh0LC4uLndpLCJVaW50OEFycmF5IikpfWNvbnN0IGtpPWFzeW5jKGUsdCxuLHIpPT57Y29uc3QgaT1hd2FpdCBFaShlLHQsInZlcmlmeSIpOygoZSx0KT0+e2lmKGUuc3RhcnRzV2l0aCgiUlMiKXx8ZS5zdGFydHNXaXRoKCJQUyIpKXtjb25zdHttb2R1bHVzTGVuZ3RoOm59PXQuYWxnb3JpdGhtO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8bjwyMDQ4KXRocm93IG5ldyBUeXBlRXJyb3IoIiIuY29uY2F0KGUsIiByZXF1aXJlcyBrZXkgbW9kdWx1c0xlbmd0aCB0byBiZSAyMDQ4IGJpdHMgb3IgbGFyZ2VyIikpfX0pKGUsaSk7Y29uc3Qgbz1mdW5jdGlvbihlLHQpe2NvbnN0IG49IlNIQS0iLmNvbmNhdChlLnNsaWNlKC0zKSk7c3dpdGNoKGUpe2Nhc2UiSFMyNTYiOmNhc2UiSFMzODQiOmNhc2UiSFM1MTIiOnJldHVybntoYXNoOm4sbmFtZToiSE1BQyJ9O2Nhc2UiUFMyNTYiOmNhc2UiUFMzODQiOmNhc2UiUFM1MTIiOnJldHVybntoYXNoOm4sbmFtZToiUlNBLVBTUyIsc2FsdExlbmd0aDplLnNsaWNlKC0zKT4+M307Y2FzZSJSUzI1NiI6Y2FzZSJSUzM4NCI6Y2FzZSJSUzUxMiI6cmV0dXJue2hhc2g6bixuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSJ9O2Nhc2UiRVMyNTYiOmNhc2UiRVMzODQiOmNhc2UiRVM1MTIiOnJldHVybntoYXNoOm4sbmFtZToiRUNEU0EiLG5hbWVkQ3VydmU6dC5uYW1lZEN1cnZlfTtjYXNlIGRpKCkmJiJFZERTQSI6Y29uc3R7bmFtZWRDdXJ2ZTpyfT10O3JldHVybntuYW1lOnIsbmFtZWRDdXJ2ZTpyfTtkZWZhdWx0OnRocm93IG5ldyBpaSgiYWxnICIuY29uY2F0KGUsIiBpcyBub3Qgc3VwcG9ydGVkIGVpdGhlciBieSBKT1NFIG9yIHlvdXIgamF2YXNjcmlwdCBydW50aW1lIikpfX0oZSxpLmFsZ29yaXRobSk7dHJ5e3JldHVybiBhd2FpdCBHci5zdWJ0bGUudmVyaWZ5KG8saSxuLHIpfWNhdGNoKGUpe3JldHVybiExfX07YXN5bmMgZnVuY3Rpb24gUmkoZSx0LG4pe3ZhciByO2lmKCFfaShlKSl0aHJvdyBuZXcgb2koIkZsYXR0ZW5lZCBKV1MgbXVzdCBiZSBhbiBvYmplY3QiKTtpZih2b2lkIDA9PT1lLnByb3RlY3RlZCYmdm9pZCAwPT09ZS5oZWFkZXIpdGhyb3cgbmV3IG9pKCdGbGF0dGVuZWQgSldTIG11c3QgaGF2ZSBlaXRoZXIgb2YgdGhlICJwcm90ZWN0ZWQiIG9yICJoZWFkZXIiIG1lbWJlcnMnKTtpZih2b2lkIDAhPT1lLnByb3RlY3RlZCYmInN0cmluZyIhPXR5cGVvZiBlLnByb3RlY3RlZCl0aHJvdyBuZXcgb2koIkpXUyBQcm90ZWN0ZWQgSGVhZGVyIGluY29ycmVjdCB0eXBlIik7aWYodm9pZCAwPT09ZS5wYXlsb2FkKXRocm93IG5ldyBvaSgiSldTIFBheWxvYWQgbWlzc2luZyIpO2lmKCJzdHJpbmciIT10eXBlb2YgZS5zaWduYXR1cmUpdGhyb3cgbmV3IG9pKCJKV1MgU2lnbmF0dXJlIG1pc3Npbmcgb3IgaW5jb3JyZWN0IHR5cGUiKTtpZih2b2lkIDAhPT1lLmhlYWRlciYmIV9pKGUuaGVhZGVyKSl0aHJvdyBuZXcgb2koIkpXUyBVbnByb3RlY3RlZCBIZWFkZXIgaW5jb3JyZWN0IHR5cGUiKTtsZXQgaT17fTtpZihlLnByb3RlY3RlZCl7Y29uc3QgdD1RcihlLnByb3RlY3RlZCk7dHJ5e2k9SlNPTi5wYXJzZShaci5kZWNvZGUodCkpfWNhdGNoKGUpe3Rocm93IG5ldyBvaSgiSldTIFByb3RlY3RlZCBIZWFkZXIgaXMgaW52YWxpZCIpfX1pZighZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxuPTA7bjxlO24rKyl0W25dPWFyZ3VtZW50c1tuXTtjb25zdCByPXQuZmlsdGVyKEJvb2xlYW4pO2lmKDA9PT1yLmxlbmd0aHx8MT09PXIubGVuZ3RoKXJldHVybiEwO2xldCBpO2Zvcihjb25zdCBlIG9mIHIpe2NvbnN0IHQ9T2JqZWN0LmtleXMoZSk7aWYoaSYmMCE9PWkuc2l6ZSlmb3IoY29uc3QgZSBvZiB0KXtpZihpLmhhcyhlKSlyZXR1cm4hMTtpLmFkZChlKX1lbHNlIGk9bmV3IFNldCh0KX1yZXR1cm4hMH0oaSxlLmhlYWRlcikpdGhyb3cgbmV3IG9pKCJKV1MgUHJvdGVjdGVkIGFuZCBKV1MgVW5wcm90ZWN0ZWQgSGVhZGVyIFBhcmFtZXRlciBuYW1lcyBtdXN0IGJlIGRpc2pvaW50Iik7Y29uc3Qgbz17Li4uaSwuLi5lLmhlYWRlcn0scz1mdW5jdGlvbihlLHQsbixyLGkpe2lmKHZvaWQgMCE9PWkuY3JpdCYmdm9pZCAwPT09ci5jcml0KXRocm93IG5ldyBlKCciY3JpdCIgKENyaXRpY2FsKSBIZWFkZXIgUGFyYW1ldGVyIE1VU1QgYmUgaW50ZWdyaXR5IHByb3RlY3RlZCcpO2lmKCFyfHx2b2lkIDA9PT1yLmNyaXQpcmV0dXJuIG5ldyBTZXQ7aWYoIUFycmF5LmlzQXJyYXkoci5jcml0KXx8MD09PXIuY3JpdC5sZW5ndGh8fHIuY3JpdC5zb21lKChlPT4ic3RyaW5nIiE9dHlwZW9mIGV8fDA9PT1lLmxlbmd0aCkpKXRocm93IG5ldyBlKCciY3JpdCIgKENyaXRpY2FsKSBIZWFkZXIgUGFyYW1ldGVyIE1VU1QgYmUgYW4gYXJyYXkgb2Ygbm9uLWVtcHR5IHN0cmluZ3Mgd2hlbiBwcmVzZW50Jyk7bGV0IG87bz12b2lkIDAhPT1uP25ldyBNYXAoWy4uLk9iamVjdC5lbnRyaWVzKG4pLC4uLnQuZW50cmllcygpXSk6dDtmb3IoY29uc3QgdCBvZiByLmNyaXQpe2lmKCFvLmhhcyh0KSl0aHJvdyBuZXcgaWkoJ0V4dGVuc2lvbiBIZWFkZXIgUGFyYW1ldGVyICInLmNvbmNhdCh0LCciIGlzIG5vdCByZWNvZ25pemVkJykpO2lmKHZvaWQgMD09PWlbdF0pdGhyb3cgbmV3IGUoJ0V4dGVuc2lvbiBIZWFkZXIgUGFyYW1ldGVyICInLmNvbmNhdCh0LCciIGlzIG1pc3NpbmcnKSk7aWYoby5nZXQodCkmJnZvaWQgMD09PXJbdF0pdGhyb3cgbmV3IGUoJ0V4dGVuc2lvbiBIZWFkZXIgUGFyYW1ldGVyICInLmNvbmNhdCh0LCciIE1VU1QgYmUgaW50ZWdyaXR5IHByb3RlY3RlZCcpKX1yZXR1cm4gbmV3IFNldChyLmNyaXQpfShvaSxuZXcgTWFwKFtbImI2NCIsITBdXSksbnVsbD09bj92b2lkIDA6bi5jcml0LGksbyk7bGV0IGE9ITA7aWYocy5oYXMoImI2NCIpJiYoYT1pLmI2NCwiYm9vbGVhbiIhPXR5cGVvZiBhKSl0aHJvdyBuZXcgb2koJ1RoZSAiYjY0IiAoYmFzZTY0dXJsLWVuY29kZSBwYXlsb2FkKSBIZWFkZXIgUGFyYW1ldGVyIG11c3QgYmUgYSBib29sZWFuJyk7Y29uc3R7YWxnOmN9PW87aWYoInN0cmluZyIhPXR5cGVvZiBjfHwhYyl0aHJvdyBuZXcgb2koJ0pXUyAiYWxnIiAoQWxnb3JpdGhtKSBIZWFkZXIgUGFyYW1ldGVyIG1pc3Npbmcgb3IgaW52YWxpZCcpO2NvbnN0IHU9biYmKChlLHQpPT57aWYodm9pZCAwIT09dCYmKCFBcnJheS5pc0FycmF5KHQpfHx0LnNvbWUoKGU9PiJzdHJpbmciIT10eXBlb2YgZSkpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciJy5jb25jYXQoZSwnIiBvcHRpb24gbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzJykpO2lmKHQpcmV0dXJuIG5ldyBTZXQodCl9KSgiYWxnb3JpdGhtcyIsbi5hbGdvcml0aG1zKTtpZih1JiYhdS5oYXMoYykpdGhyb3cgbmV3IHJpKCciYWxnIiAoQWxnb3JpdGhtKSBIZWFkZXIgUGFyYW1ldGVyIG5vdCBhbGxvd2VkJyk7aWYoYSl7aWYoInN0cmluZyIhPXR5cGVvZiBlLnBheWxvYWQpdGhyb3cgbmV3IG9pKCJKV1MgUGF5bG9hZCBtdXN0IGJlIGEgc3RyaW5nIil9ZWxzZSBpZigic3RyaW5nIiE9dHlwZW9mIGUucGF5bG9hZCYmIShlLnBheWxvYWQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSl0aHJvdyBuZXcgb2koIkpXUyBQYXlsb2FkIG11c3QgYmUgYSBzdHJpbmcgb3IgYW4gVWludDhBcnJheSBpbnN0YW5jZSIpO2xldCBsPSExOyJmdW5jdGlvbiI9PXR5cGVvZiB0JiYodD1hd2FpdCB0KGksZSksbD0hMCksYmkoYyx0LCJ2ZXJpZnkiKTtjb25zdCBkPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSksbj0wO248ZTtuKyspdFtuXT1hcmd1bWVudHNbbl07Y29uc3Qgcj10LnJlZHVjZSgoKGUsdCk9PntsZXR7bGVuZ3RoOm59PXQ7cmV0dXJuIGUrbn0pLDApLGk9bmV3IFVpbnQ4QXJyYXkocik7bGV0IG89MDtyZXR1cm4gdC5mb3JFYWNoKChlPT57aS5zZXQoZSxvKSxvKz1lLmxlbmd0aH0pKSxpfSgkci5lbmNvZGUobnVsbCE9PShyPWUucHJvdGVjdGVkKSYmdm9pZCAwIT09cj9yOiIiKSwkci5lbmNvZGUoIi4iKSwic3RyaW5nIj09dHlwZW9mIGUucGF5bG9hZD8kci5lbmNvZGUoZS5wYXlsb2FkKTplLnBheWxvYWQpLGg9UXIoZS5zaWduYXR1cmUpO2lmKCFhd2FpdCBraShjLHQsaCxkKSl0aHJvdyBuZXcgbGk7bGV0IGY7Zj1hP1FyKGUucGF5bG9hZCk6InN0cmluZyI9PXR5cGVvZiBlLnBheWxvYWQ/JHIuZW5jb2RlKGUucGF5bG9hZCk6ZS5wYXlsb2FkO2NvbnN0IHA9e3BheWxvYWQ6Zn07cmV0dXJuIHZvaWQgMCE9PWUucHJvdGVjdGVkJiYocC5wcm90ZWN0ZWRIZWFkZXI9aSksdm9pZCAwIT09ZS5oZWFkZXImJihwLnVucHJvdGVjdGVkSGVhZGVyPWUuaGVhZGVyKSxsP3suLi5wLGtleTp0fTpwfXZhciBUaT1lPT5NYXRoLmZsb29yKGUuZ2V0VGltZSgpLzFlMyk7Y29uc3QgQWk9ODY0MDAsQ2k9L14oXGQrfFxkK1wuXGQrKSA/KHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSkkL2k7dmFyIERpPWU9Pntjb25zdCB0PUNpLmV4ZWMoZSk7aWYoIXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCB0aW1lIHBlcmlvZCBmb3JtYXQiKTtjb25zdCBuPXBhcnNlRmxvYXQodFsxXSk7c3dpdGNoKHRbMl0udG9Mb3dlckNhc2UoKSl7Y2FzZSJzZWMiOmNhc2Uic2VjcyI6Y2FzZSJzZWNvbmQiOmNhc2Uic2Vjb25kcyI6Y2FzZSJzIjpyZXR1cm4gTWF0aC5yb3VuZChuKTtjYXNlIm1pbnV0ZSI6Y2FzZSJtaW51dGVzIjpjYXNlIm1pbiI6Y2FzZSJtaW5zIjpjYXNlIm0iOnJldHVybiBNYXRoLnJvdW5kKDYwKm4pO2Nhc2UiaG91ciI6Y2FzZSJob3VycyI6Y2FzZSJociI6Y2FzZSJocnMiOmNhc2UiaCI6cmV0dXJuIE1hdGgucm91bmQoMzYwMCpuKTtjYXNlImRheSI6Y2FzZSJkYXlzIjpjYXNlImQiOnJldHVybiBNYXRoLnJvdW5kKG4qQWkpO2Nhc2Uid2VlayI6Y2FzZSJ3ZWVrcyI6Y2FzZSJ3IjpyZXR1cm4gTWF0aC5yb3VuZCg2MDQ4MDAqbik7ZGVmYXVsdDpyZXR1cm4gTWF0aC5yb3VuZCgzMTU1NzYwMCpuKX19O2NvbnN0IFBpPWU9PmUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eYXBwbGljYXRpb25cLy8sIiIpLE9pPShlLHQpPT4ic3RyaW5nIj09dHlwZW9mIGU/dC5pbmNsdWRlcyhlKTohIUFycmF5LmlzQXJyYXkoZSkmJnQuc29tZShTZXQucHJvdG90eXBlLmhhcy5iaW5kKG5ldyBTZXQoZSkpKTthc3luYyBmdW5jdGlvbiBJaShlLHQsbil7dmFyIHI7Y29uc3QgaT1hd2FpdCBhc3luYyBmdW5jdGlvbihlLHQsbil7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJihlPVpyLmRlY29kZShlKSksInN0cmluZyIhPXR5cGVvZiBlKXRocm93IG5ldyBvaSgiQ29tcGFjdCBKV1MgbXVzdCBiZSBhIHN0cmluZyBvciBVaW50OEFycmF5Iik7Y29uc3R7MDpyLDE6aSwyOm8sbGVuZ3RoOnN9PWUuc3BsaXQoIi4iKTtpZigzIT09cyl0aHJvdyBuZXcgb2koIkludmFsaWQgQ29tcGFjdCBKV1MiKTtjb25zdCBhPWF3YWl0IFJpKHtwYXlsb2FkOmkscHJvdGVjdGVkOnIsc2lnbmF0dXJlOm99LHQsbiksYz17cGF5bG9hZDphLnBheWxvYWQscHJvdGVjdGVkSGVhZGVyOmEucHJvdGVjdGVkSGVhZGVyfTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD97Li4uYyxrZXk6YS5rZXl9OmN9KGUsdCxuKTtpZigobnVsbD09PShyPWkucHJvdGVjdGVkSGVhZGVyLmNyaXQpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmluY2x1ZGVzKCJiNjQiKSkmJiExPT09aS5wcm90ZWN0ZWRIZWFkZXIuYjY0KXRocm93IG5ldyBzaSgiSldUcyBNVVNUIE5PVCB1c2UgdW5lbmNvZGVkIHBheWxvYWQiKTtjb25zdCBvPWZ1bmN0aW9uKGUsdCl7bGV0IG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O2NvbnN0e3R5cDpyfT1uO2lmKHImJigic3RyaW5nIiE9dHlwZW9mIGUudHlwfHxQaShlLnR5cCkhPT1QaShyKSkpdGhyb3cgbmV3IHRpKCd1bmV4cGVjdGVkICJ0eXAiIEpXVCBoZWFkZXIgdmFsdWUnLCJ0eXAiLCJjaGVja19mYWlsZWQiKTtsZXQgaTt0cnl7aT1KU09OLnBhcnNlKFpyLmRlY29kZSh0KSl9Y2F0Y2goZSl7fWlmKCFfaShpKSl0aHJvdyBuZXcgc2koIkpXVCBDbGFpbXMgU2V0IG11c3QgYmUgYSB0b3AtbGV2ZWwgSlNPTiBvYmplY3QiKTtjb25zdHtpc3N1ZXI6b309bjtpZihvJiYhKEFycmF5LmlzQXJyYXkobyk/bzpbb10pLmluY2x1ZGVzKGkuaXNzKSl0aHJvdyBuZXcgdGkoJ3VuZXhwZWN0ZWQgImlzcyIgY2xhaW0gdmFsdWUnLCJpc3MiLCJjaGVja19mYWlsZWQiKTtjb25zdHtzdWJqZWN0OnN9PW47aWYocyYmaS5zdWIhPT1zKXRocm93IG5ldyB0aSgndW5leHBlY3RlZCAic3ViIiBjbGFpbSB2YWx1ZScsInN1YiIsImNoZWNrX2ZhaWxlZCIpO2NvbnN0e2F1ZGllbmNlOmF9PW47aWYoYSYmIU9pKGkuYXVkLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSkpdGhyb3cgbmV3IHRpKCd1bmV4cGVjdGVkICJhdWQiIGNsYWltIHZhbHVlJywiYXVkIiwiY2hlY2tfZmFpbGVkIik7bGV0IGM7c3dpdGNoKHR5cGVvZiBuLmNsb2NrVG9sZXJhbmNlKXtjYXNlInN0cmluZyI6Yz1EaShuLmNsb2NrVG9sZXJhbmNlKTticmVhaztjYXNlIm51bWJlciI6Yz1uLmNsb2NrVG9sZXJhbmNlO2JyZWFrO2Nhc2UidW5kZWZpbmVkIjpjPTA7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGNsb2NrVG9sZXJhbmNlIG9wdGlvbiB0eXBlIil9Y29uc3R7Y3VycmVudERhdGU6dX09bixsPVRpKHV8fG5ldyBEYXRlKTtpZigodm9pZCAwIT09aS5pYXR8fG4ubWF4VG9rZW5BZ2UpJiYibnVtYmVyIiE9dHlwZW9mIGkuaWF0KXRocm93IG5ldyB0aSgnImlhdCIgY2xhaW0gbXVzdCBiZSBhIG51bWJlcicsImlhdCIsImludmFsaWQiKTtpZih2b2lkIDAhPT1pLm5iZil7aWYoIm51bWJlciIhPXR5cGVvZiBpLm5iZil0aHJvdyBuZXcgdGkoJyJuYmYiIGNsYWltIG11c3QgYmUgYSBudW1iZXInLCJuYmYiLCJpbnZhbGlkIik7aWYoaS5uYmY+bCtjKXRocm93IG5ldyB0aSgnIm5iZiIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCcsIm5iZiIsImNoZWNrX2ZhaWxlZCIpfWlmKHZvaWQgMCE9PWkuZXhwKXtpZigibnVtYmVyIiE9dHlwZW9mIGkuZXhwKXRocm93IG5ldyB0aSgnImV4cCIgY2xhaW0gbXVzdCBiZSBhIG51bWJlcicsImV4cCIsImludmFsaWQiKTtpZihpLmV4cDw9bC1jKXRocm93IG5ldyBuaSgnImV4cCIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCcsImV4cCIsImNoZWNrX2ZhaWxlZCIpfWlmKG4ubWF4VG9rZW5BZ2Upe2NvbnN0IGU9bC1pLmlhdDtpZihlLWM+KCJudW1iZXIiPT10eXBlb2Ygbi5tYXhUb2tlbkFnZT9uLm1heFRva2VuQWdlOkRpKG4ubWF4VG9rZW5BZ2UpKSl0aHJvdyBuZXcgbmkoJyJpYXQiIGNsYWltIHRpbWVzdGFtcCBjaGVjayBmYWlsZWQgKHRvbyBmYXIgaW4gdGhlIHBhc3QpJywiaWF0IiwiY2hlY2tfZmFpbGVkIik7aWYoZTwwLWMpdGhyb3cgbmV3IHRpKCciaWF0IiBjbGFpbSB0aW1lc3RhbXAgY2hlY2sgZmFpbGVkIChpdCBzaG91bGQgYmUgaW4gdGhlIHBhc3QpJywiaWF0IiwiY2hlY2tfZmFpbGVkIil9cmV0dXJuIGl9KGkucHJvdGVjdGVkSGVhZGVyLGkucGF5bG9hZCxuKSxzPXtwYXlsb2FkOm8scHJvdGVjdGVkSGVhZGVyOmkucHJvdGVjdGVkSGVhZGVyfTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD97Li4ucyxrZXk6aS5rZXl9OnN9ZnVuY3Rpb24gVWkoZSl7cmV0dXJuIF9pKGUpfWNsYXNzIExpe2NvbnN0cnVjdG9yKGUpe2lmKHRoaXMuX2NhY2hlZD1uZXcgV2Vha01hcCwhZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJvYmplY3QiPT10eXBlb2YgZSYmQXJyYXkuaXNBcnJheShlLmtleXMpJiZlLmtleXMuZXZlcnkoVWkpfShlKSl0aHJvdyBuZXcgYWkoIkpTT04gV2ViIEtleSBTZXQgbWFsZm9ybWVkIik7dmFyIHQ7dGhpcy5fandrcz0odD1lLCJmdW5jdGlvbiI9PXR5cGVvZiBzdHJ1Y3R1cmVkQ2xvbmU/c3RydWN0dXJlZENsb25lKHQpOkpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpKX1hc3luYyBnZXRLZXkoZSx0KXtjb25zdHthbGc6bixraWQ6cn09ey4uLmUsLi4udC5oZWFkZXJ9LGk9ZnVuY3Rpb24oZSl7c3dpdGNoKCJzdHJpbmciPT10eXBlb2YgZSYmZS5zbGljZSgwLDIpKXtjYXNlIlJTIjpjYXNlIlBTIjpyZXR1cm4iUlNBIjtjYXNlIkVTIjpyZXR1cm4iRUMiO2Nhc2UiRWQiOnJldHVybiJPS1AiO2RlZmF1bHQ6dGhyb3cgbmV3IGlpKCdVbnN1cHBvcnRlZCAiYWxnIiB2YWx1ZSBmb3IgYSBKU09OIFdlYiBLZXkgU2V0Jyl9fShuKSxvPXRoaXMuX2p3a3Mua2V5cy5maWx0ZXIoKGU9PntsZXQgdD1pPT09ZS5rdHk7aWYodCYmInN0cmluZyI9PXR5cGVvZiByJiYodD1yPT09ZS5raWQpLHQmJiJzdHJpbmciPT10eXBlb2YgZS5hbGcmJih0PW49PT1lLmFsZyksdCYmInN0cmluZyI9PXR5cGVvZiBlLnVzZSYmKHQ9InNpZyI9PT1lLnVzZSksdCYmQXJyYXkuaXNBcnJheShlLmtleV9vcHMpJiYodD1lLmtleV9vcHMuaW5jbHVkZXMoInZlcmlmeSIpKSx0JiYiRWREU0EiPT09biYmKHQ9IkVkMjU1MTkiPT09ZS5jcnZ8fCJFZDQ0OCI9PT1lLmNydiksdClzd2l0Y2gobil7Y2FzZSJFUzI1NiI6dD0iUC0yNTYiPT09ZS5jcnY7YnJlYWs7Y2FzZSJFUzI1NksiOnQ9InNlY3AyNTZrMSI9PT1lLmNydjticmVhaztjYXNlIkVTMzg0Ijp0PSJQLTM4NCI9PT1lLmNydjticmVhaztjYXNlIkVTNTEyIjp0PSJQLTUyMSI9PT1lLmNydn1yZXR1cm4gdH0pKSx7MDpzLGxlbmd0aDphfT1vO2lmKDA9PT1hKXRocm93IG5ldyBjaTtpZigxIT09YSl0aHJvdyBuZXcgdWk7Y29uc3QgYz10aGlzLl9jYWNoZWQuZ2V0KHMpfHx0aGlzLl9jYWNoZWQuc2V0KHMse30pLmdldChzKTtpZih2b2lkIDA9PT1jW25dKXtjb25zdCBlPWF3YWl0IGFzeW5jIGZ1bmN0aW9uKGUsdCxuKXtpZighX2koZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSldLIG11c3QgYmUgYW4gb2JqZWN0Iik7aWYodHx8KHQ9ZS5hbGcpLCJzdHJpbmciIT10eXBlb2YgdHx8IXQpdGhyb3cgbmV3IFR5cGVFcnJvcignImFsZyIgYXJndW1lbnQgaXMgcmVxdWlyZWQgd2hlbiAiandrLmFsZyIgaXMgbm90IHByZXNlbnQnKTtzd2l0Y2goZS5rdHkpe2Nhc2Uib2N0IjppZigic3RyaW5nIiE9dHlwZW9mIGUua3x8IWUuayl0aHJvdyBuZXcgVHlwZUVycm9yKCdtaXNzaW5nICJrIiAoS2V5IFZhbHVlKSBQYXJhbWV0ZXIgdmFsdWUnKTtyZXR1cm4gbnVsbCE9bnx8KG49ITAhPT1lLmV4dCksbj9TaSh7Li4uZSxhbGc6dCxleHQ6ITF9KTpRcihlLmspO2Nhc2UiUlNBIjppZih2b2lkIDAhPT1lLm90aCl0aHJvdyBuZXcgaWkoJ1JTQSBKV0sgIm90aCIgKE90aGVyIFByaW1lcyBJbmZvKSBQYXJhbWV0ZXIgdmFsdWUgaXMgbm90IHN1cHBvcnRlZCcpO2Nhc2UiRUMiOmNhc2UiT0tQIjpyZXR1cm4gU2koey4uLmUsYWxnOnR9KTtkZWZhdWx0OnRocm93IG5ldyBpaSgnVW5zdXBwb3J0ZWQgImt0eSIgKEtleSBUeXBlKSBQYXJhbWV0ZXIgdmFsdWUnKX19KHsuLi5zLGV4dDohMH0sbik7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fCJwdWJsaWMiIT09ZS50eXBlKXRocm93IG5ldyBhaSgiSlNPTiBXZWIgS2V5IFNldCBtZW1iZXJzIG11c3QgYmUgcHVibGljIGtleXMiKTtjW25dPWV9cmV0dXJuIGNbbl19fXZhciBIaT17ZXhwb3J0czp7fX0sTWk9e2V4cG9ydHM6e319LGppPVAocnQpOwovKiEgc2FmZS1idWZmZXIuIE1JVCBMaWNlbnNlLiBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmcvb3BlbnNvdXJjZT4gKi8KIWZ1bmN0aW9uKGUsdCl7dmFyIG49amkscj1uLkJ1ZmZlcjtmdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBuIGluIGUpdFtuXT1lW25dfWZ1bmN0aW9uIG8oZSx0LG4pe3JldHVybiByKGUsdCxuKX1yLmZyb20mJnIuYWxsb2MmJnIuYWxsb2NVbnNhZmUmJnIuYWxsb2NVbnNhZmVTbG93P2UuZXhwb3J0cz1uOihpKG4sdCksdC5CdWZmZXI9byksby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSksaShyLG8pLG8uZnJvbT1mdW5jdGlvbihlLHQsbil7aWYoIm51bWJlciI9PXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyIik7cmV0dXJuIHIoZSx0LG4pfSxvLmFsbG9jPWZ1bmN0aW9uKGUsdCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlciIpO3ZhciBpPXIoZSk7cmV0dXJuIHZvaWQgMCE9PXQ/InN0cmluZyI9PXR5cGVvZiBuP2kuZmlsbCh0LG4pOmkuZmlsbCh0KTppLmZpbGwoMCksaX0sby5hbGxvY1Vuc2FmZT1mdW5jdGlvbihlKXtpZigibnVtYmVyIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlciIpO3JldHVybiByKGUpfSxvLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihlKXtpZigibnVtYmVyIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlciIpO3JldHVybiBuLlNsb3dCdWZmZXIoZSl9fShNaSxNaS5leHBvcnRzKTt2YXIgTmk9NjU1MzYseGk9NDI5NDk2NzI5NTt2YXIgcWk9TWkuZXhwb3J0cy5CdWZmZXIsQmk9Qy5jcnlwdG98fEMubXNDcnlwdG87QmkmJkJpLmdldFJhbmRvbVZhbHVlcz9IaS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoZT54aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigicmVxdWVzdGVkIHRvbyBtYW55IHJhbmRvbSBieXRlcyIpO3ZhciBuPXFpLmFsbG9jVW5zYWZlKGUpO2lmKGU+MClpZihlPk5pKWZvcih2YXIgcj0wO3I8ZTtyKz1OaSlCaS5nZXRSYW5kb21WYWx1ZXMobi5zbGljZShyLHIrTmkpKTtlbHNlIEJpLmdldFJhbmRvbVZhbHVlcyhuKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClyZXR1cm4gZW4ubmV4dFRpY2soKGZ1bmN0aW9uKCl7dChudWxsLG4pfSkpO3JldHVybiBufTpIaS5leHBvcnRzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJTZWN1cmUgcmFuZG9tIG51bWJlciBnZW5lcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLlxuVXNlIENocm9tZSwgRmlyZWZveCBvciBJbnRlcm5ldCBFeHBsb3JlciAxMSIpfTt2YXIgRmk9SGkuZXhwb3J0cztjbGFzcyBLaXtiYXNlNjRVUkxFbmNvZGUoZSl7cmV0dXJuIHpyLmVuY29kZShlKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpLnJlcGxhY2UoLz0vZywiIil9YmFzZTY0VVJMRGVjb2RlKGUpe3JldHVybiB6ci5kZWNvZGUoZSkudG9TdHJpbmcoKX1oYXNoU2hhMjU2KGUpe3JldHVybiBtZS5mcm9tKFlyKChuZXcgVGV4dEVuY29kZXIpLmVuY29kZShlKSkpfWdlbmVyYXRlUmFuZG9tQnl0ZXMoZSl7cmV0dXJuIEZpKGUpfXZlcmlmeUp3dChlLHQsbixyLGksbyxzLGEpe2NvbnN0IHU9e2FsZ29yaXRobXM6bixhdWRpZW5jZTpyLGNsb2NrVG9sZXJhbmNlOnMsc3ViamVjdDpvfTtyZXR1cm4obnVsbD09YXx8YSkmJih1Lmlzc3Vlcj1pKSxJaShlLChsPXtrZXlzOlt0XX0sTGkucHJvdG90eXBlLmdldEtleS5iaW5kKG5ldyBMaShsKSkpLHUpLnRoZW4oKCgpPT5Qcm9taXNlLnJlc29sdmUoITApKSkuY2F0Y2goKGU9Pnt2YXIgdDtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IGMoIlNQQS1DUllQVE8tVVRJTFMtVkotSVYwMSIsbnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUucmVhc29uKSYmdm9pZCAwIT09dD90OkpTT04uc3RyaW5naWZ5KGUpLCIiLmNvbmNhdChudWxsPT1lP3ZvaWQgMDplLmNvZGUsIiAiKS5jb25jYXQobnVsbD09ZT92b2lkIDA6ZS5jbGFpbSkpKX0pKTt2YXIgbH19KHQ9Pntjb25zdCBuPXNlbGY7bGV0IHI7bi5vbm1lc3NhZ2U9bj0+e2xldHtkYXRhOmEscG9ydHM6dX09bjtyZXR1cm4gZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIG4sbCxkLGgsZixwO2NvbnN0IHk9dVswXTtpZihhLnR5cGU9PT12fHxyKXN3aXRjaChhLnR5cGUpe2Nhc2Ugdjp0cnl7Y29uc3Qgbj1PYmplY3QuYXNzaWduKHt9LGEuZGF0YSk7cj15aWVsZCgodCxuKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcj1uZXcgTXIsaT1uZXcgS2ksbz1uZXcgZzt5aWVsZCBvLmluaXRpYWxpemUodCxyLGkpO2NvbnN0IHM9bmV3IEEobyksYT1uKG8scyksYz1vLmdldERhdGFMYXllcigpLHU9SHIuZ2V0SW5zdGFuY2UoKTtyZXR1cm4obnVsbD09dT92b2lkIDA6dS5pbml0KSYmKHlpZWxkIHUuaW5pdCghMCwodD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgYS5hdHRhY2hUb2tlblRvUmVxdWVzdENvbmZpZyh0KX0pKSkpKSx7ZGlzYWJsZUh0dHBIYW5kbGVyOigpPT57YS5kaXNhYmxlSHR0cEhhbmRsZXIodSl9LGVuYWJsZUh0dHBIYW5kbGVyOigpPT57YS5lbmFibGVIdHRwSGFuZGxlcih1KX0sZ2V0QWNjZXNzVG9rZW46KCk9PmEuZ2V0QWNjZXNzVG9rZW4oKSxnZXRBdXRob3JpemF0aW9uVVJMOnQ9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBvLmdldEF1dGhvcml6YXRpb25VUkwodCkudGhlbigodD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIGU7Y29uc3Qgbj1udWxsIT09KGU9bmV3IFVSTCh0KS5zZWFyY2hQYXJhbXMuZ2V0KCJzdGF0ZSIpKSYmdm9pZCAwIT09ZT9lOiIiLHI9eWllbGQgby5nZXRQS0NFQ29kZShuKTtyZXR1cm57YXV0aG9yaXphdGlvblVSTDp0LHBrY2U6cn19KSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKX0pKSxnZXRCYXNpY1VzZXJJbmZvOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gYS5nZXRCYXNpY1VzZXJJbmZvKCl9KSksZ2V0Q29uZmlnRGF0YTooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGMuZ2V0Q29uZmlnRGF0YSgpfSkpLGdldENyeXB0b0hlbHBlcjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGEuZ2V0Q3J5cHRvSGVscGVyKCl9KSksZ2V0RGVjb2RlZElEUElEVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBhLmdldERlY29kZWRJRFBJRFRva2VuKCl9KSksZ2V0RGVjb2RlZElEVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBhLmdldERlY29kZWRJRFRva2VuKCl9KSksZ2V0SURUb2tlbjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGEuZ2V0SURUb2tlbigpfSkpLGdldE9JRENTZXJ2aWNlRW5kcG9pbnRzOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gYS5nZXRPSURDU2VydmljZUVuZHBvaW50cygpfSkpLGdldFNpZ25PdXRVUkw6KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCBvLmdldFNpZ25PdXRVUkwoKX0pKSxodHRwUmVxdWVzdDp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgYS5odHRwUmVxdWVzdCh1LHQpfSkpLGh0dHBSZXF1ZXN0QWxsOnQ9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCBhLmh0dHBSZXF1ZXN0QWxsKHQsdSl9KSksaXNBdXRoZW50aWNhdGVkOigpPT5hLmlzQXV0aGVudGljYXRlZCgpLHJlZnJlc2hBY2Nlc3NUb2tlbjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dHJ5e3JldHVybiB5aWVsZCBhLnJlZnJlc2hBY2Nlc3NUb2tlbigpfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX19KSkscmVxdWVzdEFjY2Vzc1Rva2VuOih0LG4scixpKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIGEucmVxdWVzdEFjY2Vzc1Rva2VuKHQsbix2b2lkIDAscixpKX0pKSxyZXF1ZXN0Q3VzdG9tR3JhbnQ6dD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIGEucmVxdWVzdEN1c3RvbUdyYW50KHQpfSkpLHJldm9rZUFjY2Vzc1Rva2VuOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHMuZ2V0UmVmcmVzaFRpbWVvdXRUaW1lcigpO3JldHVybiBvLnJldm9rZUFjY2Vzc1Rva2VuKCkudGhlbigoKCk9PihzLmNsZWFyUmVmcmVzaFRva2VuVGltZW91dChlKSxQcm9taXNlLnJlc29sdmUoITApKSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpfSkpLHNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2s6ZT0+eyhudWxsPT11P3ZvaWQgMDp1LnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2spJiZ1LnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2soZSl9LHNldEh0dHBSZXF1ZXN0U3RhcnRDYWxsYmFjazplPT57KG51bGw9PXU/dm9pZCAwOnUuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrKSYmdS5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2soZSl9LHNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrOmU9PnsobnVsbD09dT92b2lkIDA6dS5zZXRIdHRwUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaykmJnUuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2soZSl9LHNldFNlc3Npb25TdGF0ZTp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCBjLnNldFNlc3Npb25EYXRhUGFyYW1ldGVyKCJzZXNzaW9uX3N0YXRlIix0KX0pKSxzaWduT3V0OigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gcy5jbGVhclJlZnJlc2hUb2tlblRpbWVvdXQoKSx5aWVsZCBvLmdldFNpZ25PdXRVUkwoKX0pKSxzdGFydEF1dG9SZWZyZXNoVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3MuY2xlYXJSZWZyZXNoVG9rZW5UaW1lb3V0KCkscy5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KGEpfSkpLHVwZGF0ZUNvbmZpZzp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCBvLnVwZGF0ZUNvbmZpZyh0KX0pKX19KSkpKG4sdCksci5zZXRIdHRwUmVxdWVzdEZpbmlzaENhbGxiYWNrKHMpLHIuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrKGkpLHIuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2sobykseS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0X2F1dGhfdXJsIjpyLmdldEF1dGhvcml6YXRpb25VUkwobnVsbD09YT92b2lkIDA6YS5kYXRhKS50aGVuKChlPT57eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoZSkpfSkpLmNhdGNoKChlPT57eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfSkpO2JyZWFrO2Nhc2UicmVxdWVzdF9nZXRfdG9rZW4iOnIucmVxdWVzdEFjY2Vzc1Rva2VuKG51bGw9PT0obj1udWxsPT1hP3ZvaWQgMDphLmRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvZGUsbnVsbD09PShsPW51bGw9PWE/dm9pZCAwOmEuZGF0YSl8fHZvaWQgMD09PWw/dm9pZCAwOmwuc2Vzc2lvblN0YXRlLG51bGw9PT0oZD1udWxsPT1hP3ZvaWQgMDphLmRhdGEpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLnBrY2UsbnVsbD09PShoPW51bGw9PWE/dm9pZCAwOmEuZGF0YSl8fHZvaWQgMD09PWg/dm9pZCAwOmguc3RhdGUpLnRoZW4oKGU9Pnt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShlKSl9KSkuY2F0Y2goKGU9Pnt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9KSk7YnJlYWs7Y2FzZSJodHRwLXJlcXVlc3QiOntjb25zdCBlPWEuZGF0YSx0PW51bGw9PWU/dm9pZCAwOmUuZGF0YTtpZighMD09PShudWxsPT09KHA9bnVsbD09PShmPWEuZGF0YSl8fHZvaWQgMD09PWY/dm9pZCAwOmYuZGF0YSl8fHZvaWQgMD09PXA/dm9pZCAwOnAuZm9ybURhdGEpKXtjb25zdCBuPW5ldyBGb3JtRGF0YTtmb3IoY29uc3QgZSBpbiB0KSJmb3JtRGF0YSIhPT1lJiZuLmFwcGVuZChlLHRbZV0pO2UuZGF0YT1ufXIuaHR0cFJlcXVlc3QoZSkudGhlbigoZT0+e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKGUpKX0pKS5jYXRjaCgoZT0+e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX0pKTticmVha31jYXNlImh0dHAtcmVxdWVzdC1hbGwiOnIuaHR0cFJlcXVlc3RBbGwoYS5kYXRhKS50aGVuKChlPT57eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoZSkpfSkpLmNhdGNoKChlPT57eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfSkpO2JyZWFrO2Nhc2Uic2lnbi1vdXQiOnRyeXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLnNpZ25PdXQoKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztjYXNlInJlcXVlc3QtY3VzdG9tLWdyYW50IjpyLnJlcXVlc3RDdXN0b21HcmFudChhLmRhdGEpLnRoZW4oKGU9Pnt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShlKSl9KSkuY2F0Y2goKGU9Pnt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9KSk7YnJlYWs7Y2FzZSJyZXZva2UtYWNjZXNzLXRva2VuIjpyLnJldm9rZUFjY2Vzc1Rva2VuKCkudGhlbigoZT0+e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKGUpKX0pKS5jYXRjaCgoZT0+e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX0pKTticmVhaztjYXNlImdldC1vaWRjLXNlcnZpY2UtZW5kcG9pbnRzIjp0cnl7eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoeWllbGQgci5nZXRPSURDU2VydmljZUVuZHBvaW50cygpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0LWJhc2ljLXVzZXItaW5mbyI6dHJ5e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuZ2V0QmFzaWNVc2VySW5mbygpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0LWRlY29kZWQtaWQtdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldERlY29kZWRJRFRva2VuKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXQtY3J5cHRvLWhlbHBlciI6dHJ5e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuZ2V0Q3J5cHRvSGVscGVyKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfaWRfdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldElEVG9rZW4oKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztjYXNlImVuYWJsZV9odHRwX2hhbmRsZXIiOnIuZW5hYmxlSHR0cEhhbmRsZXIoKSx5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSgpKTticmVhaztjYXNlImRpc2FibGVfaHR0cF9oYW5kbGVyIjpyLmRpc2FibGVIdHRwSGFuZGxlcigpLHkucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKCkpO2JyZWFrO2Nhc2UiaXNfYXV0aGVudGljYXRlZCI6dHJ5e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuaXNBdXRoZW50aWNhdGVkKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfc2lnbl9vdXRfdXJsIjp0cnl7eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoeWllbGQgci5nZXRTaWduT3V0VVJMKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJyZWZyZXNoX2FjY2Vzcy10b2tlbiI6dHJ5e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIucmVmcmVzaEFjY2Vzc1Rva2VuKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJzdGFydF9hdXRvX3JlZnJlc2hfdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShyLnN0YXJ0QXV0b1JlZnJlc2hUb2tlbigpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2Uic2V0X3Nlc3Npb25fc3RhdGUiOnRyeXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLnNldFNlc3Npb25TdGF0ZShudWxsPT1hP3ZvaWQgMDphLmRhdGEpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UidXBkYXRlX2NvbmZpZyI6dHJ5e3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIudXBkYXRlQ29uZmlnKG51bGw9PWE/dm9pZCAwOmEuZGF0YSkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfY29uZmlnX2RhdGEiOnRyeXt5LnBvc3RNZXNzYWdlKGsuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldENvbmZpZ0RhdGEoKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztkZWZhdWx0Om51bGw9PXl8fHkucG9zdE1lc3NhZ2Uoay5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKG5ldyBjKCJTUEEtQ0xJRU5UX1dPUktFUi1PTk1TRy1JVjAyIiwiVGhlIG1lc3NhZ2UgdHlwZSBpcyBpbnZhbGlkLiIsIlRoZSBtZXNzYWdlIHR5cGUgcHJvdmlkZWQsICIuY29uY2F0KGEudHlwZSwiLCBpcyBpbnZhbGlkLiIpKSkpfWVsc2UgeS5wb3N0TWVzc2FnZShrLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UobmV3IGMoIlNQQS1DTElFTlRfV09SS0VSLU9OTVNHLU5GMDEiLCJUaGUgd2ViIHdvcmtlciBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0LiIsIlRoZSBpbml0aWFsaXplIG1ldGhvZCBuZWVkcyB0byBiZSBjYWxsZWQgYmVmb3JlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uIGNhbiBiZSBjYXJyaWVkIG91dC4iKSkpfSkpfTtjb25zdCBpPSgpPT57bi5wb3N0TWVzc2FnZSh7dHlwZToicmVxdWVzdC1zdGFydCJ9KX0sbz1lPT57bi5wb3N0TWVzc2FnZSh7ZGF0YTpKU09OLnN0cmluZ2lmeShudWxsIT1lP2U6IiIpLHR5cGU6InJlcXVlc3Qtc3VjY2VzcyJ9KX0scz0oKT0+e24ucG9zdE1lc3NhZ2Uoe3R5cGU6InJlcXVlc3QtZmluaXNoIn0pfX0pKCgoZSx0KT0+bmV3IFQoZSx0KSkpO3JldHVybnt9fSgpOwoK",$y=null,eX=!1,function(e){return tX=tX||_y(qy,$y,eX),new Worker(tX,e)});const nX="init",lX="sign-out",oX="http-request",cX="http-request-all",aX="request-custom-grant",rX="revoke-access-token",dX="request-start",sX="request-success",uX="request-finish",ZX="get-oidc-service-endpoints",hX="get-basic-user-info",bX="get-decoded-id-token",mX="get-crypto-helper",pX="enable_http_handler",IX="disable_http_handler",gX="get_auth_url",GX="request_get_token",yX="is_authenticated",XX="get_sign_out_url",VX="refresh_access-token",WX="refresh-access-token-error",CX="set_session_state",RX="start_auto_refresh_token",SX="update_config",vX="get_id_token",fX="check_session_signed_in",YX="check_session_signed_out",KX="get_config_data",NX="set_session_state_from_iframe",JX="token_request_config";var LX;e.Hooks=void 0,(LX=e.Hooks||(e.Hooks={})).SignIn="sign-in",LX.SignOut="sign-out",LX.Initialize="initialize",LX.HttpRequestStart="http-request-start",LX.HttpRequestFinish="http-request-finish",LX.HttpRequestError="http-request-error",LX.HttpRequestSuccess="http-request-success",LX.RevokeAccessToken="revoke-access-token",LX.CustomGrant="custom-grant",LX.SignOutFailed="sign-out-failed";const kX="rpIFrame",UX="promptNoneIFrame",HX="Y2hlY2tTZXNzaW9u",AX="sign-in-silently",TX="initialized-silent-sign-in",BX="promptNoneRequestSent",FX="error",wX="error_description",xX="custom_grant_config",zX="state",PX="Access token is invalid";var QX;!function(e){e.LocalStorage="localStorage",e.SessionStorage="sessionStorage",e.WebWorker="webWorker",e.BrowserMemory="browserMemory"}(QX||(QX={}));class jX{constructor(){}static generateSuccessMessage(e){return{blob:(null==e?void 0:e.data)instanceof Blob?null==e?void 0:e.data:null,data:JSON.stringify(null!=e?e:""),success:!0}}static generateFailureMessage(e){return(null==e?void 0:e.toJSON)&&delete e.toJSON,{error:JSON.stringify(null!=e?e:""),success:!1}}}class MX{constructor(){}static removeAuthorizationCode(){const e=location.href;history.pushState({},document.title,e.replace(/\?code=.*$/,""))}static getPKCE(e){var t;return null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:""}static setPKCE(e,t){sessionStorage.setItem(e,t)}static setSignOutURL(e,t,i){sessionStorage.setItem("".concat(By,"-instance_").concat(i,"-").concat(t),e)}static getSignOutURL(e,t){var i;return null!==(i=sessionStorage.getItem("".concat(By,"-instance_").concat(t,"-").concat(e)))&&void 0!==i?i:""}static removePKCE(e){sessionStorage.removeItem(e)}static canContinueSignIn(e,t){return!(e&&!MX.hasErrorInURL()&&!MX.hasAuthSearchParamsInURL()&&!t)}static isInitializedSilentSignIn(){return MX.isSilentStatePresentInURL()}static wasSignInCalled(){return!(!MX.hasErrorInURL()&&!MX.hasAuthSearchParamsInURL()||this.isSilentStatePresentInURL())}static wasSilentSignInCalled(){const e=sessionStorage.getItem(TX),t=e?JSON.parse(e):null;return Boolean(t)}static isSignOutSuccessful(){return Ly(this,void 0,void 0,(function*(){if(Oy.isSignOutSuccessful(window.location.href)){const e=window.location.href.split("?")[0];return history.pushState({},document.title,e),yield Oy.clearUserSessionData(),!0}return!1}))}static didSignOutFail(){if(Oy.didSignOutFail(window.location.href)){const e=new URL(window.location.href),t=e.searchParams.get(FX),i=e.searchParams.get(wX),n=window.location.href.split("?")[0];return history.pushState({},document.title,n),{description:null!=i?i:"",error:null!=t?t:""}}return!1}static isSilentStatePresentInURL(){var e;const t=new URL(window.location.href).searchParams.get("state");return null!==(e=null==t?void 0:t.includes(AX))&&void 0!==e&&e}static hasAuthSearchParamsInURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;return/[?&]code=[^&]+/.test(e)}static hasErrorInURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const t=new URL(e);return!!t.searchParams.get(FX)&&t.searchParams.get(zX)!==Fy}static canSendPromptNoneRequest(){const e=sessionStorage.getItem(BX);return!(e?JSON.parse(e):null)}static setPromptNoneRequestSent(e){sessionStorage.setItem(BX,JSON.stringify(e))}static waitTillPageRedirect(e){return Ly(this,void 0,void 0,(function*(){const t=null!=e?e:3e3;yield new Promise((e=>setTimeout(e,1e3*t)))}))}}MX.until=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const i=n=>e()?n():setTimeout((()=>i(n)),t);return new Promise(i)};class EX{constructor(e,t){this._authenticationClient=e,this._dataLayer=this._authenticationClient.getDataLayer(),this._spaHelper=t,this._instanceID=this._authenticationClient.getInstanceID(),this._isTokenRefreshing=!1}enableHttpHandler(e){(null==e?void 0:e.enableHandler)&&e.enableHandler()}disableHttpHandler(e){(null==e?void 0:e.disableHandler)&&e.disableHandler()}initializeSessionManger(e,t,i,n,l){var o,c,a;l.initialize(e.clientID,null!==(o=t.checkSessionIframe)&&void 0!==o?o:"",i,null!==(c=e.checkSessionInterval)&&void 0!==c?c:3,null!==(a=e.sessionRefreshInterval)&&void 0!==a?a:300,e.signInRedirectURL,n)}requestCustomGrant(e,t){var i,n,l;return Ly(this,void 0,void 0,(function*(){let o=!0,c=!1;if(null==e?void 0:e.tokenEndpoint){o=!1;for(const t of[...null!==(n=null===(i=yield this._dataLayer.getConfigData())||void 0===i?void 0:i.resourceServerURLs)&&void 0!==n?n:[],e.baseUrl])if(t&&(null===(l=e.tokenEndpoint)||void 0===l?void 0:l.startsWith(t))){c=!0;break}}return e.shouldReplayAfterRefresh&&this._dataLayer.setTemporaryDataParameter(xX,JSON.stringify(e)),o||c?this._authenticationClient.requestCustomGrant(e).then((i=>Ly(this,void 0,void 0,(function*(){return t&&"function"==typeof t&&t(e),e.returnsSession?(this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()):i})))).catch((e=>Promise.reject(e))):Promise.reject(new zy("SPA-MAIN_THREAD_CLIENT-RCG-IV01","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified token endpoint in this request cannot be found among the `resourceServerURLs`"))}))}getCustomGrantConfigData(){return Ly(this,void 0,void 0,(function*(){const e=yield this._dataLayer.getTemporaryDataParameter(xX);return e?JSON.parse(e):null}))}refreshAccessToken(e){return Ly(this,void 0,void 0,(function*(){try{yield this._authenticationClient.refreshAccessToken();const t=yield this.getCustomGrantConfigData();return t&&(yield this.requestCustomGrant(t,e)),this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()}catch(e){const t={type:WX};return window.postMessage(t),Promise.reject(e)}}))}retryFailedRequests(e){return Ly(this,void 0,void 0,(function*(){const t=e.httpClient,i=e.requestConfig,n=e.isHttpHandlerEnabled,l=e.httpErrorCallback,o=e.httpFinishCallback;yield MX.until((()=>!this._isTokenRefreshing));try{const e=yield t.request(i);return Promise.resolve(e)}catch(e){return n&&("function"==typeof l&&(yield l(e)),"function"==typeof o&&o()),Promise.reject(e)}}))}httpRequest(e,t,i,n,l,o){var c,a;return Ly(this,void 0,void 0,(function*(){let r=!1;const d=yield this._dataLayer.getConfigData();for(const e of[...null!==(c=yield null==d?void 0:d.resourceServerURLs)&&void 0!==c?c:[],d.baseUrl])if(e&&(null===(a=null==t?void 0:t.url)||void 0===a?void 0:a.startsWith(e))){r=!0;break}return r?e.request(t).then((e=>Promise.resolve(e))).catch((c=>Ly(this,void 0,void 0,(function*(){var a,r,d;if(401===(null===(a=null==c?void 0:c.response)||void 0===a?void 0:a.status)||!(null==c?void 0:c.response)){if(this._isTokenRefreshing)return this.retryFailedRequests({enableRetrievingSignOutURLFromSession:o,httpClient:e,httpErrorCallback:n,httpFinishCallback:l,isHttpHandlerEnabled:i,requestConfig:t});let a;this._isTokenRefreshing=!0;try{a=yield this.refreshAccessToken(o),this._isTokenRefreshing=!1}catch(e){throw this._isTokenRefreshing=!1,i&&("function"==typeof n&&(yield n(Object.assign(Object.assign({},c),{code:PX}))),"function"==typeof l&&l()),new zy("SPA-AUTH_HELPER-HR-SE01",null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"Refresh token request failed.",null!==(d=null==e?void 0:e.message)&&void 0!==d?d:"An error occurred while trying to refresh the access token following a 401 response from the server.")}if(a)try{const i=yield e.request(t);return Promise.resolve(i)}catch(e){return i&&("function"==typeof n&&(yield n(e)),"function"==typeof l&&l()),Promise.reject(e)}}return i&&("function"==typeof n&&(yield n(c)),"function"==typeof l&&l()),Promise.reject(c)})))):Promise.reject(new zy("SPA-AUTH_HELPER-HR-IV02","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified endpoint in this request cannot be found among the `resourceServerURLs`"))}))}httpRequestAll(e,t,i,n,l){var o,c,a;return Ly(this,void 0,void 0,(function*(){let r=!0;const d=yield this._dataLayer.getConfigData();for(const t of e){let e=!1;for(const i of[...null!==(c=null===(o=yield d)||void 0===o?void 0:o.resourceServerURLs)&&void 0!==c?c:[],d.baseUrl])if(i&&(null===(a=t.url)||void 0===a?void 0:a.startsWith(i))){e=!0;break}if(!e){r=!1;break}}const s=[];if(r)return e.forEach((e=>{s.push(t.request(e))})),(null==t?void 0:t.all)&&t.all(s).then((e=>Promise.resolve(e))).catch((e=>Ly(this,void 0,void 0,(function*(){var o,c,a;if(401===(null===(o=null==e?void 0:e.response)||void 0===o?void 0:o.status)||!(null==e?void 0:e.response)){let o;try{o=yield this._authenticationClient.refreshAccessToken()}catch(t){throw i&&("function"==typeof n&&(yield n(Object.assign(Object.assign({},e),{code:PX}))),"function"==typeof l&&l()),new zy("SPA-AUTH_HELPER-HRA-SE01",null!==(c=null==t?void 0:t.name)&&void 0!==c?c:"Refresh token request failed.",null!==(a=null==t?void 0:t.message)&&void 0!==a?a:"An error occurred while trying to refresh the access token following a 401 response from the server.")}if(o)return t.all&&t.all(s).then((e=>Promise.resolve(e))).catch((e=>Ly(this,void 0,void 0,(function*(){return i&&("function"==typeof n&&(yield n(e)),"function"==typeof l&&l()),Promise.reject(e)}))))}return i&&("function"==typeof n&&(yield n(e)),"function"==typeof l&&l()),Promise.reject(e)}))));throw new zy("SPA-AUTH_HELPER-HRA-IV02","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified endpoint in this request cannot be found among the `resourceServerURLs`")}))}requestAccessToken(e,t,i,n,l,o){return Ly(this,void 0,void 0,(function*(){const c=yield this._dataLayer.getConfigData();if(c.storage===QX.BrowserMemory&&c.enablePKCE&&t){const e=MX.getPKCE(Py.extractPKCEKeyFromStateParam(t));yield this._authenticationClient.setPKCECode(Py.extractPKCEKeyFromStateParam(t),e)}else c.storage===QX.WebWorker&&n&&(yield this._authenticationClient.setPKCECode(n,null!=l?l:""));return e?this._authenticationClient.requestAccessToken(e,null!=t?t:"",null!=l?l:"",void 0,o).then((()=>Ly(this,void 0,void 0,(function*(){return c.storage!==QX.WebWorker?(MX.setSignOutURL(yield this._authenticationClient.getSignOutURL(),c.clientID,this._instanceID),this._spaHelper&&(this._spaHelper.clearRefreshTokenTimeout(),this._spaHelper.refreshAccessTokenAutomatically(this)),i&&"function"==typeof i&&c.enableOIDCSessionManagement&&i()):this._spaHelper&&this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()})))).catch((e=>Promise.reject(e))):Promise.reject(new zy("SPA-AUTH_HELPER-RAT1-NF01","No authorization code.","No authorization code was found."))}))}trySignInSilently(e,t,i,n,l){var o;return Ly(this,void 0,void 0,(function*(){if(MX.isInitializedSilentSignIn())return yield i.receivePromptNoneResponse(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""});const c=document.getElementById(kX),a=null===(o=null==c?void 0:c.contentDocument)||void 0===o?void 0:o.getElementById(UX);try{const t=yield e(n);a.src=t}catch(e){return Promise.reject(e)}return new Promise(((e,i)=>{const n=setTimeout((()=>{e(!1)}),1e4),o=c=>Ly(this,void 0,void 0,(function*(){var a,r,d,s;const u=c.data;(null==u?void 0:u.type)==YX&&(window.removeEventListener("message",o),clearTimeout(n),e(!1)),(null==u?void 0:u.type)==fX&&(null===(a=null==u?void 0:u.data)||void 0===a?void 0:a.code)&&t(null===(r=null==u?void 0:u.data)||void 0===r?void 0:r.code,null===(d=null==u?void 0:u.data)||void 0===d?void 0:d.sessionState,null===(s=null==u?void 0:u.data)||void 0===s?void 0:s.state,l).then((t=>{window.removeEventListener("message",o),e(t)})).catch((e=>{window.removeEventListener("message",o),i(e)})).finally((()=>{clearTimeout(n)}))}));window.addEventListener("message",o)}))}))}handleSignIn(e,t,i){return Ly(this,void 0,void 0,(function*(){const n=yield this._dataLayer.getConfigData();if(yield e())return Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""});if(n.storage!==QX.WebWorker&&(yield this._authenticationClient.isAuthenticated()))return this._spaHelper.clearRefreshTokenTimeout(),this._spaHelper.refreshAccessTokenAutomatically(this),n.enableOIDCSessionManagement&&t(),Promise.resolve(yield this._authenticationClient.getBasicUserInfo());const l=new URL(window.location.href).searchParams.get(FX),o=new URL(window.location.href).searchParams.get(wX);if(l){const e=new URL(window.location.href);throw e.searchParams.delete(FX),e.searchParams.delete(wX),history.pushState(null,document.title,e.toString()),new zy("SPA-AUTH_HELPER-SI-SE01",l,null!=o?o:"")}if(n.storage===QX.WebWorker&&i){const e=yield i();if(e)return e}}))}attachTokenToRequestConfig(e){return Ly(this,void 0,void 0,(function*(){const t=Object.assign({attachToken:!0},e);t.attachToken&&(t.shouldAttachIDPAccessToken?e.headers=Object.assign(Object.assign({},e.headers),{Authorization:"Bearer ".concat(yield this.getIDPAccessToken())}):e.headers=Object.assign(Object.assign({},e.headers),{Authorization:"Bearer ".concat(yield this.getAccessToken())}))}))}getBasicUserInfo(){return Ly(this,void 0,void 0,(function*(){return this._authenticationClient.getBasicUserInfo()}))}getDecodedIDToken(){return Ly(this,void 0,void 0,(function*(){return this._authenticationClient.getDecodedIDToken()}))}getDecodedIDPIDToken(){return Ly(this,void 0,void 0,(function*(){return this._authenticationClient.getDecodedIDToken()}))}getCryptoHelper(){return Ly(this,void 0,void 0,(function*(){return this._authenticationClient.getCryptoHelper()}))}getIDToken(){return Ly(this,void 0,void 0,(function*(){return this._authenticationClient.getIDToken()}))}getOIDCServiceEndpoints(){return Ly(this,void 0,void 0,(function*(){return this._authenticationClient.getOIDCServiceEndpoints()}))}getAccessToken(){return Ly(this,void 0,void 0,(function*(){return this._authenticationClient.getAccessToken()}))}getIDPAccessToken(){var e;return Ly(this,void 0,void 0,(function*(){return null===(e=yield this._dataLayer.getSessionData())||void 0===e?void 0:e.access_token}))}getDataLayer(){return this._dataLayer}isAuthenticated(){return Ly(this,void 0,void 0,(function*(){return this._authenticationClient.isAuthenticated()}))}}class DX{constructor(e){this._authenticationClient=e,this._dataLayer=this._authenticationClient.getDataLayer()}refreshAccessTokenAutomatically(e){var t,i;return Ly(this,void 0,void 0,(function*(){if(!(null!==(i=null===(t=yield this._dataLayer.getConfigData())||void 0===t?void 0:t.periodicTokenRefresh)&&void 0!==i&&i))return;const n=yield this._dataLayer.getSessionData();if(n.refresh_token){const t=parseInt(n.expires_in),i=setTimeout((()=>Ly(this,void 0,void 0,(function*(){yield e.refreshAccessToken()}))),1e3*(t<=10?t:t-10));yield this._dataLayer.setTemporaryDataParameter(Uy,JSON.stringify(i))}}))}getRefreshTimeoutTimer(){return Ly(this,void 0,void 0,(function*(){return(yield this._dataLayer.getTemporaryDataParameter(Uy))?JSON.parse(yield this._dataLayer.getTemporaryDataParameter(Uy)):-1}))}clearRefreshTokenTimeout(e){return Ly(this,void 0,void 0,(function*(){if(e)return void clearTimeout(e);const t=yield this.getRefreshTimeoutTimer();-1!==t&&clearTimeout(t)}))}}const OX=(()=>{let e,t,i,n,l,o,c,a,r,d,s;const u=(c,a,r,d,u,h,b)=>{e=c,t=a,i=r,n=d,l=h,o=u,s=b,n>-1&&Z(),o>-1&&(u=setInterval((()=>{m()}),1e3*o))},Z=()=>Ly(void 0,void 0,void 0,(function*(){var o;if(!t||!e||!l)return;const c="opIFrame";const r=document.getElementById(kX);(null===(o=null==r?void 0:r.contentDocument)||void 0===o?void 0:o.getElementById(c)).src=t+"?client_id="+e+"&redirect_uri="+l,a=setInterval((function(){var n;return Ly(this,void 0,void 0,(function*(){const l=yield i();if(Boolean(e)&&Boolean(l)){const i="".concat(e," ").concat(l),o=document.getElementById(kX),a=(null===(n=null==o?void 0:o.contentDocument)||void 0===n?void 0:n.getElementById(c)).contentWindow;null==a||a.postMessage(i,t)}}))}),1e3*n),b()})),h=()=>{clearInterval(a),clearInterval(undefined)},b=()=>{null===window||void 0===window||window.addEventListener("message",(function(e){var i;return Ly(this,void 0,void 0,(function*(){const n=t;!n||(null==n?void 0:n.indexOf(e.origin))<0||(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.type)===NX||"unchanged"===e.data||("error"===e.data?window.location.href=yield c():"changed"===e.data&&m())}))}),!1)},m=()=>Ly(void 0,void 0,void 0,(function*(){var e;const t=document.getElementById(kX),i=null===(e=null==t?void 0:t.contentDocument)||void 0===e?void 0:e.getElementById(UX);if(MX.canSendPromptNoneRequest()){MX.setPromptNoneRequestSent(!0);const e=t=>{var i,n,l;(null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.type)===NX&&(d(null!==(l=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.data)&&void 0!==l?l:""),null===window||void 0===window||window.removeEventListener("message",e))};r!==QX.BrowserMemory&&r!==QX.WebWorker||null===window||void 0===window||window.addEventListener("message",e);const t=yield s({prompt:"none",response_mode:"query",state:HX});i.src=t}})),p=e=>Ly(void 0,void 0,void 0,(function*(){var t,i;const n=new URL(window.location.href).searchParams.get(zX),l=new URL(window.location.href).searchParams.get(Ty),o=window.parent.parent;if(null!==n&&(n.includes(HX)||n.includes(AX))){const a=new URL(window.location.href).searchParams.get("code");if(null!==a&&0!==a.length){if(n.includes(AX)){const e={data:{code:a,sessionState:null!=l?l:"",state:n},type:fX};return sessionStorage.setItem(TX,"false"),o.postMessage(e,o.origin),MX.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield MX.waitTillPageRedirect(),!0}const c=new URL(window.location.href).searchParams.get("session_state");if(r===QX.LocalStorage||r===QX.SessionStorage)e&&(yield e(c));else{const e={data:null!=c?c:"",type:NX};null===(i=null===(t=null===window||void 0===window?void 0:window.parent)||void 0===t?void 0:t.parent)||void 0===i||i.postMessage(e)}return MX.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield MX.waitTillPageRedirect(),!0}{if(n.includes(AX)){const e={type:YX};return window.parent.parent.postMessage(e,o.origin),MX.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield MX.waitTillPageRedirect(),!0}MX.setPromptNoneRequestSent(!1);const e=yield c();return yield Oy.clearUserSessionData(),o.location.href=e,window.location.href="about:blank",yield MX.waitTillPageRedirect(),!0}}return!1}));return(e,t,i)=>Ly(void 0,void 0,void 0,(function*(){var n;let l=document.createElement("iframe");l.setAttribute("id",kX),l.style.display="none";let o=!1;l.onload=()=>{var e,t,i,n;l=document.getElementById(kX);const c=null==l?void 0:l.contentDocument,a=null==c?void 0:c.createElement("iframe");a&&(a.setAttribute("id","opIFrame"),a.style.display="none");const r=null==c?void 0:c.createElement("iframe");r&&(r.setAttribute("id",UX),r.style.display="none"),a&&(null===(t=null===(e=null==l?void 0:l.contentDocument)||void 0===e?void 0:e.body)||void 0===t||t.appendChild(a)),r&&(null===(n=null===(i=null==l?void 0:l.contentDocument)||void 0===i?void 0:i.body)||void 0===n||n.appendChild(r)),o=!0},null===(n=null===document||void 0===document?void 0:document.body)||void 0===n||n.appendChild(l),c=e,r=t,d=i;for(;!1===o;)yield new Promise((e=>setTimeout(e,1)));return{initialize:u,receivePromptNoneResponse:p,reset:h}}))})();var _X,qX={exports:{}},$X=function(e,t){return function(){return e.apply(t,arguments)}},eV=$X,tV=Object.prototype.toString,iV=(_X=Object.create(null),function(e){var t=tV.call(e);return _X[t]||(_X[t]=t.slice(8,-1).toLowerCase())});function nV(e){return e=e.toLowerCase(),function(t){return iV(t)===e}}function lV(e){return Array.isArray(e)}function oV(e){return void 0===e}var cV=nV("ArrayBuffer");function aV(e){return"number"==typeof e}function rV(e){return null!==e&&"object"==typeof e}function dV(e){if("object"!==iV(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var sV=nV("Date"),uV=nV("File"),ZV=nV("Blob"),hV=nV("FileList");function bV(e){return"[object Function]"===tV.call(e)}var mV=nV("URLSearchParams");function pV(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),lV(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.call(null,e[l],l,e)}var IV=function(e){return function(t){return e&&t instanceof e}}("undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array));var gV,GV=nV("HTMLFormElement"),yV=(gV=Object.prototype.hasOwnProperty,function(e,t){return gV.call(e,t)}),XV={isArray:lV,isArrayBuffer:cV,isBuffer:function(e){return null!==e&&!oV(e)&&null!==e.constructor&&!oV(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||tV.call(e)===t||bV(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&cV(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:aV,isObject:rV,isPlainObject:dV,isEmptyObject:function(e){return e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype},isUndefined:oV,isDate:sV,isFile:uV,isBlob:ZV,isFunction:bV,isStream:function(e){return rV(e)&&bV(e.pipe)},isURLSearchParams:mV,isStandardBrowserEnv:function(){var e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:pV,merge:function e(){var t={};function i(i,n){dV(t[n])&&dV(i)?t[n]=e(t[n],i):dV(i)?t[n]=e({},i):lV(i)?t[n]=i.slice():t[n]=i}for(var n=0,l=arguments.length;n<l;n++)pV(arguments[n],i);return t},extend:function(e,t,i){return pV(t,(function(t,n){e[n]=i&&"function"==typeof t?eV(t,i):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,i,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,i&&Object.assign(e.prototype,i)},toFlatObject:function(e,t,i,n){var l,o,c,a={};if(t=t||{},null==e)return t;do{for(o=(l=Object.getOwnPropertyNames(e)).length;o-- >0;)c=l[o],n&&!n(c,e,t)||a[c]||(t[c]=e[c],a[c]=!0);e=!1!==i&&Object.getPrototypeOf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:iV,kindOfTest:nV,endsWith:function(e,t,i){e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;var n=e.indexOf(t,i);return-1!==n&&n===i},toArray:function(e){if(!e)return null;if(lV(e))return e;var t=e.length;if(!aV(t))return null;for(var i=new Array(t);t-- >0;)i[t]=e[t];return i},isTypedArray:IV,isFileList:hV,forEachEntry:function(e,t){for(var i,n=(e&&e[Symbol.iterator]).call(e);(i=n.next())&&!i.done;){var l=i.value;t.call(e,l[0],l[1])}},matchAll:function(e,t){for(var i,n=[];null!==(i=e.exec(t));)n.push(i);return n},isHTMLForm:GV,hasOwnProperty:yV},VV="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},WV=[],CV=[],RV="undefined"!=typeof Uint8Array?Uint8Array:Array,SV=!1;function vV(){SV=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=e.length;t<i;++t)WV[t]=e[t],CV[e.charCodeAt(t)]=t;CV["-".charCodeAt(0)]=62,CV["_".charCodeAt(0)]=63}function fV(e,t,i){for(var n,l,o=[],c=t;c<i;c+=3)n=(e[c]<<16)+(e[c+1]<<8)+e[c+2],o.push(WV[(l=n)>>18&63]+WV[l>>12&63]+WV[l>>6&63]+WV[63&l]);return o.join("")}function YV(e){var t;SV||vV();for(var i=e.length,n=i%3,l="",o=[],c=16383,a=0,r=i-n;a<r;a+=c)o.push(fV(e,a,a+c>r?r:a+c));return 1===n?(t=e[i-1],l+=WV[t>>2],l+=WV[t<<4&63],l+="=="):2===n&&(t=(e[i-2]<<8)+e[i-1],l+=WV[t>>10],l+=WV[t>>4&63],l+=WV[t<<2&63],l+="="),o.push(l),o.join("")}function KV(e,t,i,n,l){var o,c,a=8*l-n-1,r=(1<<a)-1,d=r>>1,s=-7,u=i?l-1:0,Z=i?-1:1,h=e[t+u];for(u+=Z,o=h&(1<<-s)-1,h>>=-s,s+=a;s>0;o=256*o+e[t+u],u+=Z,s-=8);for(c=o&(1<<-s)-1,o>>=-s,s+=n;s>0;c=256*c+e[t+u],u+=Z,s-=8);if(0===o)o=1-d;else{if(o===r)return c?NaN:1/0*(h?-1:1);c+=Math.pow(2,n),o-=d}return(h?-1:1)*c*Math.pow(2,o-n)}function NV(e,t,i,n,l,o){var c,a,r,d=8*o-l-1,s=(1<<d)-1,u=s>>1,Z=23===l?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,b=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,c=s):(c=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-c))<1&&(c--,r*=2),(t+=c+u>=1?Z/r:Z*Math.pow(2,1-u))*r>=2&&(c++,r/=2),c+u>=s?(a=0,c=s):c+u>=1?(a=(t*r-1)*Math.pow(2,l),c+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,l),c=0));l>=8;e[i+h]=255&a,h+=b,a/=256,l-=8);for(c=c<<l|a,d+=l;d>0;e[i+h]=255&c,h+=b,c/=256,d-=8);e[i+h-b]|=128*m}var JV={}.toString,LV=Array.isArray||function(e){return"[object Array]"==JV.call(e)};AV.TYPED_ARRAY_SUPPORT=void 0===VV.TYPED_ARRAY_SUPPORT||VV.TYPED_ARRAY_SUPPORT;var kV=UV();function UV(){return AV.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function HV(e,t){if(UV()<t)throw new RangeError("Invalid typed array length");return AV.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=AV.prototype:(null===e&&(e=new AV(t)),e.length=t),e}function AV(e,t,i){if(!(AV.TYPED_ARRAY_SUPPORT||this instanceof AV))return new AV(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return FV(this,e)}return TV(this,e,t,i)}function TV(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n);AV.TYPED_ARRAY_SUPPORT?(e=t).__proto__=AV.prototype:e=wV(e,t);return e}(e,t,i,n):"string"==typeof t?function(e,t,i){"string"==typeof i&&""!==i||(i="utf8");if(!AV.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|PV(t,i),l=(e=HV(e,n)).write(t,i);l!==n&&(e=e.slice(0,l));return e}(e,t,i):function(e,t){if(zV(t)){var i=0|xV(t.length);return 0===(e=HV(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?HV(e,0):wV(e,t);if("Buffer"===t.type&&LV(t.data))return wV(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function BV(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function FV(e,t){if(BV(t),e=HV(e,t<0?0:0|xV(t)),!AV.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function wV(e,t){var i=t.length<0?0:0|xV(t.length);e=HV(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function xV(e){if(e>=UV())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+UV().toString(16)+" bytes");return 0|e}function zV(e){return!(null==e||!e._isBuffer)}function PV(e,t){if(zV(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return IW(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return gW(e).length;default:if(n)return IW(e).length;t=(""+t).toLowerCase(),n=!0}}function QV(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return cW(this,t,i);case"utf8":case"utf-8":return iW(this,t,i);case"ascii":return lW(this,t,i);case"latin1":case"binary":return oW(this,t,i);case"base64":return tW(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return aW(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function jV(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function MV(e,t,i,n,l){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=l?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(l)return-1;i=e.length-1}else if(i<0){if(!l)return-1;i=0}if("string"==typeof t&&(t=AV.from(t,n)),zV(t))return 0===t.length?-1:EV(e,t,i,n,l);if("number"==typeof t)return t&=255,AV.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?l?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):EV(e,[t],i,n,l);throw new TypeError("val must be string, number or Buffer")}function EV(e,t,i,n,l){var o,c=1,a=e.length,r=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;c=2,a/=2,r/=2,i/=2}function d(e,t){return 1===c?e[t]:e.readUInt16BE(t*c)}if(l){var s=-1;for(o=i;o<a;o++)if(d(e,o)===d(t,-1===s?0:o-s)){if(-1===s&&(s=o),o-s+1===r)return s*c}else-1!==s&&(o-=o-s),s=-1}else for(i+r>a&&(i=a-r),o=i;o>=0;o--){for(var u=!0,Z=0;Z<r;Z++)if(d(e,o+Z)!==d(t,Z)){u=!1;break}if(u)return o}return-1}function DV(e,t,i,n){i=Number(i)||0;var l=e.length-i;n?(n=Number(n))>l&&(n=l):n=l;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var c=0;c<n;++c){var a=parseInt(t.substr(2*c,2),16);if(isNaN(a))return c;e[i+c]=a}return c}function OV(e,t,i,n){return GW(IW(t,e.length-i),e,i,n)}function _V(e,t,i,n){return GW(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function qV(e,t,i,n){return _V(e,t,i,n)}function $V(e,t,i,n){return GW(gW(t),e,i,n)}function eW(e,t,i,n){return GW(function(e,t){for(var i,n,l,o=[],c=0;c<e.length&&!((t-=2)<0);++c)n=(i=e.charCodeAt(c))>>8,l=i%256,o.push(l),o.push(n);return o}(t,e.length-i),e,i,n)}function tW(e,t,i){return 0===t&&i===e.length?YV(e):YV(e.slice(t,i))}function iW(e,t,i){i=Math.min(e.length,i);for(var n=[],l=t;l<i;){var o,c,a,r,d=e[l],s=null,u=d>239?4:d>223?3:d>191?2:1;if(l+u<=i)switch(u){case 1:d<128&&(s=d);break;case 2:128==(192&(o=e[l+1]))&&(r=(31&d)<<6|63&o)>127&&(s=r);break;case 3:o=e[l+1],c=e[l+2],128==(192&o)&&128==(192&c)&&(r=(15&d)<<12|(63&o)<<6|63&c)>2047&&(r<55296||r>57343)&&(s=r);break;case 4:o=e[l+1],c=e[l+2],a=e[l+3],128==(192&o)&&128==(192&c)&&128==(192&a)&&(r=(15&d)<<18|(63&o)<<12|(63&c)<<6|63&a)>65535&&r<1114112&&(s=r)}null===s?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),l+=u}return function(e){var t=e.length;if(t<=nW)return String.fromCharCode.apply(String,e);var i="",n=0;for(;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=nW));return i}(n)}AV.poolSize=8192,AV._augment=function(e){return e.__proto__=AV.prototype,e},AV.from=function(e,t,i){return TV(null,e,t,i)},AV.TYPED_ARRAY_SUPPORT&&(AV.prototype.__proto__=Uint8Array.prototype,AV.__proto__=Uint8Array),AV.alloc=function(e,t,i){return function(e,t,i,n){return BV(t),t<=0?HV(e,t):void 0!==i?"string"==typeof n?HV(e,t).fill(i,n):HV(e,t).fill(i):HV(e,t)}(null,e,t,i)},AV.allocUnsafe=function(e){return FV(null,e)},AV.allocUnsafeSlow=function(e){return FV(null,e)},AV.isBuffer=yW,AV.compare=function(e,t){if(!zV(e)||!zV(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,l=0,o=Math.min(i,n);l<o;++l)if(e[l]!==t[l]){i=e[l],n=t[l];break}return i<n?-1:n<i?1:0},AV.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},AV.concat=function(e,t){if(!LV(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return AV.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=AV.allocUnsafe(t),l=0;for(i=0;i<e.length;++i){var o=e[i];if(!zV(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,l),l+=o.length}return n},AV.byteLength=PV,AV.prototype._isBuffer=!0,AV.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)jV(this,t,t+1);return this},AV.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)jV(this,t,t+3),jV(this,t+1,t+2);return this},AV.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)jV(this,t,t+7),jV(this,t+1,t+6),jV(this,t+2,t+5),jV(this,t+3,t+4);return this},AV.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?iW(this,0,e):QV.apply(this,arguments)},AV.prototype.equals=function(e){if(!zV(e))throw new TypeError("Argument must be a Buffer");return this===e||0===AV.compare(this,e)},AV.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},AV.prototype.compare=function(e,t,i,n,l){if(!zV(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===l&&(l=this.length),t<0||i>e.length||n<0||l>this.length)throw new RangeError("out of range index");if(n>=l&&t>=i)return 0;if(n>=l)return-1;if(t>=i)return 1;if(this===e)return 0;for(var o=(l>>>=0)-(n>>>=0),c=(i>>>=0)-(t>>>=0),a=Math.min(o,c),r=this.slice(n,l),d=e.slice(t,i),s=0;s<a;++s)if(r[s]!==d[s]){o=r[s],c=d[s];break}return o<c?-1:c<o?1:0},AV.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},AV.prototype.indexOf=function(e,t,i){return MV(this,e,t,i,!0)},AV.prototype.lastIndexOf=function(e,t,i){return MV(this,e,t,i,!1)},AV.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var l=this.length-t;if((void 0===i||i>l)&&(i=l),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return DV(this,e,t,i);case"utf8":case"utf-8":return OV(this,e,t,i);case"ascii":return _V(this,e,t,i);case"latin1":case"binary":return qV(this,e,t,i);case"base64":return $V(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return eW(this,e,t,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},AV.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var nW=4096;function lW(e,t,i){var n="";i=Math.min(e.length,i);for(var l=t;l<i;++l)n+=String.fromCharCode(127&e[l]);return n}function oW(e,t,i){var n="";i=Math.min(e.length,i);for(var l=t;l<i;++l)n+=String.fromCharCode(e[l]);return n}function cW(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var l="",o=t;o<i;++o)l+=pW(e[o]);return l}function aW(e,t,i){for(var n=e.slice(t,i),l="",o=0;o<n.length;o+=2)l+=String.fromCharCode(n[o]+256*n[o+1]);return l}function rW(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function dW(e,t,i,n,l,o){if(!zV(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>l||t<o)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function sW(e,t,i,n){t<0&&(t=65535+t+1);for(var l=0,o=Math.min(e.length-i,2);l<o;++l)e[i+l]=(t&255<<8*(n?l:1-l))>>>8*(n?l:1-l)}function uW(e,t,i,n){t<0&&(t=4294967295+t+1);for(var l=0,o=Math.min(e.length-i,4);l<o;++l)e[i+l]=t>>>8*(n?l:3-l)&255}function ZW(e,t,i,n,l,o){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function hW(e,t,i,n,l){return l||ZW(e,0,i,4),NV(e,t,i,n,23,4),i+4}function bW(e,t,i,n,l){return l||ZW(e,0,i,8),NV(e,t,i,n,52,8),i+8}AV.prototype.slice=function(e,t){var i,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),AV.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=AV.prototype;else{var l=t-e;i=new AV(l,void 0);for(var o=0;o<l;++o)i[o]=this[o+e]}return i},AV.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||rW(e,t,this.length);for(var n=this[e],l=1,o=0;++o<t&&(l*=256);)n+=this[e+o]*l;return n},AV.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||rW(e,t,this.length);for(var n=this[e+--t],l=1;t>0&&(l*=256);)n+=this[e+--t]*l;return n},AV.prototype.readUInt8=function(e,t){return t||rW(e,1,this.length),this[e]},AV.prototype.readUInt16LE=function(e,t){return t||rW(e,2,this.length),this[e]|this[e+1]<<8},AV.prototype.readUInt16BE=function(e,t){return t||rW(e,2,this.length),this[e]<<8|this[e+1]},AV.prototype.readUInt32LE=function(e,t){return t||rW(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},AV.prototype.readUInt32BE=function(e,t){return t||rW(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},AV.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||rW(e,t,this.length);for(var n=this[e],l=1,o=0;++o<t&&(l*=256);)n+=this[e+o]*l;return n>=(l*=128)&&(n-=Math.pow(2,8*t)),n},AV.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||rW(e,t,this.length);for(var n=t,l=1,o=this[e+--n];n>0&&(l*=256);)o+=this[e+--n]*l;return o>=(l*=128)&&(o-=Math.pow(2,8*t)),o},AV.prototype.readInt8=function(e,t){return t||rW(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},AV.prototype.readInt16LE=function(e,t){t||rW(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},AV.prototype.readInt16BE=function(e,t){t||rW(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},AV.prototype.readInt32LE=function(e,t){return t||rW(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},AV.prototype.readInt32BE=function(e,t){return t||rW(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},AV.prototype.readFloatLE=function(e,t){return t||rW(e,4,this.length),KV(this,e,!0,23,4)},AV.prototype.readFloatBE=function(e,t){return t||rW(e,4,this.length),KV(this,e,!1,23,4)},AV.prototype.readDoubleLE=function(e,t){return t||rW(e,8,this.length),KV(this,e,!0,52,8)},AV.prototype.readDoubleBE=function(e,t){return t||rW(e,8,this.length),KV(this,e,!1,52,8)},AV.prototype.writeUIntLE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||dW(this,e,t,i,Math.pow(2,8*i)-1,0);var l=1,o=0;for(this[t]=255&e;++o<i&&(l*=256);)this[t+o]=e/l&255;return t+i},AV.prototype.writeUIntBE=function(e,t,i,n){(e=+e,t|=0,i|=0,n)||dW(this,e,t,i,Math.pow(2,8*i)-1,0);var l=i-1,o=1;for(this[t+l]=255&e;--l>=0&&(o*=256);)this[t+l]=e/o&255;return t+i},AV.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,1,255,0),AV.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},AV.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,2,65535,0),AV.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):sW(this,e,t,!0),t+2},AV.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,2,65535,0),AV.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):sW(this,e,t,!1),t+2},AV.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,4,4294967295,0),AV.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):uW(this,e,t,!0),t+4},AV.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,4,4294967295,0),AV.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):uW(this,e,t,!1),t+4},AV.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var l=Math.pow(2,8*i-1);dW(this,e,t,i,l-1,-l)}var o=0,c=1,a=0;for(this[t]=255&e;++o<i&&(c*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/c>>0)-a&255;return t+i},AV.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var l=Math.pow(2,8*i-1);dW(this,e,t,i,l-1,-l)}var o=i-1,c=1,a=0;for(this[t+o]=255&e;--o>=0&&(c*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/c>>0)-a&255;return t+i},AV.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,1,127,-128),AV.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},AV.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,2,32767,-32768),AV.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):sW(this,e,t,!0),t+2},AV.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,2,32767,-32768),AV.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):sW(this,e,t,!1),t+2},AV.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,4,2147483647,-2147483648),AV.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):uW(this,e,t,!0),t+4},AV.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||dW(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),AV.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):uW(this,e,t,!1),t+4},AV.prototype.writeFloatLE=function(e,t,i){return hW(this,e,t,!0,i)},AV.prototype.writeFloatBE=function(e,t,i){return hW(this,e,t,!1,i)},AV.prototype.writeDoubleLE=function(e,t,i){return bW(this,e,t,!0,i)},AV.prototype.writeDoubleBE=function(e,t,i){return bW(this,e,t,!1,i)},AV.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var l,o=n-i;if(this===e&&i<t&&t<n)for(l=o-1;l>=0;--l)e[l+t]=this[l+i];else if(o<1e3||!AV.TYPED_ARRAY_SUPPORT)for(l=0;l<o;++l)e[l+t]=this[l+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},AV.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var l=e.charCodeAt(0);l<256&&(e=l)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!AV.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var o;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(o=t;o<i;++o)this[o]=e;else{var c=zV(e)?e:IW(new AV(e,n).toString()),a=c.length;for(o=0;o<i-t;++o)this[o+t]=c[o%a]}return this};var mW=/[^+\/0-9A-Za-z-_]/g;function pW(e){return e<16?"0"+e.toString(16):e.toString(16)}function IW(e,t){var i;t=t||1/0;for(var n=e.length,l=null,o=[],c=0;c<n;++c){if((i=e.charCodeAt(c))>55295&&i<57344){if(!l){if(i>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(c+1===n){(t-=3)>-1&&o.push(239,191,189);continue}l=i;continue}if(i<56320){(t-=3)>-1&&o.push(239,191,189),l=i;continue}i=65536+(l-55296<<10|i-56320)}else l&&(t-=3)>-1&&o.push(239,191,189);if(l=null,i<128){if((t-=1)<0)break;o.push(i)}else if(i<2048){if((t-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function gW(e){return function(e){var t,i,n,l,o,c;SV||vV();var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,c=new RV(3*a/4-o),n=o>0?a-4:a;var r=0;for(t=0,i=0;t<n;t+=4,i+=3)l=CV[e.charCodeAt(t)]<<18|CV[e.charCodeAt(t+1)]<<12|CV[e.charCodeAt(t+2)]<<6|CV[e.charCodeAt(t+3)],c[r++]=l>>16&255,c[r++]=l>>8&255,c[r++]=255&l;return 2===o?(l=CV[e.charCodeAt(t)]<<2|CV[e.charCodeAt(t+1)]>>4,c[r++]=255&l):1===o&&(l=CV[e.charCodeAt(t)]<<10|CV[e.charCodeAt(t+1)]<<4|CV[e.charCodeAt(t+2)]>>2,c[r++]=l>>8&255,c[r++]=255&l),c}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(mW,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function GW(e,t,i,n){for(var l=0;l<n&&!(l+i>=t.length||l>=e.length);++l)t[l+i]=e[l];return l}function yW(e){return null!=e&&(!!e._isBuffer||XW(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&XW(e.slice(0,0))}(e))}function XW(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var VW=Object.freeze({__proto__:null,Buffer:AV,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),AV.alloc(+e)},isBuffer:yW,kMaxLength:kV}),WW=XV;function CW(e,t,i,n,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),l&&(this.response=l)}WW.inherits(CW,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var RW=CW.prototype,SW={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){SW[e]={value:e}})),Object.defineProperties(CW,SW),Object.defineProperty(RW,"isAxiosError",{value:!0}),CW.from=function(e,t,i,n,l,o){var c=Object.create(RW);return WW.toFlatObject(e,c,(function(e){return e!==Error.prototype})),CW.call(c,e.message,t,i,n,l),c.cause=e,c.name=e.name,o&&Object.assign(c,o),c};var vW=CW,fW="object"==typeof self?self.FormData:window.FormData,YW=XV,KW=vW,NW=fW;function JW(e){return YW.isPlainObject(e)||YW.isArray(e)}function LW(e){return YW.endsWith(e,"[]")?e.slice(0,-2):e}function kW(e,t,i){return e?e.concat(t).map((function(e,t){return e=LW(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}var UW=YW.toFlatObject(YW,{},null,(function(e){return/^is[A-Z]/.test(e)}));var HW=function(e,t,i){if(!YW.isObject(e))throw new TypeError("target must be an object");t=t||new(NW||FormData);var n,l=(i=YW.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!YW.isUndefined(t[e])}))).metaTokens,o=i.visitor||s,c=i.dots,a=i.indexes,r=(i.Blob||"undefined"!=typeof Blob&&Blob)&&((n=t)&&YW.isFunction(n.append)&&"FormData"===n[Symbol.toStringTag]&&n[Symbol.iterator]);if(!YW.isFunction(o))throw new TypeError("visitor must be a function");function d(e){if(null===e)return"";if(YW.isDate(e))return e.toISOString();if(!r&&YW.isBlob(e))throw new KW("Blob is not supported. Use a Buffer instead.");return YW.isArrayBuffer(e)||YW.isTypedArray(e)?r&&"function"==typeof Blob?new Blob([e]):AV.from(e):e}function s(e,i,n){var o=e;if(e&&!n&&"object"==typeof e)if(YW.endsWith(i,"{}"))i=l?i:i.slice(0,-2),e=JSON.stringify(e);else if(YW.isArray(e)&&function(e){return YW.isArray(e)&&!e.some(JW)}(e)||YW.isFileList(e)||YW.endsWith(i,"[]")&&(o=YW.toArray(e)))return i=LW(i),o.forEach((function(e,n){!YW.isUndefined(e)&&null!==e&&t.append(!0===a?kW([i],n,c):null===a?i:i+"[]",d(e))})),!1;return!!JW(e)||(t.append(kW(n,i,c),d(e)),!1)}var u=[],Z=Object.assign(UW,{defaultVisitor:s,convertValue:d,isVisitable:JW});if(!YW.isObject(e))throw new TypeError("data must be an object");return function e(i,n){if(!YW.isUndefined(i)){if(-1!==u.indexOf(i))throw Error("Circular reference detected in "+n.join("."));u.push(i),YW.forEach(i,(function(i,l){!0===(!(YW.isUndefined(i)||null===i)&&o.call(t,i,YW.isString(l)?l.trim():l,n,Z))&&e(i,n?n.concat(l):[l])})),u.pop()}}(e),t},AW=HW;function TW(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function BW(e,t){this._pairs=[],e&&AW(e,this,t)}var FW=BW.prototype;FW.append=function(e,t){this._pairs.push([e,t])},FW.toString=function(e){var t=e?function(t){return e.call(this,t,TW)}:TW;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var wW=BW,xW=XV,zW=wW;function PW(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var QW=function(e,t,i){if(!t)return e;var n=e.indexOf("#");-1!==n&&(e=e.slice(0,n));var l,o=i&&i.encode||PW,c=i&&i.serialize;return(l=c?c(t,i):xW.isURLSearchParams(t)?t.toString():new zW(t,i).toString(o))&&(e+=(-1===e.indexOf("?")?"?":"&")+l),e},jW=XV;function MW(){this.handlers=[]}MW.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},MW.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},MW.prototype.clear=function(){this.handlers&&(this.handlers=[])},MW.prototype.forEach=function(e){jW.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var EW=MW;function DW(){throw new Error("setTimeout has not been defined")}function OW(){throw new Error("clearTimeout has not been defined")}var _W=DW,qW=OW;function $W(e){if(_W===setTimeout)return setTimeout(e,0);if((_W===DW||!_W)&&setTimeout)return _W=setTimeout,setTimeout(e,0);try{return _W(e,0)}catch(t){try{return _W.call(null,e,0)}catch(t){return _W.call(this,e,0)}}}"function"==typeof VV.setTimeout&&(_W=setTimeout),"function"==typeof VV.clearTimeout&&(qW=clearTimeout);var eC,tC=[],iC=!1,nC=-1;function lC(){iC&&eC&&(iC=!1,eC.length?tC=eC.concat(tC):nC=-1,tC.length&&oC())}function oC(){if(!iC){var e=$W(lC);iC=!0;for(var t=tC.length;t;){for(eC=tC,tC=[];++nC<t;)eC&&eC[nC].run();nC=-1,t=tC.length}eC=null,iC=!1,function(e){if(qW===clearTimeout)return clearTimeout(e);if((qW===OW||!qW)&&clearTimeout)return qW=clearTimeout,clearTimeout(e);try{qW(e)}catch(t){try{return qW.call(null,e)}catch(t){return qW.call(this,e)}}}(e)}}function cC(e,t){this.fun=e,this.array=t}cC.prototype.run=function(){this.fun.apply(null,this.array)};function aC(){}var rC=aC,dC=aC,sC=aC,uC=aC,ZC=aC,hC=aC,bC=aC;var mC=VV.performance||{},pC=mC.now||mC.mozNow||mC.msNow||mC.oNow||mC.webkitNow||function(){return(new Date).getTime()};var IC=new Date;var gC={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];tC.push(new cC(e,t)),1!==tC.length||iC||$W(oC)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:rC,addListener:dC,once:sC,off:uC,removeListener:ZC,removeAllListeners:hC,emit:bC,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*pC.call(mC),i=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(i-=e[0],(n-=e[1])<0&&(i--,n+=1e9)),[i,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-IC)/1e3}},GC=gC,yC=XV,XC=function(e,t){yC.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))},VC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},WC={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:wW,FormData:FormData,Blob:Blob},protocols:["http","https","file","blob","url","data"]},CC=XV,RC=HW,SC=WC,vC=XV;var fC=function(e){function t(e,i,n,l){var o=e[l++];if("__proto__"===o)return!0;var c=Number.isFinite(+o),a=l>=e.length;return o=!o&&vC.isArray(n)?n.length:o,a?(vC.hasOwnProperty(n,o)?n[o]=[n[o],i]:n[o]=i,!c):(n[o]&&vC.isObject(n[o])||(n[o]=[]),t(e,i,n[o],l)&&vC.isArray(n[o])&&(n[o]=function(e){var t,i,n={},l=Object.keys(e),o=l.length;for(t=0;t<o;t++)n[i=l[t]]=e[i];return n}(n[o])),!c)}if(vC.isFormData(e)&&vC.isFunction(e.entries)){var i={};return vC.forEachEntry(e,(function(e,n){t(function(e){return vC.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),n,i,0)})),i}return null},YC=vW,KC=XV,NC=KC.isStandardBrowserEnv()?{write:function(e,t,i,n,l,o){var c=[];c.push(e+"="+encodeURIComponent(t)),KC.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),KC.isString(n)&&c.push("path="+n),KC.isString(l)&&c.push("domain="+l),!0===o&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},JC=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},LC=function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e},kC=function(e,t,i){var n=!JC(t);return e&&(n||!1===i)?LC(e,t):t},UC=XV,HC=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],AC=XV,TC=AC.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=n(window.location.href),function(t){var i=AC.isString(t)?n(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0},BC=vW;function FC(e,t,i){BC.call(this,null==e?"canceled":e,BC.ERR_CANCELED,t,i),this.name="CanceledError"}XV.inherits(FC,BC,{__CANCEL__:!0});var wC=FC,xC=XV,zC=function(e,t,i){var n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new YC("Request failed with status code "+i.status,[YC.ERR_BAD_REQUEST,YC.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)},PC=NC,QC=QW,jC=kC,MC=function(e){var t,i,n,l={};return e?(UC.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=UC.trim(e.slice(0,n)).toLowerCase(),i=UC.trim(e.slice(n+1)),t){if(l[t]&&HC.indexOf(t)>=0)return;l[t]="set-cookie"===t?(l[t]?l[t]:[]).concat([i]):l[t]?l[t]+", "+i:i}})),l):l},EC=TC,DC=VC,OC=vW,_C=wC,qC=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""},$C=WC,eR=function(e){return new Promise((function(t,i){var n,l=e.data,o=e.headers,c=e.responseType,a=e.withXSRFToken;function r(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}xC.isFormData(l)&&xC.isStandardBrowserEnv()&&delete o["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+u)}var Z=jC(e.baseURL,e.url,e.allowAbsoluteUrls);function h(){if(d){var n="getAllResponseHeaders"in d?MC(d.getAllResponseHeaders()):null,l={data:c&&"text"!==c&&"json"!==c?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};zC((function(e){t(e),r()}),(function(e){i(e),r()}),l),d=null}}if(d.open(e.method.toUpperCase(),QC(Z,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(h)},d.onabort=function(){d&&(i(new OC("Request aborted",OC.ECONNABORTED,e,d)),d=null)},d.onerror=function(){i(new OC("Network Error",OC.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||DC;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new OC(t,n.clarifyTimeoutError?OC.ETIMEDOUT:OC.ECONNABORTED,e,d)),d=null},xC.isStandardBrowserEnv()&&(a&&xC.isFunction(a)&&(a=a(e)),a||!1!==a&&EC(Z))){var b=e.xsrfHeaderName&&e.xsrfCookieName&&PC.read(e.xsrfCookieName);b&&(o[e.xsrfHeaderName]=b)}"setRequestHeader"in d&&xC.forEach(o,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete o[t]:d.setRequestHeader(t,e)})),xC.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),c&&"json"!==c&&(d.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(n=function(t){d&&(i(!t||t.type?new _C(null,e,d):t),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n))),l||!1===l||0===l||""===l||(l=null);var m=qC(Z);m&&-1===$C.protocols.indexOf(m)?i(new OC("Unsupported protocol "+m+":",OC.ERR_BAD_REQUEST,e)):d.send(l)}))},tR=XV,iR=XC,nR=vW,lR=HW,oR=function(e,t){return RC(e,new SC.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,n){return SC.isNode&&CC.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))},cR=WC,aR=fC,rR={"Content-Type":"application/x-www-form-urlencoded"};function dR(e,t){!tR.isUndefined(e)&&tR.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var sR,uR={transitional:VC,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==GC&&"[object process]"===Object.prototype.toString.call(GC))&&(sR=eR),sR),transformRequest:[function(e,t){iR(t,"Accept"),iR(t,"Content-Type");var i,n=t&&t["Content-Type"]||"",l=n.indexOf("application/json")>-1,o=tR.isObject(e);if(o&&tR.isHTMLForm(e)&&(e=new FormData(e)),tR.isFormData(e))return l?JSON.stringify(aR(e)):e;if(tR.isArrayBuffer(e)||tR.isBuffer(e)||tR.isStream(e)||tR.isFile(e)||tR.isBlob(e))return e;if(tR.isArrayBufferView(e))return e.buffer;if(tR.isURLSearchParams(e))return dR(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();if(o){if(-1!==n.indexOf("application/x-www-form-urlencoded"))return oR(e,this.formSerializer).toString();if((i=tR.isFileList(e))||n.indexOf("multipart/form-data")>-1){var c=this.env&&this.env.FormData;return lR(i?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||l?(dR(t,"application/json"),function(e,t,i){if(tR.isString(e))try{return(t||JSON.parse)(e),tR.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||uR.transitional,i=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&tR.isString(e)&&(i&&!this.responseType||n)){var l=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(l){if("SyntaxError"===e.name)throw nR.from(e,nR.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cR.classes.FormData,Blob:cR.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};tR.forEach(["delete","get","head"],(function(e){uR.headers[e]={}})),tR.forEach(["post","put","patch"],(function(e){uR.headers[e]=tR.merge(rR)}));var ZR=uR,hR=XV,bR=ZR,mR=function(e){return!(!e||!e.__CANCEL__)},pR=XV,IR=function(e,t,i,n){var l=this||bR;return hR.forEach(n,(function(n){e=n.call(l,e,t,i)})),e},gR=mR,GR=ZR,yR=wC,XR=XC;function VR(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new yR}var WR=XV,CR=function(e,t){t=t||{};var i={};function n(e,t){return WR.isPlainObject(e)&&WR.isPlainObject(t)?WR.merge(e,t):WR.isEmptyObject(t)?WR.merge({},e):WR.isPlainObject(t)?WR.merge({},t):WR.isArray(t)?t.slice():t}function l(i){return WR.isUndefined(t[i])?WR.isUndefined(e[i])?void 0:n(void 0,e[i]):n(e[i],t[i])}function o(e){if(!WR.isUndefined(t[e]))return n(void 0,t[e])}function c(i){return WR.isUndefined(t[i])?WR.isUndefined(e[i])?void 0:n(void 0,e[i]):n(void 0,t[i])}function a(i){return i in t?n(e[i],t[i]):i in e?n(void 0,e[i]):void 0}var r={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:a};return WR.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=r[e]||l,n=t(e);WR.isUndefined(n)&&t!==a||(i[e]=n)})),i},RR="0.30.0",SR=RR,vR=vW,fR={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){fR[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));var YR={};fR.transitional=function(e,t,i){function n(e,t){return"[Axios v"+SR+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,l,o){if(!1===e)throw new vR(n(l," has been removed"+(t?" in "+t:"")),vR.ERR_DEPRECATED);return t&&!YR[l]&&(YR[l]=!0,console.warn(n(l," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,l,o)}};var KR={assertOptions:function(e,t,i){if("object"!=typeof e)throw new vR("options must be an object",vR.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),l=n.length;l-- >0;){var o=n[l],c=t[o];if(c){var a=e[o],r=void 0===a||c(a,o,e);if(!0!==r)throw new vR("option "+o+" must be "+r,vR.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new vR("Unknown option "+o,vR.ERR_BAD_OPTION)}},validators:fR},NR=XV,JR=QW,LR=EW,kR=function(e){return VR(e),e.headers=e.headers||{},e.data=IR.call(e,e.data,e.headers,null,e.transformRequest),XR(e.headers,"Accept"),XR(e.headers,"Content-Type"),e.headers=pR.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),pR.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||GR.adapter)(e).then((function(t){return VR(e),t.data=IR.call(e,t.data,t.headers,t.status,e.transformResponse),t}),(function(t){return gR(t)||(VR(e),t&&t.response&&(t.response.data=IR.call(e,t.response.data,t.response.headers,t.response.status,e.transformResponse))),Promise.reject(t)}))},UR=CR,HR=kC,AR=KR,TR=AR.validators;function BR(e){this.defaults=e,this.interceptors={request:new LR,response:new LR}}BR.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=UR(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;void 0!==i&&AR.assertOptions(i,{silentJSONParsing:TR.transitional(TR.boolean),forcedJSONParsing:TR.transitional(TR.boolean),clarifyTimeoutError:TR.transitional(TR.boolean)},!1);var n=t.paramsSerializer;null!=n&&(NR.isFunction(n)?t.paramsSerializer={serialize:n}:AR.assertOptions(n,{encode:TR.function,serialize:TR.function},!0));var l=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,l.unshift(e.fulfilled,e.rejected))}));var c,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!o){var r=[kR,void 0];for(Array.prototype.unshift.apply(r,l),r=r.concat(a),c=Promise.resolve(t);r.length;)c=c.then(r.shift(),r.shift());return c}for(var d=t;l.length;){var s=l.shift(),u=l.shift();try{d=s(d)}catch(e){u(e);break}}try{c=kR(d)}catch(e){return Promise.reject(e)}for(;a.length;)c=c.then(a.shift(),a.shift());return c},BR.prototype.getUri=function(e){e=UR(this.defaults,e);var t=HR(e.baseURL,e.url,e.allowAbsoluteUrls);return JR(t,e.params,e.paramsSerializer)},NR.forEach(["delete","get","head","options"],(function(e){BR.prototype[e]=function(t,i){return this.request(UR(i||{},{method:e,url:t,data:(i||{}).data}))}})),NR.forEach(["post","put","patch"],(function(e){function t(t){return function(i,n,l){return this.request(UR(l||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}BR.prototype[e]=t(),BR.prototype[e+"Form"]=t(!0)}));var FR=BR,wR=wC;function xR(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;this.promise.then((function(e){if(i._listeners){for(var t=i._listeners.length;t-- >0;)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e,n,l){i.reason||(i.reason=new wR(e,n,l),t(i.reason))}))}xR.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},xR.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},xR.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},xR.source=function(){var e,t=new xR((function(t){e=t}));return{token:t,cancel:e}};var zR=xR,PR=XV,QR=XV,jR=$X,MR=FR,ER=CR,DR=fC;var OR=function e(t){var i=new MR(t),n=jR(MR.prototype.request,i);return QR.extend(n,MR.prototype,i),QR.extend(n,i),n.create=function(i){return e(ER(t,i))},n}(ZR);OR.Axios=MR,OR.CanceledError=wC,OR.CancelToken=zR,OR.isCancel=mR,OR.VERSION=RR,OR.toFormData=HW,OR.AxiosError=vW,OR.Cancel=OR.CanceledError,OR.all=function(e){return Promise.all(e)},OR.spread=function(e){return function(t){return e.apply(null,t)}},OR.isAxiosError=function(e){return PR.isObject(e)&&!0===e.isAxiosError},OR.formToJSON=function(e){return DR(QR.isHTMLForm(e)?new FormData(e):e)},qX.exports=OR,qX.exports.default=OR;var _R,qR=qX.exports;let $R=_R=class{constructor(){this.attachToken=()=>Promise.resolve(),this.requestStartCallback=()=>null,this.requestSuccessCallback=()=>null,this.requestErrorCallback=()=>null,this.requestFinishCallback=()=>null,this.init=this.init.bind(this),this.setHttpRequestErrorCallback=this.setHttpRequestErrorCallback.bind(this),this.setHttpRequestFinishCallback=this.setHttpRequestFinishCallback.bind(this),this.setHttpRequestStartCallback=this.setHttpRequestStartCallback.bind(this),this.setHttpRequestSuccessCallback=this.setHttpRequestSuccessCallback.bind(this)}static getInstance(){return this.axiosInstance||(this.axiosInstance=qR.create({withCredentials:!0}),this.clientInstance||(this.clientInstance=new _R),this.axiosInstance.interceptors.request.use((e=>Ly(this,void 0,void 0,(function*(){return yield this.clientInstance.requestHandler(e)})))),this.axiosInstance.interceptors.response.use((e=>this.clientInstance.successHandler(e)),(e=>this.clientInstance.errorHandler(e))),this.axiosInstance.all=qR.all,this.axiosInstance.spread=qR.spread,this.axiosInstance.init=this.clientInstance.init,this.axiosInstance.enableHandler=this.clientInstance.enableHandler,this.axiosInstance.disableHandler=this.clientInstance.disableHandler,this.axiosInstance.disableHandlerWithTimeout=this.clientInstance.disableHandlerWithTimeout,this.axiosInstance.setHttpRequestStartCallback=this.clientInstance.setHttpRequestStartCallback,this.axiosInstance.setHttpRequestSuccessCallback=this.clientInstance.setHttpRequestSuccessCallback,this.axiosInstance.setHttpRequestErrorCallback=this.clientInstance.setHttpRequestErrorCallback,this.axiosInstance.setHttpRequestFinishCallback=this.clientInstance.setHttpRequestFinishCallback),this.axiosInstance}requestHandler(e){return Ly(this,void 0,void 0,(function*(){if(yield this.attachToken(e),null==e?void 0:e.shouldEncodeToFormData){const t=null==e?void 0:e.data,i=new FormData;Object.keys(t).forEach((e=>{i.append(e,t[e])})),e.data=i}return e.startTimeInMs=(new Date).getTime(),_R.isHandlerEnabled&&this.requestStartCallback&&"function"==typeof this.requestStartCallback&&this.requestStartCallback(e),e}))}errorHandler(e){throw _R.isHandlerEnabled&&(this.requestErrorCallback&&"function"==typeof this.requestErrorCallback&&this.requestErrorCallback(e),this.requestFinishCallback&&"function"==typeof this.requestFinishCallback&&this.requestFinishCallback()),e}successHandler(e){return _R.isHandlerEnabled&&(this.requestSuccessCallback&&"function"==typeof this.requestSuccessCallback&&this.requestSuccessCallback(e),this.requestFinishCallback&&"function"==typeof this.requestFinishCallback&&this.requestFinishCallback()),e}init(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return Ly(this,void 0,void 0,(function*(){_R.isHandlerEnabled=e,this.attachToken=t}))}enableHandler(){_R.isHandlerEnabled=!0}disableHandler(){_R.isHandlerEnabled=!1}disableHandlerWithTimeout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_R.DEFAULT_HANDLER_DISABLE_TIMEOUT;_R.isHandlerEnabled=!1,setTimeout((()=>{_R.isHandlerEnabled=!0}),e)}setHttpRequestStartCallback(e){this.requestStartCallback=e}setHttpRequestSuccessCallback(e){this.requestSuccessCallback=e}setHttpRequestErrorCallback(e){this.requestErrorCallback=e}setHttpRequestFinishCallback(e){this.requestFinishCallback=e}};$R.DEFAULT_HANDLER_DISABLE_TIMEOUT=1e3,$R=_R=function(e,t,i,n){var l,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(c=(o<3?l(c):o>3?l(t,i,c):l(t,i))||c);return o>3&&c&&Object.defineProperty(t,i,c),c}([e=>{}],$R);class eS{setData(e,t){return Ly(this,void 0,void 0,(function*(){localStorage.setItem(e,t)}))}getData(e){var t;return Ly(this,void 0,void 0,(function*(){return null!==(t=localStorage.getItem(e))&&void 0!==t?t:"{}"}))}removeData(e){return Ly(this,void 0,void 0,(function*(){localStorage.removeItem(e)}))}}class tS{constructor(){this._data=new Map}setData(e,t){return Ly(this,void 0,void 0,(function*(){this._data.set(e,t)}))}getData(e){var t,i;return Ly(this,void 0,void 0,(function*(){return null!==(i=null===(t=this._data)||void 0===t?void 0:t.get(e))&&void 0!==i?i:"{}"}))}removeData(e){return Ly(this,void 0,void 0,(function*(){this._data.delete(e)}))}}class iS{setData(e,t){return Ly(this,void 0,void 0,(function*(){sessionStorage.setItem(e,t)}))}getData(e){var t;return Ly(this,void 0,void 0,(function*(){return null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:"{}"}))}removeData(e){return Ly(this,void 0,void 0,(function*(){sessionStorage.removeItem(e)}))}}var nS={exports:{}},lS={},oS={};Object.defineProperty(oS,"__esModule",{value:!0}),oS.default=function(e){var t=e.length,i=t%4;if(!i)return e;var n=t,l=4-i,o=t+l,c=AV.alloc(o);for(c.write(e);l--;)c.write("=",n++);return c.toString()},Object.defineProperty(lS,"__esModule",{value:!0});var cS=oS;function aS(e,t){return void 0===t&&(t="utf8"),AV.isBuffer(e)?dS(e.toString("base64")):dS(AV.from(e,t).toString("base64"))}function rS(e){return e=e.toString(),cS.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function dS(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var sS=aS;sS.encode=aS,sS.decode=function(e,t){return void 0===t&&(t="utf8"),AV.from(rS(e),"base64").toString(t)},sS.toBase64=rS,sS.fromBase64=dS,sS.toBuffer=function(e){return AV.from(rS(e),"base64")},lS.default=sS,function(e){e.exports=lS.default,e.exports.default=e.exports}(nS);var uS=nS.exports,ZS={exports:{}};!function(e){!function(t,i){var n={};!function(e){e.__esModule=!0,e.digestLength=32,e.blockSize=64;var t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(e,i,n,l,o){for(var c,a,r,d,s,u,Z,h,b,m,p,I,g;o>=64;){for(c=i[0],a=i[1],r=i[2],d=i[3],s=i[4],u=i[5],Z=i[6],h=i[7],m=0;m<16;m++)p=l+4*m,e[m]=(255&n[p])<<24|(255&n[p+1])<<16|(255&n[p+2])<<8|255&n[p+3];for(m=16;m<64;m++)I=((b=e[m-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,g=((b=e[m-15])>>>7|b<<25)^(b>>>18|b<<14)^b>>>3,e[m]=(I+e[m-7]|0)+(g+e[m-16]|0);for(m=0;m<64;m++)I=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&u^~s&Z)|0)+(h+(t[m]+e[m]|0)|0)|0,g=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&a^c&r^a&r)|0,h=Z,Z=u,u=s,s=d+I|0,d=r,r=a,a=c,c=I+g|0;i[0]+=c,i[1]+=a,i[2]+=r,i[3]+=d,i[4]+=s,i[5]+=u,i[6]+=Z,i[7]+=h,l+=64,o-=64}return l}var n=function(){function t(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return t.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},t.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},t.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[n++],t--;64===this.bufferLength&&(i(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(n=i(this.temp,this.state,e,n,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[n++],t--;return this},t.prototype.finish=function(e){if(!this.finished){var t=this.bytesHashed,n=this.bufferLength,l=t/536870912|0,o=t<<3,c=t%64<56?64:128;this.buffer[n]=128;for(var a=n+1;a<c-8;a++)this.buffer[a]=0;this.buffer[c-8]=l>>>24&255,this.buffer[c-7]=l>>>16&255,this.buffer[c-6]=l>>>8&255,this.buffer[c-5]=l>>>0&255,this.buffer[c-4]=o>>>24&255,this.buffer[c-3]=o>>>16&255,this.buffer[c-2]=o>>>8&255,this.buffer[c-1]=o>>>0&255,i(this.temp,this.state,this.buffer,0,c),this.finished=!0}for(a=0;a<8;a++)e[4*a+0]=this.state[a]>>>24&255,e[4*a+1]=this.state[a]>>>16&255,e[4*a+2]=this.state[a]>>>8&255,e[4*a+3]=this.state[a]>>>0&255;return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},t.prototype._restoreState=function(e,t){for(var i=0;i<this.state.length;i++)this.state[i]=e[i];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},t}();e.Hash=n;var l=function(){function e(e){this.inner=new n,this.outer=new n,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var t=new Uint8Array(this.blockSize);if(e.length>this.blockSize)(new n).update(e).finish(t).clean();else for(var i=0;i<e.length;i++)t[i]=e[i];for(i=0;i<t.length;i++)t[i]^=54;this.inner.update(t);for(i=0;i<t.length;i++)t[i]^=106;this.outer.update(t),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(i=0;i<t.length;i++)t[i]=0}return e.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},e.prototype.clean=function(){for(var e=0;e<this.istate.length;e++)this.ostate[e]=this.istate[e]=0;this.inner.clean(),this.outer.clean()},e.prototype.update=function(e){return this.inner.update(e),this},e.prototype.finish=function(e){return this.outer.finished?this.outer.finish(e):(this.inner.finish(e),this.outer.update(e,this.digestLength).finish(e)),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e}();function o(e){var t=(new n).update(e),i=t.digest();return t.clean(),i}function c(e,t){var i=new l(e).update(t),n=i.digest();return i.clean(),n}function a(e,t,i,n){var l=n[0];if(0===l)throw new Error("hkdf: cannot expand more");t.reset(),l>1&&t.update(e),i&&t.update(i),t.update(n),t.finish(e),n[0]++}e.HMAC=l,e.hash=o,e.default=o,e.hmac=c;var r=new Uint8Array(e.digestLength);function d(e,t,i,n){void 0===t&&(t=r),void 0===n&&(n=32);for(var o=new Uint8Array([1]),d=c(t,e),s=new l(d),u=new Uint8Array(s.digestLength),Z=u.length,h=new Uint8Array(n),b=0;b<n;b++)Z===u.length&&(a(u,s,i,o),Z=0),h[b]=u[Z++];return s.clean(),u.fill(0),o.fill(0),h}function s(e,t,i,n){for(var o=new l(e),c=o.digestLength,a=new Uint8Array(4),r=new Uint8Array(c),d=new Uint8Array(c),s=new Uint8Array(n),u=0;u*c<n;u++){var Z=u+1;a[0]=Z>>>24&255,a[1]=Z>>>16&255,a[2]=Z>>>8&255,a[3]=Z>>>0&255,o.reset(),o.update(t),o.update(a),o.finish(d);for(var h=0;h<c;h++)r[h]=d[h];for(h=2;h<=i;h++){o.reset(),o.update(d).finish(d);for(var b=0;b<c;b++)r[b]^=d[b]}for(h=0;h<c&&u*c+h<n;h++)s[u*c+h]=r[h]}for(u=0;u<c;u++)r[u]=d[u]=0;for(u=0;u<4;u++)a[u]=0;return o.clean(),s}e.hkdf=d,e.pbkdf2=s}(n);var l=n.default;for(var o in n)l[o]=n[o];e.exports=l}()}(ZS);var hS=i(ZS.exports),bS=crypto;const mS=e=>e instanceof CryptoKey,pS=new TextEncoder,IS=new TextDecoder;const gS=e=>{let t=e;t instanceof Uint8Array&&(t=IS.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(e=>{const t=atob(e),i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i})(t)}catch(e){throw new TypeError("The input to be decoded is not correctly encoded.")}};class GS extends Error{constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class yS extends GS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=i}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class XS extends GS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=i}static get code(){return"ERR_JWT_EXPIRED"}}class VS extends GS{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class WS extends GS{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class CS extends GS{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class RS extends GS{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class SS extends GS{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class vS extends GS{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class fS extends GS{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class YS extends GS{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function KS(){return"function"==typeof WebSocketPair}function NS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"algorithm.name";return new TypeError("CryptoKey does not support this operation, its ".concat(t," must be ").concat(e))}function JS(e,t){return e.name===t}function LS(e){return parseInt(e.name.slice(4),10)}function kS(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function US(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const i=t.pop();e+="one of ".concat(t.join(", "),", or ").concat(i,".")}else 2===t.length?e+="one of ".concat(t[0]," or ").concat(t[1],"."):e+="".concat(t[0],".");throw new TypeError(e)}}var HS=function(e){let t="Key must be ";for(var i=arguments.length,n=new Array(i>1?i-1:0),l=1;l<i;l++)n[l-1]=arguments[l];if(n.length>2){const e=n.pop();t+="one of type ".concat(n.join(", "),", or ").concat(e,".")}else 2===n.length?t+="one of type ".concat(n[0]," or ").concat(n[1],"."):t+="of type ".concat(n[0],".");return null==e?t+=" Received ".concat(e):"function"==typeof e&&e.name?t+=" Received function ".concat(e.name):"object"==typeof e&&null!=e&&e.constructor&&e.constructor.name&&(t+=" Received an instance of ".concat(e.constructor.name)),t},AS=e=>mS(e);const TS=["CryptoKey"];function BS(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let i=e;for(;null!==Object.getPrototypeOf(i);)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(e)===i}const FS=async e=>{var t,i;const{algorithm:n,keyUsages:l}=function(e){let t,i;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:"SHA-".concat(e.alg.slice(-3))},i=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new WS("".concat(e.alg," keys cannot be imported as CryptoKey instances"));case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},i=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},i=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},i=["deriveBits"];break;default:throw new WS('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:"SHA-".concat(e.alg.slice(-3))},i=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(e.alg.slice(-3))},i=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(e.alg.slice(-3),10)||1)},i=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new WS('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},i=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},i=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},i=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},i=e.d?["deriveBits"]:[];break;default:throw new WS('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case KS()&&"OKP":if("EdDSA"!==e.alg)throw new WS('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');if("Ed25519"!==e.crv)throw new WS('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value');t={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},i=e.d?["sign"]:["verify"];break;default:throw new WS('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:i}}(e),o=[n,null!==(t=e.ext)&&void 0!==t&&t,null!==(i=e.key_ops)&&void 0!==i?i:l];if("PBKDF2"===n.name)return bS.subtle.importKey("raw",gS(e.k),...o);const c={...e};return delete c.alg,bS.subtle.importKey("jwk",c,...o)};const wS=(e,t,i)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?(e=>{if(!(e instanceof Uint8Array)){if(!AS(e))throw new TypeError(HS(e,...TS,"Uint8Array"));if("secret"!==e.type)throw new TypeError("".concat(TS.join(" or "),' instances for symmetric algorithms must be of type "secret"'))}})(t):((e,t)=>{if(!AS(e))throw new TypeError(HS(e,...TS));if("secret"===e.type)throw new TypeError("".concat(TS.join(" or "),' instances for asymmetric algorithms must not be of type "secret"'));if("sign"===t&&"public"===e.type)throw new TypeError("".concat(TS.join(" or "),' instances for asymmetric algorithm signing must be of type "private"'));if("decrypt"===t&&"public"===e.type)throw new TypeError("".concat(TS.join(" or "),' instances for asymmetric algorithm decryption must be of type "private"'));if(e.algorithm&&"verify"===t&&"private"===e.type)throw new TypeError("".concat(TS.join(" or "),' instances for asymmetric algorithm verifying must be of type "public"'));if(e.algorithm&&"encrypt"===t&&"private"===e.type)throw new TypeError("".concat(TS.join(" or "),' instances for asymmetric algorithm encryption must be of type "public"'))})(t,i)};function xS(e,t,i){if(mS(t))return function(e,t){switch(t){case"HS256":case"HS384":case"HS512":{if(!JS(e.algorithm,"HMAC"))throw NS("HMAC");const i=parseInt(t.slice(2),10);if(LS(e.algorithm.hash)!==i)throw NS("SHA-".concat(i),"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!JS(e.algorithm,"RSASSA-PKCS1-v1_5"))throw NS("RSASSA-PKCS1-v1_5");const i=parseInt(t.slice(2),10);if(LS(e.algorithm.hash)!==i)throw NS("SHA-".concat(i),"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!JS(e.algorithm,"RSA-PSS"))throw NS("RSA-PSS");const i=parseInt(t.slice(2),10);if(LS(e.algorithm.hash)!==i)throw NS("SHA-".concat(i),"algorithm.hash");break}case KS()&&"EdDSA":if(!JS(e.algorithm,"NODE-ED25519"))throw NS("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!JS(e.algorithm,"ECDSA"))throw NS("ECDSA");const i=kS(t);if(e.algorithm.namedCurve!==i)throw NS(i,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}for(var i=arguments.length,n=new Array(i>2?i-2:0),l=2;l<i;l++)n[l-2]=arguments[l];US(e,n)}(t,e,i),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(HS(t,...TS));return bS.subtle.importKey("raw",t,{hash:"SHA-".concat(e.slice(-3)),name:"HMAC"},!1,[i])}throw new TypeError(HS(t,...TS,"Uint8Array"))}const zS=async(e,t,i,n)=>{const l=await xS(e,t,"verify");((e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:i}=t.algorithm;if("number"!=typeof i||i<2048)throw new TypeError("".concat(e," requires key modulusLength to be 2048 bits or larger"))}})(e,l);const o=function(e,t){const i="SHA-".concat(e.slice(-3));switch(e){case"HS256":case"HS384":case"HS512":return{hash:i,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:i,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:i,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:i,name:"ECDSA",namedCurve:t.namedCurve};case KS()&&"EdDSA":const{namedCurve:n}=t;return{name:n,namedCurve:n};default:throw new WS("alg ".concat(e," is not supported either by JOSE or your javascript runtime"))}}(e,l.algorithm);try{return await bS.subtle.verify(o,l,i,n)}catch(e){return!1}};async function PS(e,t,i){var n;if(!BS(e))throw new CS("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new CS('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new CS("JWS Protected Header incorrect type");if(void 0===e.payload)throw new CS("JWS Payload missing");if("string"!=typeof e.signature)throw new CS("JWS Signature missing or incorrect type");if(void 0!==e.header&&!BS(e.header))throw new CS("JWS Unprotected Header incorrect type");let l={};if(e.protected){const t=gS(e.protected);try{l=JSON.parse(IS.decode(t))}catch(e){throw new CS("JWS Protected Header is invalid")}}if(!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.filter(Boolean);if(0===n.length||1===n.length)return!0;let l;for(const e of n){const t=Object.keys(e);if(l&&0!==l.size)for(const e of t){if(l.has(e))return!1;l.add(e)}else l=new Set(t)}return!0}(l,e.header))throw new CS("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...l,...e.header},c=function(e,t,i,n,l){if(void 0!==l.crit&&void 0===n.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((e=>"string"!=typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==i?new Map([...Object.entries(i),...t.entries()]):t;for(const t of n.crit){if(!o.has(t))throw new WS('Extension Header Parameter "'.concat(t,'" is not recognized'));if(void 0===l[t])throw new e('Extension Header Parameter "'.concat(t,'" is missing'));if(o.get(t)&&void 0===n[t])throw new e('Extension Header Parameter "'.concat(t,'" MUST be integrity protected'))}return new Set(n.crit)}(CS,new Map([["b64",!0]]),null==i?void 0:i.crit,l,o);let a=!0;if(c.has("b64")&&(a=l.b64,"boolean"!=typeof a))throw new CS('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:r}=o;if("string"!=typeof r||!r)throw new CS('JWS "alg" (Algorithm) Header Parameter missing or invalid');const d=i&&((e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some((e=>"string"!=typeof e))))throw new TypeError('"'.concat(e,'" option must be an array of strings'));if(t)return new Set(t)})("algorithms",i.algorithms);if(d&&!d.has(r))throw new VS('"alg" (Algorithm) Header Parameter not allowed');if(a){if("string"!=typeof e.payload)throw new CS("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new CS("JWS Payload must be a string or an Uint8Array instance");let s=!1;"function"==typeof t&&(t=await t(l,e),s=!0),wS(r,t,"verify");const u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t.reduce(((e,t)=>{let{length:i}=t;return e+i}),0),l=new Uint8Array(n);let o=0;return t.forEach((e=>{l.set(e,o),o+=e.length})),l}(pS.encode(null!==(n=e.protected)&&void 0!==n?n:""),pS.encode("."),"string"==typeof e.payload?pS.encode(e.payload):e.payload),Z=gS(e.signature);if(!await zS(r,t,Z,u))throw new YS;let h;h=a?gS(e.payload):"string"==typeof e.payload?pS.encode(e.payload):e.payload;const b={payload:h};return void 0!==e.protected&&(b.protectedHeader=l),void 0!==e.header&&(b.unprotectedHeader=e.header),s?{...b,key:t}:b}var QS=e=>Math.floor(e.getTime()/1e3);const jS=86400,MS=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var ES=e=>{const t=MS.exec(e);if(!t)throw new TypeError("Invalid time period format");const i=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(i);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*i);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*i);case"day":case"days":case"d":return Math.round(i*jS);case"week":case"weeks":case"w":return Math.round(604800*i);default:return Math.round(31557600*i)}};const DS=e=>e.toLowerCase().replace(/^application\//,""),OS=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));async function _S(e,t,i){var n;const l=await async function(e,t,i){if(e instanceof Uint8Array&&(e=IS.decode(e)),"string"!=typeof e)throw new CS("Compact JWS must be a string or Uint8Array");const{0:n,1:l,2:o,length:c}=e.split(".");if(3!==c)throw new CS("Invalid Compact JWS");const a=await PS({payload:l,protected:n,signature:o},t,i),r={payload:a.payload,protectedHeader:a.protectedHeader};return"function"==typeof t?{...r,key:a.key}:r}(e,t,i);if((null===(n=l.protectedHeader.crit)||void 0===n?void 0:n.includes("b64"))&&!1===l.protectedHeader.b64)throw new RS("JWTs MUST NOT use unencoded payload");const o=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{typ:n}=i;if(n&&("string"!=typeof e.typ||DS(e.typ)!==DS(n)))throw new yS('unexpected "typ" JWT header value',"typ","check_failed");let l;try{l=JSON.parse(IS.decode(t))}catch(e){}if(!BS(l))throw new RS("JWT Claims Set must be a top-level JSON object");const{issuer:o}=i;if(o&&!(Array.isArray(o)?o:[o]).includes(l.iss))throw new yS('unexpected "iss" claim value',"iss","check_failed");const{subject:c}=i;if(c&&l.sub!==c)throw new yS('unexpected "sub" claim value',"sub","check_failed");const{audience:a}=i;if(a&&!OS(l.aud,"string"==typeof a?[a]:a))throw new yS('unexpected "aud" claim value',"aud","check_failed");let r;switch(typeof i.clockTolerance){case"string":r=ES(i.clockTolerance);break;case"number":r=i.clockTolerance;break;case"undefined":r=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:d}=i,s=QS(d||new Date);if((void 0!==l.iat||i.maxTokenAge)&&"number"!=typeof l.iat)throw new yS('"iat" claim must be a number',"iat","invalid");if(void 0!==l.nbf){if("number"!=typeof l.nbf)throw new yS('"nbf" claim must be a number',"nbf","invalid");if(l.nbf>s+r)throw new yS('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==l.exp){if("number"!=typeof l.exp)throw new yS('"exp" claim must be a number',"exp","invalid");if(l.exp<=s-r)throw new XS('"exp" claim timestamp check failed',"exp","check_failed")}if(i.maxTokenAge){const e=s-l.iat;if(e-r>("number"==typeof i.maxTokenAge?i.maxTokenAge:ES(i.maxTokenAge)))throw new XS('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-r)throw new yS('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return l}(l.protectedHeader,l.payload,i),c={payload:o,protectedHeader:l.protectedHeader};return"function"==typeof t?{...c,key:l.key}:c}function qS(e){return BS(e)}class $S{constructor(e){if(this._cached=new WeakMap,!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(qS)}(e))throw new SS("JSON Web Key Set malformed");var t;this._jwks=(t=e,"function"==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t)))}async getKey(e,t){const{alg:i,kid:n}={...e,...t.header},l=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new WS('Unsupported "alg" value for a JSON Web Key Set')}}(i),o=this._jwks.keys.filter((e=>{let t=l===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=i===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===i&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(i){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t})),{0:c,length:a}=o;if(0===a)throw new vS;if(1!==a)throw new fS;const r=this._cached.get(c)||this._cached.set(c,{}).get(c);if(void 0===r[i]){const e=await async function(e,t,i){if(!BS(e))throw new TypeError("JWK must be an object");if(t||(t=e.alg),"string"!=typeof t||!t)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=i||(i=!0!==e.ext),i?FS({...e,alg:t,ext:!1}):gS(e.k);case"RSA":if(void 0!==e.oth)throw new WS('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return FS({...e,alg:t});default:throw new WS('Unsupported "kty" (Key Type) Parameter value')}}({...c,ext:!0},i);if(e instanceof Uint8Array||"public"!==e.type)throw new SS("JSON Web Key Set members must be public keys");r[i]=e}return r[i]}}var ev={exports:{}},tv={exports:{}},iv=n(VW);
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
!function(e,t){var i=iv,n=i.Buffer;function l(e,t){for(var i in e)t[i]=e[i]}function o(e,t,i){return n(e,t,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(l(i,t),t.Buffer=o),o.prototype=Object.create(n.prototype),l(n,o),o.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,i)},o.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=n(e);return void 0!==t?"string"==typeof i?l.fill(t,i):l.fill(t):l.fill(0),l},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}}(tv,tv.exports);var nv=65536,lv=4294967295;var ov=tv.exports.Buffer,cv=t.crypto||t.msCrypto;cv&&cv.getRandomValues?ev.exports=function(e,t){if(e>lv)throw new RangeError("requested too many random bytes");var i=ov.allocUnsafe(e);if(e>0)if(e>nv)for(var n=0;n<e;n+=nv)cv.getRandomValues(i.slice(n,n+nv));else cv.getRandomValues(i);if("function"==typeof t)return GC.nextTick((function(){t(null,i)}));return i}:ev.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};var av=ev.exports;class rv{base64URLEncode(e){return uS.encode(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}base64URLDecode(e){return uS.decode(e).toString()}hashSha256(e){return AV.from(hS((new TextEncoder).encode(e)))}generateRandomBytes(e){return av(e)}verifyJwt(e,t,i,n,l,o,c,a){const r={algorithms:i,audience:n,clockTolerance:c,subject:o};return(null==a||a)&&(r.issuer=l),_S(e,(d={keys:[t]},$S.prototype.getKey.bind(new $S(d))),r).then((()=>Promise.resolve(!0))).catch((e=>{var t;return Promise.reject(new zy("SPA-CRYPTO-UTILS-VJ-IV01",null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:JSON.stringify(e),"".concat(null==e?void 0:e.code," ").concat(null==e?void 0:e.claim)))}));var d}}const dv=(t,i,n)=>Ly(void 0,void 0,void 0,(function*(){var l;const o=(e=>{switch(e){case QX.LocalStorage:return new eS;case QX.SessionStorage:return new iS;case QX.BrowserMemory:return new tS;default:return new iS}})(i.storage),c=new rv,a=new Oy;yield a.initialize(i,o,c,t);const r=new DX(a),d=a.getDataLayer(),s=yield OX((()=>Ly(void 0,void 0,void 0,(function*(){return a.getSignOutURL()}))),null!==(l=i.storage)&&void 0!==l?l:QX.SessionStorage,(e=>d.setSessionDataParameter(Ty,null!=e?e:""))),u=n(a,r);let Z=!1;const h=$R.getInstance();let b,m,p=!0;(null==h?void 0:h.init)&&(yield h.init(!0,(e=>Ly(void 0,void 0,void 0,(function*(){yield u.attachTokenToRequestConfig(e)})))));const I=()=>Ly(void 0,void 0,void 0,(function*(){const e=yield a.getOIDCServiceEndpoints(),t=yield d.getConfigData();u.initializeSessionManger(t,e,(()=>Ly(void 0,void 0,void 0,(function*(){return(yield a.getBasicUserInfo()).sessionState}))),(e=>Ly(void 0,void 0,void 0,(function*(){return a.getAuthorizationURL(e)}))),s)})),g=()=>Ly(void 0,void 0,void 0,(function*(){return yield s.receivePromptNoneResponse((e=>Ly(void 0,void 0,void 0,(function*(){yield d.setSessionDataParameter(Ty,null!=e?e:"")}))))})),G=e=>{e.preventSignOutURLUpdate&&(Z=!0)},y=(e,t,i,n)=>Ly(void 0,void 0,void 0,(function*(){return yield u.requestAccessToken(e,t,I,void 0,i,n)})),X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ly(void 0,void 0,void 0,(function*(){const t=yield d.getConfigData(),i=yield a.getAuthorizationURL(Object.assign({prompt:"none",state:AX},e)),n=new URL(i);n.searchParams.set("response_mode","query");const l=n.toString();if(t.storage===QX.BrowserMemory&&t.enablePKCE){const e=n.searchParams.get(wy);MX.setPKCE(Py.extractPKCEKeyFromStateParam(null!=e?e:""),yield a.getPKCECode(null!=e?e:""))}return l}))};return{disableHttpHandler:()=>(u.disableHttpHandler(h),p=!1,!0),enableHttpHandler:()=>(u.enableHttpHandler(h),p=!0,!0),getAccessToken:()=>Ly(void 0,void 0,void 0,(function*(){return u.getAccessToken()})),getBasicUserInfo:()=>Ly(void 0,void 0,void 0,(function*(){return u.getBasicUserInfo()})),getConfigData:()=>Ly(void 0,void 0,void 0,(function*(){return yield d.getConfigData()})),getCryptoHelper:()=>Ly(void 0,void 0,void 0,(function*(){return u.getCryptoHelper()})),getDataLayer:()=>Ly(void 0,void 0,void 0,(function*(){return u.getDataLayer()})),getDecodedIDToken:()=>Ly(void 0,void 0,void 0,(function*(){return u.getDecodedIDToken()})),getHttpClient:()=>h,getIDToken:()=>Ly(void 0,void 0,void 0,(function*(){return u.getIDToken()})),getOIDCServiceEndpoints:()=>Ly(void 0,void 0,void 0,(function*(){return u.getOIDCServiceEndpoints()})),httpRequest:e=>Ly(void 0,void 0,void 0,(function*(){return yield u.httpRequest(h,e,p,b,m)})),httpRequestAll:e=>Ly(void 0,void 0,void 0,(function*(){return yield u.httpRequestAll(e,h,p,b,m)})),isAuthenticated:()=>Ly(void 0,void 0,void 0,(function*(){return u.isAuthenticated()})),isSessionActive:()=>Ly(void 0,void 0,void 0,(function*(){return"true"===(yield d.getSessionStatus())})),refreshAccessToken:()=>Ly(void 0,void 0,void 0,(function*(){try{return yield u.refreshAccessToken(G)}catch(e){return Promise.reject(e)}})),requestCustomGrant:e=>Ly(void 0,void 0,void 0,(function*(){return yield u.requestCustomGrant(e,G)})),revokeAccessToken:()=>Ly(void 0,void 0,void 0,(function*(){const e=yield r.getRefreshTimeoutTimer();return a.revokeAccessToken().then((()=>(s.reset(),r.clearRefreshTokenTimeout(e),Promise.resolve(!0)))).catch((e=>Promise.reject(e)))})),setHttpRequestErrorCallback:e=>{b=e},setHttpRequestFinishCallback:e=>{(null==h?void 0:h.setHttpRequestFinishCallback)&&h.setHttpRequestFinishCallback(e)},setHttpRequestStartCallback:e=>{(null==h?void 0:h.setHttpRequestStartCallback)&&h.setHttpRequestStartCallback(e)},setHttpRequestSuccessCallback:e=>{(null==h?void 0:h.setHttpRequestSuccessCallback)&&h.setHttpRequestSuccessCallback(e)},signIn:(t,n,l,o,c)=>Ly(void 0,void 0,void 0,(function*(){var r,s,Z;const h=yield u.handleSignIn(g,I,void 0);if(h)return h;{let u,h,m,p={params:{}};if((null==i?void 0:i.responseMode)===e.ResponseMode.formPost&&n?(u=n,h=null!=l?l:"",m=null!=o?o:""):(u=null!==(r=new URL(window.location.href).searchParams.get(Ay))&&void 0!==r?r:"",h=null!==(s=new URL(window.location.href).searchParams.get(Ty))&&void 0!==s?s:"",m=null!==(Z=new URL(window.location.href).searchParams.get(wy))&&void 0!==Z?Z:"",MX.removeAuthorizationCode()),u&&m){b="true",Ly(void 0,void 0,void 0,(function*(){yield d.setSessionStatus(b)}));const e=yield d.getTemporaryDataParameter(JX);return e&&"string"==typeof e&&(p=JSON.parse(e)),y(u,h,m,p)}return a.getAuthorizationURL(t).then((e=>Ly(void 0,void 0,void 0,(function*(){if(i.storage===QX.BrowserMemory&&i.enablePKCE){const e=Py.extractPKCEKeyFromStateParam(m);MX.setPKCE(e,yield a.getPKCECode(m))}return c&&d.setTemporaryDataParameter(JX,JSON.stringify(c)),location.href=e,yield MX.waitTillPageRedirect(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""})}))))}var b})),signOut:()=>Ly(void 0,void 0,void 0,(function*(){return(yield a.isAuthenticated())&&!Z?location.href=yield a.getSignOutURL():location.href=MX.getSignOutURL(i.clientID,t),r.clearRefreshTokenTimeout(),yield d.removeOIDCProviderMetaData(),yield d.removeTemporaryData(),yield d.removeSessionData(),yield d.removeSessionStatus(),yield MX.waitTillPageRedirect(),!0})),trySignInSilently:(e,t)=>Ly(void 0,void 0,void 0,(function*(){return yield u.trySignInSilently(X,y,s,e,t)})),updateConfig:e=>Ly(void 0,void 0,void 0,(function*(){const t=yield d.getConfigData(),i=!(t&&t.endpoints&&t.endpoints.checkSessionIframe&&e&&e.endpoints&&e.endpoints.checkSessionIframe&&t.endpoints.checkSessionIframe===e.endpoints.checkSessionIframe),n=Object.assign(Object.assign({},t),e);yield a.updateConfig(n),n.enableOIDCSessionManagement&&i&&(s.reset(),I())}))}})),sv=(t,i,n,l)=>Ly(void 0,void 0,void 0,(function*(){var o;let c;const a=null!==(o=null==i?void 0:i.requestTimeout)&&void 0!==o?o:6e4;let r=!0,d=!1;const s=(e=>{switch(e){case QX.LocalStorage:return new eS;case QX.SessionStorage:return new iS;case QX.BrowserMemory:return new tS;default:return new iS}})(i.storage),u=new rv,Z=new Oy;yield Z.initialize(i,s,u,t);const h=new DX(Z),b=yield OX((()=>Ly(void 0,void 0,void 0,(function*(){const e={type:lX};try{return yield I(e)}catch(e){return MX.getSignOutURL(i.clientID,t)}}))),i.storage,(e=>g(e))),m=l(Z,h),p=new n,I=e=>{const t=new MessageChannel;return p.postMessage(e,[t.port2]),new Promise(((e,i)=>{const n=setTimeout((()=>{i(new zy("SPA-WEB_WORKER_CLIENT-COM-TO01","Operation timed out.","No response was received from the web worker for "+a/1e3+" since dispatching the request"))}),a);return t.port1.onmessage=l=>{let{data:o}=l;if(clearTimeout(n),t.port1.close(),t.port2.close(),null==o?void 0:o.success){const t=(null==o?void 0:o.data)?JSON.parse(null==o?void 0:o.data):null;(null==o?void 0:o.blob)&&(t.data=null==o?void 0:o.blob),e(t)}else i(o.error?JSON.parse(o.error):null)}}))},g=e=>I({data:e,type:CX}),G=()=>I({type:RX}),y=()=>Ly(void 0,void 0,void 0,(function*(){const e=yield S(),t=yield v();m.initializeSessionManger(t,e,(()=>Ly(void 0,void 0,void 0,(function*(){return(yield f()).sessionState}))),(e=>Ly(void 0,void 0,void 0,(function*(){return(yield V(e)).authorizationURL}))),b)})),X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ly(void 0,void 0,void 0,(function*(){var t;const i=yield v(),n={data:Object.assign({prompt:"none",state:AX},e),type:gX},l=yield I(n),o=Py.extractPKCEKeyFromStateParam(null!==(t=new URL(l.authorizationURL).searchParams.get(wy))&&void 0!==t?t:"");l.pkce&&i.enablePKCE&&MX.setPKCE(o,l.pkce);const c=l.authorizationURL,a=new URL(c);a.searchParams.set("response_mode","query");return a.toString()}))},V=e=>Ly(void 0,void 0,void 0,(function*(){const t=yield v();return I({data:e,type:gX}).then((e=>Ly(void 0,void 0,void 0,(function*(){var i;if(e.pkce&&t.enablePKCE){const t=Py.extractPKCEKeyFromStateParam(null!==(i=new URL(e.authorizationURL).searchParams.get(wy))&&void 0!==i?i:"");MX.setPKCE(t,e.pkce)}return Promise.resolve(e)}))))})),W=(e,i,n,l)=>Ly(void 0,void 0,void 0,(function*(){const o=yield v(),c=Py.extractPKCEKeyFromStateParam(n),a={data:{code:e,pkce:o.enablePKCE?MX.getPKCE(c):void 0,sessionState:i,state:n,tokenRequestConfig:l},type:GX};return o.enablePKCE&&MX.removePKCE(c),I(a).then((e=>I({type:XX}).then((i=>(MX.setSignOutURL(i,o.clientID,t),o.enableOIDCSessionManagement&&y(),G(),Promise.resolve(e)))).catch((e=>Promise.reject(e))))).catch((e=>Promise.reject(e)))})),C=()=>Ly(void 0,void 0,void 0,(function*(){return yield b.receivePromptNoneResponse((e=>Ly(void 0,void 0,void 0,(function*(){return g(e)}))))})),R=()=>Ly(void 0,void 0,void 0,(function*(){if(yield Y())return yield G(),i.enableOIDCSessionManagement&&y(),f()})),S=()=>I({type:ZX}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),v=()=>I({type:KX}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),f=()=>I({type:hX}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),Y=()=>I({type:yX}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e)));return{disableHttpHandler:()=>I({type:IX}).then((()=>(r=!1,Promise.resolve(!0)))).catch((e=>Promise.reject(e))),enableHttpHandler:()=>I({type:pX}).then((()=>(r=!0,Promise.resolve(!0)))).catch((e=>Promise.reject(e))),getBasicUserInfo:f,getConfigData:v,getCryptoHelper:()=>I({type:mX}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getDecodedIDPIDToken:()=>I({type:"get-decoded-idp-id-token"}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getDecodedIDToken:()=>I({type:bX}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getIDToken:()=>I({type:vX}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getOIDCServiceEndpoints:S,httpRequest:e=>{(null==e?void 0:e.data)&&(null==e?void 0:e.data)instanceof FormData&&(e.data=Object.assign(Object.assign({},Object.fromEntries(null==e?void 0:e.data.entries())),{formData:!0}));return I({data:e,type:oX}).then((e=>Promise.resolve(e))).catch((e=>Ly(void 0,void 0,void 0,(function*(){return r&&("function"==typeof c.requestErrorCallback&&(yield c.requestErrorCallback(e)),"function"==typeof c.requestFinishCallback&&c.requestFinishCallback()),Promise.reject(e)}))))},httpRequestAll:e=>I({data:e,type:cX}).then((e=>Promise.resolve(e))).catch((e=>Ly(void 0,void 0,void 0,(function*(){return r&&("function"==typeof c.requestErrorCallback&&(yield c.requestErrorCallback(e)),"function"==typeof c.requestFinishCallback&&c.requestFinishCallback()),Promise.reject(e)})))),initialize:()=>{c||(c={requestErrorCallback:()=>Promise.resolve(),requestFinishCallback:()=>null,requestStartCallback:()=>null,requestSuccessCallback:()=>null}),p.onmessage=e=>{let{data:t}=e;switch(t.type){case uX:(null==c?void 0:c.requestFinishCallback)&&(null==c||c.requestFinishCallback());break;case dX:(null==c?void 0:c.requestStartCallback)&&(null==c||c.requestStartCallback());break;case sX:(null==c?void 0:c.requestSuccessCallback)&&(null==c||c.requestSuccessCallback(t.data?JSON.parse(t.data):null))}};return I({data:i,type:nX}).then((()=>Promise.resolve(!0))).catch((e=>Promise.reject(e)))},isAuthenticated:Y,refreshAccessToken:()=>I({type:VX}),requestCustomGrant:e=>I({data:e,type:aX}).then((t=>(e.preventSignOutURLUpdate&&(d=!0),Promise.resolve(t)))).catch((e=>Promise.reject(e))),revokeAccessToken:()=>I({type:rX}).then((e=>(b.reset(),Promise.resolve(e)))).catch((e=>Promise.reject(e))),setHttpRequestErrorCallback:e=>{e&&"function"==typeof e&&(c.requestErrorCallback=e)},setHttpRequestFinishCallback:e=>{e&&"function"==typeof e&&(c.requestFinishCallback=e)},setHttpRequestStartCallback:e=>{e&&"function"==typeof e&&(c.requestStartCallback=e)},setHttpRequestSuccessCallback:e=>{e&&"function"==typeof e&&(c.requestSuccessCallback=e)},signIn:(t,n,l,o,c)=>Ly(void 0,void 0,void 0,(function*(){var a,r,d;const s=yield m.handleSignIn(C,y,R);if(s)return s;{let s,u,Z;return(null==i?void 0:i.responseMode)===e.ResponseMode.formPost&&n?(s=n,u=null!=l?l:"",Z=null!=o?o:""):(s=null!==(a=new URL(window.location.href).searchParams.get(Ay))&&void 0!==a?a:"",u=null!==(r=new URL(window.location.href).searchParams.get(Ty))&&void 0!==r?r:"",Z=null!==(d=new URL(window.location.href).searchParams.get(wy))&&void 0!==d?d:"",MX.removeAuthorizationCode()),s&&Z?W(s,u,Z,c):V(t).then((e=>Ly(void 0,void 0,void 0,(function*(){return location.href=e.authorizationURL,yield MX.waitTillPageRedirect(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""})})))).catch((e=>Promise.reject(e)))}})),signOut:()=>new Promise(((e,n)=>{if(!d){return I({type:lX}).then((t=>Ly(void 0,void 0,void 0,(function*(){return window.location.href=t,yield MX.waitTillPageRedirect(),e(!0)})))).catch((e=>n(e)))}window.location.href=MX.getSignOutURL(i.clientID,t),MX.waitTillPageRedirect().then((()=>Promise.resolve(!0)))})),trySignInSilently:(e,t)=>Ly(void 0,void 0,void 0,(function*(){return yield m.trySignInSilently(X,W,b,e,t)})),updateConfig:e=>Ly(void 0,void 0,void 0,(function*(){const t=yield v(),i=!(t&&t.endpoints&&t.endpoints.checkSessionIframe&&e&&e.endpoints&&e.endpoints.checkSessionIframe&&t.endpoints.checkSessionIframe===e.endpoints.checkSessionIframe),n=Object.assign(Object.assign({},t),e),l={data:n,type:SX};yield I(l),n.enableOIDCSessionManagement&&i&&(b.reset(),y())}))}})),uv={autoLogoutOnTokenRefreshError:!0,checkSessionInterval:3,clientHost:origin,enableOIDCSessionManagement:!1,periodicTokenRefresh:!1,sessionRefreshInterval:300,storage:QX.SessionStorage};class Zv{constructor(e){this._authHelper=EX,this._worker=iX,this._initialized=!1,this._startedInitialize=!1,this._onSignInCallback=()=>null,this._onSignOutCallback=()=>null,this._onSignOutFailedCallback=()=>null,this._onEndUserSession=()=>null,this._onInitialize=()=>null,this._onCustomGrant=new Map,this._instanceID=e}instantiateAuthHelper(e){this._authHelper=e||EX}instantiateWorker(e){this._worker=e||iX}_isInitialized(){return Ly(this,void 0,void 0,(function*(){if(!this._startedInitialize)return!1;let e=0;for(;!this._initialized;)1e4===e&&console.warn("It is taking longer than usual for the object to be initialized"),yield new Promise((e=>setTimeout(e,1))),e++;return!0}))}_validateMethod(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ly(this,void 0,void 0,(function*(){return(yield this._isInitialized())?!(e&&!(yield this.isAuthenticated()))||Promise.reject(new zy("SPA-AUTH_CLIENT-VM-IV02","The user is not authenticated.","The user must be authenticated first.")):Promise.reject(new zy("SPA-AUTH_CLIENT-VM-NF01","The SDK is not initialized.","The SDK must be initialized first."))}))}
/**
	   * This method returns the instance of the singleton class.
	   * If an ID is provided, it will return the instance with the given ID.
	   * If no ID is provided, it will return the default instance value 0.
	   *
	   * @return {AsgardeoSPAClient} - Returns the instance of the singleton class.
	   *
	   * @example
	   * ```
	   * const auth = AsgardeoSPAClient.getInstance();
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#getinstance
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */static getInstance(e){var t,i;return e&&(null===(t=this._instances)||void 0===t?void 0:t.get(e))?this._instances.get(e):!e&&(null===(i=this._instances)||void 0===i?void 0:i.get(0))?this._instances.get(0):e?(this._instances.set(e,new Zv(e)),this._instances.get(e)):(this._instances.set(0,new Zv(0)),this._instances.get(0))}
/**
	   * This method initializes the `AsgardeoSPAClient` instance.
	   *
	   * @param {ConfigInterface} config The config object to initialize with.
	   *
	   * @return {Promise<boolean>} - Resolves to `true` if initialization is successful.
	   *
	   * @example
	   * ```
	   * auth.initialize({
	   *     signInRedirectURL: "http://localhost:3000/sign-in",
	   *     clientID: "client ID",
	   *     baseUrl: "https://api.asgardeo.io"
	   * });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#initialize
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */initialize(e,t,i){var n,l,o,c;return Ly(this,void 0,void 0,(function*(){this._storage=null!==(n=e.storage)&&void 0!==n?n:QX.SessionStorage,this._initialized=!1,this._startedInitialize=!0,t&&this.instantiateAuthHelper(t),i&&this.instantiateWorker(i);const a=yield null===(l=this._client)||void 0===l?void 0:l.getConfigData();if(this._storage!==QX.WebWorker){const t=e,i=Object.assign({},uv),n=Object.assign(Object.assign({},i),t);return this._client&&(!this._client||a&&0!==(null===(o=Object.keys(a))||void 0===o?void 0:o.length))||(this._client=yield dv(this._instanceID,n,((e,t)=>new this._authHelper(e,t)))),this._initialized=!0,this._onInitialize&&this._onInitialize(!0),n.autoLogoutOnTokenRefreshError?(window.addEventListener("message",(e=>{var t;(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===WX&&this.signOut()})),Promise.resolve(!0)):Promise.resolve(!0)}if(!this._client||this._client&&(!a||0===(null===(c=Object.keys(a))||void 0===c?void 0:c.length))){const t=e;return this._client=yield sv(this._instanceID,Object.assign(Object.assign({},uv),t),this._worker,((e,t)=>new this._authHelper(e,t))),this._client.initialize().then((()=>(this._onInitialize&&this._onInitialize(!0),this._initialized=!0,Promise.resolve(!0)))).catch((e=>Promise.reject(e)))}return Promise.resolve(!0)}))}
/**
	   * This method returns a Promise that resolves with the basic user information obtained from the ID token.
	   *
	   * @return {Promise<BasicUserInfo>} - A promise that resolves with the user information.
	   *
	   * @example
	   * ```
	   * auth.getBasicUserInfo().then((response) => {
	   *    // console.log(response);
	   * }).catch((error) => {
	   *    // console.error(error);
	   * });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#getuserinfo
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getBasicUserInfo(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getBasicUserInfo()}))}
/**
	   * This method initiates the authentication flow. This should be called twice.
	   *  1. To initiate the authentication flow.
	   *  2. To obtain the access token after getting the authorization code.
	   *
	   * To satisfy the second condition, one of the two strategies mentioned below can be used:
	   *  1. Redirect the user back to the same login page that initiated the authentication flow.
	   *  2. Call the `signIn()` method in the page the user is redirected to after authentication.
	   *
	   * **To fire a callback function after signing in, use the `on()` method.**
	   * **To learn more about the `on()` method:**
	   * @see {@link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#on}
	   *
	   * @param {SignInConfig} config - The sign-in config.
	   * The `SignInConfig` object has these two attributes in addition to any custom key-value pairs.
	   *  1. fidp - Specifies the FIDP parameter that is used to take the user directly to an IdP login page.
	   *  2. forceInit: Specifies if the OIDC Provider Meta Data should be loaded again from the `well-known`
	   * endpoint.
	   *  3. Any other parameters that should be appended to the authorization request.
	   * @param {string} authorizationCode - The authorization code. (Optional)
	   * @param {string} sessionState - The session state. (Optional)
	   * @param {string} state - The state. (Optional)
	   *
	   * @return {Promise<BasicUserInfo>} - A promise that resolves with the user information.
	   *
	   * @example
	   * ```
	   * auth.signIn();
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#signin
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */signIn(e,t,i,n,l){var o;return Ly(this,void 0,void 0,(function*(){if(yield this._isInitialized(),MX.canContinueSignIn(Boolean(null==e?void 0:e.callOnlyOnRedirect),t))return null==e||delete e.callOnlyOnRedirect,null===(o=this._client)||void 0===o?void 0:o.signIn(e,t,i,n,l).then((e=>(this._onSignInCallback&&(e.allowedScopes||e.displayName||e.email||e.username)&&this._onSignInCallback(e),e)))}))}trySignInSilently(e,t){var i;return Ly(this,void 0,void 0,(function*(){if(yield this._isInitialized(),!MX.wasSignInCalled())return null===(i=this._client)||void 0===i?void 0:i.trySignInSilently(e,t).then((e=>{if(this._onSignInCallback&&e){const t=e;(t.allowedScopes||t.displayName||t.email||t.username)&&this._onSignInCallback(t)}return e}))}))}
/**
	   * This method initiates the sign-out flow.
	   *
	   * **To fire a callback function after signing out, use the `on()` method.**
	   * **To learn more about the `on()` method:**
	   * @see {@link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#on}
	   *
	   * @return {Promise<boolean>} - Returns a promise that resolves with `true` if sign out is successful.
	   *
	   * @example
	   * ```
	   * auth.signOut();
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#signout
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */signOut(){var e,t;return Ly(this,void 0,void 0,(function*(){yield this._validateMethod(!1);return null!==(t=yield null===(e=this._client)||void 0===e?void 0:e.signOut())&&void 0!==t&&t}))}
/**
	   * This method sends an API request to a protected endpoint.
	   * The access token is automatically attached to the header of the request.
	   * This is the only way by which protected endpoints can be accessed
	   * when the web worker is used to store session information.
	   *
	   * @param {HttpRequestConfig} config -  The config object containing attributes necessary to send a request.
	   *
	   * @return {Promise<HttpResponse>} - Returns a Promise that resolves with the response to the request.
	   *
	   * @example
	   * ```
	   *  const requestConfig = {
	   *      headers: {
	   *          "Accept": "application/json",
	   *          "Access-Control-Allow-Origin": "https://api.asgardeo.io/myaccount",
	   *          "Content-Type": "application/scim+json"
	   *      },
	   *      method: "GET",
	   *      url: "https://api.asgardeo.io/scim2/me"
	   *  };
	   *
	   *  return auth.httpRequest(requestConfig)
	   *     .then((response) => {
	   *           // console.log(response);
	   *      })
	   *      .catch((error) => {
	   *           // console.error(error);
	   *      });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#httprequest
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */httpRequest(e){var t;return Ly(this,void 0,void 0,(function*(){return yield this._validateMethod(!1),null===(t=this._client)||void 0===t?void 0:t.httpRequest(e)}))}
/**
	   * This method sends multiple API requests to a protected endpoint.
	   * The access token is automatically attached to the header of the request.
	   * This is the only way by which multiple requests can be sent to protected endpoints
	   * when the web worker is used to store session information.
	   *
	   * @param {HttpRequestConfig[]} config -  The config object containing attributes necessary to send a request.
	   *
	   * @return {Promise<HttpResponse[]>} - Returns a Promise that resolves with the responses to the requests.
	   *
	   * @example
	   * ```
	   *  const requestConfig = {
	   *      headers: {
	   *          "Accept": "application/json",
	   *          "Content-Type": "application/scim+json"
	   *      },
	   *      method: "GET",
	   *      url: "https://api.asgardeo.io/scim2/me"
	   *  };
	   *
	   *  const requestConfig2 = {
	   *      headers: {
	   *          "Accept": "application/json",
	   *          "Content-Type": "application/scim+json"
	   *      },
	   *      method: "GET",
	   *      url: "https://api.asgardeo.io/scim2/me"
	   *  };
	   *
	   *  return auth.httpRequest([requestConfig, requestConfig2])
	   *     .then((responses) => {
	   *           response.forEach((response)=>{
	   *              // console.log(response);
	   *           });
	   *      })
	   *      .catch((error) => {
	   *           // console.error(error);
	   *      });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#httprequestall
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */httpRequestAll(e){var t;return Ly(this,void 0,void 0,(function*(){return yield this._validateMethod(!1),null===(t=this._client)||void 0===t?void 0:t.httpRequestAll(e)}))}
/**
	   * This method allows you to send a request with a custom grant.
	   *
	   * @param {CustomGrantRequestParams} config - The request parameters.
	   *
	   * @return {Promise<HttpResponse<any> | SignInResponse>} - A Promise that resolves with
	   * the value returned by the custom grant request.
	   *
	   * @example
	   * ```
	   * auth.customGrant({
	   *   attachToken: false,
	   *   data: {
	   *       client_id: "{{clientId}}",
	   *       grant_type: "account_switch",
	   *       scope: "{{scope}}",
	   *       token: "{{token}}",
	   *   },
	   *   id: "account-switch",
	   *   returnResponse: true,
	   *   returnsSession: true,
	   *   signInRequired: true
	   * });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#customgrant
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */requestCustomGrant(e){var t,i;return Ly(this,void 0,void 0,(function*(){if(e.signInRequired,yield this._validateMethod(),!e.id)return Promise.reject(new zy("SPA-AUTH_CLIENT-RCG-NF01","The custom grant request id not found.","The id attribute of the custom grant config object passed as an argument should have a value."));const n=yield null===(t=this._client)||void 0===t?void 0:t.requestCustomGrant(e),l=this._onCustomGrant.get(e.id);return l&&l(null===(i=this._onCustomGrant)||void 0===i?void 0:i.get(e.id)),n}))}
/**
	   * This method ends a user session. The access token is revoked and the session information is destroyed.
	   *
	   * **To fire a callback function after ending user session, use the `on()` method.**
	   * **To learn more about the `on()` method:**
	   * @see {@link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#on}
	   *
	   * @return {Promise<boolean>} - A promise that resolves with `true` if the process is successful.
	   *
	   * @example
	   * ```
	   * auth.endUserSession();
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#endusersession
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */revokeAccessToken(){var e;return Ly(this,void 0,void 0,(function*(){yield this._validateMethod();const t=yield null===(e=this._client)||void 0===e?void 0:e.revokeAccessToken();return this._onEndUserSession&&(yield this._onEndUserSession(t)),t}))}
/**
	   * This method returns a Promise that resolves with an object containing the service endpoints.
	   *
	   * @return {Promise<ServiceResourcesType} - A Promise that resolves with an object containing the service endpoints.
	   *
	   * @example
	   * ```
	   * auth.getServiceEndpoints().then((endpoints) => {
	   *      // console.log(endpoints);
	   *  }).error((error) => {
	   *      // console.error(error);
	   *  });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#getserviceendpoints
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getOIDCServiceEndpoints(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.getOIDCServiceEndpoints()}))}
/**
	   * This methods returns the Axios http client.
	   *
	   * @return {HttpClientInstance} - The Axios HTTP client.
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getHttpClient(){if(this._client){if(this._storage!==QX.WebWorker){return this._client.getHttpClient()}throw new zy("SPA-AUTH_CLIENT-GHC-IV01","Http client cannot be returned.","The http client cannot be returned when the storage type is set to webWorker.")}throw new zy("SPA-AUTH_CLIENT-GHC-NF02","The SDK is not initialized.","The SDK has not been initialized yet. Initialize the SDK using the initialize method before calling this method.")}
/**
	   * This method decodes the payload of the id token and returns it.
	   *
	   * @return {Promise<DecodedIdTokenPayloadInterface>} - A Promise that resolves with
	   * the decoded payload of the id token.
	   *
	   * @example
	   * ```
	   * auth.getDecodedIDToken().then((response)=>{
	   *     // console.log(response);
	   * }).catch((error)=>{
	   *     // console.error(error);
	   * });
	   * ```
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#getdecodedidtoken
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getDecodedIDToken(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getDecodedIDToken()}))}
/**
	   * This method returns the CryptoHelper instance.
	   *
	   * @return {Promise<DecodedIdTokenPayloadInterface>} - A Promise that resolves with
	   * the CryptoHelper instance.
	   *
	   * @example
	   * ```
	   * auth.getCryptoHelper().then((response)=>{
	   *     // console.log(response);
	   * }).catch((error)=>{
	   *     // console.error(error);
	   * });
	   * ```
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#getCryptoHelper
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getCryptoHelper(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getCryptoHelper()}))}
/**
	   * This method return the ID token.
	   *
	   * @return {Promise<string>} - A Promise that resolves with the ID token.
	   *
	   * @example
	   * ```
	   * const idToken = await auth.getIDToken();
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-js-sdk/tree/master#getIDToken
	   *
	   * @memberof AsgardeoAuthClient
	   *
	   * @preserve
	   */getIDToken(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getIDToken()}))}
/**
	   * This method return a Promise that resolves with the access token.
	   *
	   * **This method will not return the access token if the storage type is set to `webWorker`.**
	   *
	   * @return {Promise<string>} - A Promise that resolves with the access token.
	   *
	   * @example
	   * ```
	   *   auth.getAccessToken().then((token) => {
	   *       // console.log(token);
	   *   }).catch((error) => {
	   *       // console.error(error);
	   *   });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#getaccesstoken
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getAccessToken(){return Ly(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(QX.WebWorker,QX.BrowserMemory)].includes(this._storage))return Promise.reject(new zy("SPA-AUTH_CLIENT-GAT-IV01","The access token cannot be returned.","The access token cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getAccessToken()}))}
/**
	   * This method return a Promise that resolves with the idp access token.
	   *
	   * **This method will not return the access token if the storage type is set to `webWorker`.**
	   *
	   * @return {Promise<string>} - A Promise that resolves with the idp access token.
	   *
	   * @example
	   * ```
	   *   auth.getIDPAccessToken().then((token) => {
	   *       // console.log(token);
	   *   }).catch((error) => {
	   *       // console.error(error);
	   *   });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#getaccesstoken
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getIDPAccessToken(){return Ly(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(QX.WebWorker,QX.BrowserMemory)].includes(this._storage))return Promise.reject(new zy("SPA-AUTH_CLIENT-GIAT-IV01","The access token cannot be returned.","The access token cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getAccessToken()}))}
/**
	   * This method return a Promise that resolves with the data layer object.
	   *
	   * **This method will not return the data layer object, if the storage type is set to `webWorker`.**
	   *
	   * @return {Promise<string>} - A Promise that resolves with the data layer object.
	   *
	   * @example
	   * ```
	   *   auth.getDataLayer().then((dataLayer) => {
	   *       // console.log(dataLayer);
	   *   }).catch((error) => {
	   *       // console.error(error);
	   *   });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#getdatalayer
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getDataLayer(){return Ly(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(QX.WebWorker,QX.BrowserMemory)].includes(this._storage))return Promise.reject(new zy("SPA-AUTH_CLIENT-GDL-IV01","The data layer cannot be returned.","The data layer cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getDataLayer()}))}
/**
	   * This method return a Promise that resolves with the config data stored in the storage.
	   *
	   * @return - A Promise that resolves with the config data.
	   *
	   * @example
	   * ```
	   * auth.getConfigData().then((configData) => {
	   *     // console.log(configData);
	   * }).catch((error) => {
	   *    // console.error(error);
	   * });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/main#getConfigData
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */getConfigData(){var e;return Ly(this,void 0,void 0,(function*(){return null===(e=this._client)||void 0===e?void 0:e.getConfigData()}))}
/**
	   * This method refreshes the access token.
	   *
	   * @return {TokenResponseInterface} - A Promise that resolves with an object containing
	   * information about the refreshed access token.
	   *
	   * @example
	   * ```
	   * auth.refreshToken().then((response)=>{
	   *      // console.log(response);
	   * }).catch((error)=>{
	   *      // console.error(error);
	   * });
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#refreshtoken
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */refreshAccessToken(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._validateMethod(!1),null===(e=this._client)||void 0===e?void 0:e.refreshAccessToken()}))}
/**
	   * This method specifies if the user is authenticated or not.
	   *
	   * @return {Promise<boolean>} - A Promise that resolves with `true` if the user is authenticated.
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */isAuthenticated(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.isAuthenticated()}))}
/**
	   * This method specifies if there is an active session in the browser or not.
	   *
	   * @return {Promise<boolean>} - A Promise that resolves with `true` if there is a session.
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */isSessionActive(){return Ly(this,void 0,void 0,(function*(){if(yield this._isInitialized(),this._storage&&[(QX.WebWorker,QX.BrowserMemory)].includes(this._storage))return Promise.reject(new zy("SPA-AUTH_CLIENT-ISA-IV01","The active session cannot be returned.","The active session cannot be returned when the storage type is set to webWorker or browserMemory."));const e=this._client;return null==e?void 0:e.isSessionActive()}))}on(t,i,n){var l,o,c,a;return Ly(this,void 0,void 0,(function*(){if(yield this._isInitialized(),!i||"function"!=typeof i)throw new zy("SPA-AUTH_CLIENT-ON-IV02","Invalid callback function.","The provided callback function is invalid.");switch(t){case e.Hooks.SignIn:this._onSignInCallback=i;break;case e.Hooks.SignOut:this._onSignOutCallback=i,(yield MX.isSignOutSuccessful())&&this._onSignOutCallback();break;case e.Hooks.RevokeAccessToken:this._onEndUserSession=i;break;case e.Hooks.Initialize:this._onInitialize=i;break;case e.Hooks.HttpRequestError:null===(l=this._client)||void 0===l||l.setHttpRequestErrorCallback(i);break;case e.Hooks.HttpRequestFinish:null===(o=this._client)||void 0===o||o.setHttpRequestFinishCallback(i);break;case e.Hooks.HttpRequestStart:null===(c=this._client)||void 0===c||c.setHttpRequestStartCallback(i);break;case e.Hooks.HttpRequestSuccess:null===(a=this._client)||void 0===a||a.setHttpRequestSuccessCallback(i);break;case e.Hooks.CustomGrant:n&&this._onCustomGrant.set(n,i);break;case e.Hooks.SignOutFailed:{this._onSignOutFailedCallback=i;const e=MX.didSignOutFail();e&&this._onSignOutFailedCallback(e);break}default:throw new zy("SPA-AUTH_CLIENT-ON-IV01","Invalid hook.","The provided hook is invalid.")}}))}
/**
	   * This method enables callback functions attached to the http client.
	   *
	   * @return {Promise<boolean>} - A promise that resolves with True.
	   *
	   * @example
	   * ```
	   * auth.enableHttpHandler();
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#enableHttpHandler
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */enableHttpHandler(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.enableHttpHandler()}))}
/**
	   * This method disables callback functions attached to the http client.
	   *
	   * @return {Promise<boolean>} - A promise that resolves with True.
	   *
	   * @example
	   * ```
	   * auth.disableHttpHandler();
	   * ```
	   *
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master#disableHttpHandler
	   *
	   * @memberof AsgardeoSPAClient
	   *
	   * @preserve
	   */disableHttpHandler(){var e;return Ly(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.disableHttpHandler()}))}
/**
	   * This method updates the configuration that was passed into the constructor when instantiating this class.
	   *
	   * @param {Partial<AuthClientConfig<T>>} config - A config object to update the SDK configurations with.
	   *
	   * @example
	   * ```
	   * const config = {
	   *     signInRedirectURL: "http://localhost:3000/sign-in",
	   *     clientID: "client ID",
	   *     baseUrl: "https://api.asgardeo.io"
	   * }
	   * const auth.updateConfig(config);
	   * ```
	   * @link https://github.com/asgardeo/asgardeo-auth-spa-sdk/tree/master/lib#updateConfig
	   *
	   * @memberof AsgardeoAuthClient
	   *
	   * @preserve
	   */updateConfig(e){return Ly(this,void 0,void 0,(function*(){if(yield this._isInitialized(),this._storage===QX.WebWorker){const t=this._client;yield t.updateConfig(e)}else{const t=this._client;yield t.updateConfig(e)}}))}}Zv._instances=new Map;class hv extends Worker{constructor(){super(...arguments),this.onmessage=()=>null}}e.ASGARDEO_SESSION_ACTIVE="asgardeo-session-active",e.AUTHORIZATION_CODE=Ay,e.AsgardeoAuthClient=Oy,e.AsgardeoAuthException=zy,e.AsgardeoSPAClient=Zv,e.AuthenticationHelper=EX,e.AuthenticationUtils=Py,e.CLIENT_ID_TAG="{{clientID}}",e.CLIENT_SECRET_TAG="{{clientSecret}}",e.CryptoHelper=jy,e.DataLayer=Ey,e.HttpError=qR.AxiosError,e.MainThreadClient=dv,e.OIDC_SCOPE="openid",e.PKCE_CODE_VERIFIER="pkce_code_verifier",e.PKCE_SEPARATOR="#",e.REFRESH_TOKEN_TIMER=Uy,e.SCOPE_TAG="{{scope}}",e.SESSION_STATE=Ty,e.SIGN_OUT_SUCCESS_PARAM=Fy,e.SIGN_OUT_URL=By,e.SPAHelper=DX,e.SPAUtils=MX,e.STATE=wy,e.SUPPORTED_SIGNATURE_ALGORITHMS=Hy,e.TOKEN_REQUEST_CONFIG_KEY=JX,e.TOKEN_TAG="{{token}}",e.USERNAME_TAG="{{username}}",e.WebWorkerClass=hv,e.WebWorkerClient=sv,e.workerReceiver=e=>{const t=self;let i;t.onmessage=t=>{let{data:c,ports:a}=t;return Ly(void 0,void 0,void 0,(function*(){var t,r,d,s,u,Z;const h=a[0];if(c.type===nX||i)switch(c.type){case nX:try{const t=Object.assign({},c.data);i=yield((e,t)=>Ly(void 0,void 0,void 0,(function*(){const i=new tS,n=new rv,l=new Oy;yield l.initialize(e,i,n);const o=new DX(l),c=t(l,o),a=l.getDataLayer(),r=$R.getInstance();return(null==r?void 0:r.init)&&(yield r.init(!0,(e=>Ly(void 0,void 0,void 0,(function*(){yield c.attachTokenToRequestConfig(e)}))))),{disableHttpHandler:()=>{c.disableHttpHandler(r)},enableHttpHandler:()=>{c.enableHttpHandler(r)},getAccessToken:()=>c.getAccessToken(),getAuthorizationURL:e=>Ly(void 0,void 0,void 0,(function*(){return l.getAuthorizationURL(e).then((e=>Ly(void 0,void 0,void 0,(function*(){var t;const i=null!==(t=new URL(e).searchParams.get(wy))&&void 0!==t?t:"",n=yield l.getPKCECode(i);return{authorizationURL:e,pkce:n}})))).catch((e=>Promise.reject(e)))})),getBasicUserInfo:()=>Ly(void 0,void 0,void 0,(function*(){return c.getBasicUserInfo()})),getConfigData:()=>Ly(void 0,void 0,void 0,(function*(){return a.getConfigData()})),getCryptoHelper:()=>Ly(void 0,void 0,void 0,(function*(){return c.getCryptoHelper()})),getDecodedIDPIDToken:()=>Ly(void 0,void 0,void 0,(function*(){return c.getDecodedIDPIDToken()})),getDecodedIDToken:()=>Ly(void 0,void 0,void 0,(function*(){return c.getDecodedIDToken()})),getIDToken:()=>Ly(void 0,void 0,void 0,(function*(){return c.getIDToken()})),getOIDCServiceEndpoints:()=>Ly(void 0,void 0,void 0,(function*(){return c.getOIDCServiceEndpoints()})),getSignOutURL:()=>Ly(void 0,void 0,void 0,(function*(){return yield l.getSignOutURL()})),httpRequest:e=>Ly(void 0,void 0,void 0,(function*(){return yield c.httpRequest(r,e)})),httpRequestAll:e=>Ly(void 0,void 0,void 0,(function*(){return yield c.httpRequestAll(e,r)})),isAuthenticated:()=>c.isAuthenticated(),refreshAccessToken:()=>Ly(void 0,void 0,void 0,(function*(){try{return yield c.refreshAccessToken()}catch(e){return Promise.reject(e)}})),requestAccessToken:(e,t,i,n)=>Ly(void 0,void 0,void 0,(function*(){return yield c.requestAccessToken(e,t,void 0,i,n)})),requestCustomGrant:e=>Ly(void 0,void 0,void 0,(function*(){return yield c.requestCustomGrant(e)})),revokeAccessToken:()=>Ly(void 0,void 0,void 0,(function*(){const e=yield o.getRefreshTimeoutTimer();return l.revokeAccessToken().then((()=>(o.clearRefreshTokenTimeout(e),Promise.resolve(!0)))).catch((e=>Promise.reject(e)))})),setHttpRequestFinishCallback:e=>{(null==r?void 0:r.setHttpRequestFinishCallback)&&r.setHttpRequestFinishCallback(e)},setHttpRequestStartCallback:e=>{(null==r?void 0:r.setHttpRequestStartCallback)&&r.setHttpRequestStartCallback(e)},setHttpRequestSuccessCallback:e=>{(null==r?void 0:r.setHttpRequestSuccessCallback)&&r.setHttpRequestSuccessCallback(e)},setSessionState:e=>Ly(void 0,void 0,void 0,(function*(){yield a.setSessionDataParameter(Ty,e)})),signOut:()=>Ly(void 0,void 0,void 0,(function*(){return o.clearRefreshTokenTimeout(),yield l.getSignOutURL()})),startAutoRefreshToken:()=>Ly(void 0,void 0,void 0,(function*(){o.clearRefreshTokenTimeout(),o.refreshAccessTokenAutomatically(c)})),updateConfig:e=>Ly(void 0,void 0,void 0,(function*(){yield l.updateConfig(e)}))}})))(t,e),i.setHttpRequestFinishCallback(o),i.setHttpRequestStartCallback(n),i.setHttpRequestSuccessCallback(l),h.postMessage(jX.generateSuccessMessage())}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case gX:i.getAuthorizationURL(null==c?void 0:c.data).then((e=>{h.postMessage(jX.generateSuccessMessage(e))})).catch((e=>{h.postMessage(jX.generateFailureMessage(e))}));break;case GX:i.requestAccessToken(null===(t=null==c?void 0:c.data)||void 0===t?void 0:t.code,null===(r=null==c?void 0:c.data)||void 0===r?void 0:r.sessionState,null===(d=null==c?void 0:c.data)||void 0===d?void 0:d.pkce,null===(s=null==c?void 0:c.data)||void 0===s?void 0:s.state).then((e=>{h.postMessage(jX.generateSuccessMessage(e))})).catch((e=>{h.postMessage(jX.generateFailureMessage(e))}));break;case oX:{const e=c.data,t=null==e?void 0:e.data;if(!0===(null===(Z=null===(u=c.data)||void 0===u?void 0:u.data)||void 0===Z?void 0:Z.formData)){const i=new FormData;for(const e in t)"formData"!==e&&i.append(e,t[e]);e.data=i}i.httpRequest(e).then((e=>{h.postMessage(jX.generateSuccessMessage(e))})).catch((e=>{h.postMessage(jX.generateFailureMessage(e))}));break}case cX:i.httpRequestAll(c.data).then((e=>{h.postMessage(jX.generateSuccessMessage(e))})).catch((e=>{h.postMessage(jX.generateFailureMessage(e))}));break;case lX:try{h.postMessage(jX.generateSuccessMessage(yield i.signOut()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case aX:i.requestCustomGrant(c.data).then((e=>{h.postMessage(jX.generateSuccessMessage(e))})).catch((e=>{h.postMessage(jX.generateFailureMessage(e))}));break;case rX:i.revokeAccessToken().then((e=>{h.postMessage(jX.generateSuccessMessage(e))})).catch((e=>{h.postMessage(jX.generateFailureMessage(e))}));break;case ZX:try{h.postMessage(jX.generateSuccessMessage(yield i.getOIDCServiceEndpoints()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case hX:try{h.postMessage(jX.generateSuccessMessage(yield i.getBasicUserInfo()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case bX:try{h.postMessage(jX.generateSuccessMessage(yield i.getDecodedIDToken()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case mX:try{h.postMessage(jX.generateSuccessMessage(yield i.getCryptoHelper()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case vX:try{h.postMessage(jX.generateSuccessMessage(yield i.getIDToken()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case pX:i.enableHttpHandler(),h.postMessage(jX.generateSuccessMessage());break;case IX:i.disableHttpHandler(),h.postMessage(jX.generateSuccessMessage());break;case yX:try{h.postMessage(jX.generateSuccessMessage(yield i.isAuthenticated()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case XX:try{h.postMessage(jX.generateSuccessMessage(yield i.getSignOutURL()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case VX:try{h.postMessage(jX.generateSuccessMessage(yield i.refreshAccessToken()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case RX:try{h.postMessage(jX.generateSuccessMessage(i.startAutoRefreshToken()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case CX:try{h.postMessage(jX.generateSuccessMessage(yield i.setSessionState(null==c?void 0:c.data)))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case SX:try{h.postMessage(jX.generateSuccessMessage(yield i.updateConfig(null==c?void 0:c.data)))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;case KX:try{h.postMessage(jX.generateSuccessMessage(yield i.getConfigData()))}catch(e){h.postMessage(jX.generateFailureMessage(e))}break;default:null==h||h.postMessage(jX.generateFailureMessage(new zy("SPA-CLIENT_WORKER-ONMSG-IV02","The message type is invalid.","The message type provided, ".concat(c.type,", is invalid."))))}else h.postMessage(jX.generateFailureMessage(new zy("SPA-CLIENT_WORKER-ONMSG-NF01","The web worker has not been initialized yet.","The initialize method needs to be called before the specified operation can be carried out.")))}))};const n=()=>{t.postMessage({type:dX})},l=e=>{t.postMessage({data:JSON.stringify(null!=e?e:""),type:sX})},o=()=>{t.postMessage({type:uX})}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=asgardeo-spa.production.js.map
